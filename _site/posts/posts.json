[
  {
    "path": "posts/2021-11-21-tree-map/",
    "title": "Treemap for Visualising data",
    "description": "Create a Treemap visualisation (kinda like a pie-chart but better, in my opinion). Treemaps are great for hierarchical data.",
    "author": [
      {
        "name": "Vebash Naidoo",
        "url": "https://twitter.com/Sciencificity"
      }
    ],
    "date": "2021-11-21",
    "categories": [
      "Treemap",
      "Hierarchical data",
      "Interactive treemaps with {d3treeR}"
    ],
    "contents": "\r\n\r\nContents\r\nTreemap Visualisations\r\nRead in data\r\nEDA\r\nTreemap\r\nSimple treemap\r\nTreemap with some hierarchy\r\nMake it interactive with {d3treeR}\r\n\r\nResources\r\n\r\n\r\n\r\n\r\nVisual from Information is Beautiful where the viz was a treemap featuring rectangles showing differences between different big numbers\r\nTreemap Visualisations\r\nTreemaps are great for hierarchical data visualisation. I was inspired by the informative and beautiful The Billion Dollar-o-Gram 2009 treemap at Information is Beautiful.\r\n\r\n\r\nlibrary(tidyverse)\r\nlibrary(treemap)\r\n# install.packages(\"devtools\")\r\n# devtools::install_github(\"timelyportfolio/d3treeR\")\r\nlibrary(d3treeR)\r\n\r\n\r\n\r\nRead in data\r\nThe data comes from the TidyTuesday Project in particular Week 11 of 2021.\r\nIt is data about the Bechdel Test. As per the TidyTuesday Readme these are the criteria needed to pass the test:\r\nthere are at least two named women in the picture,\r\nthey have a conversation with each other at some point,\r\nand that conversation isn’t about a male character\r\n\r\n\r\nraw_bechdel <- readr::read_csv(glue::glue('https://raw.githubusercontent.com',\r\n                                          '/rfordatascience/tidytuesday/master/data',\r\n                                          '/2021/2021-03-09/raw_bechdel.csv'))\r\nmovies <- readr::read_csv(glue::glue('https://raw.githubusercontent.com',\r\n                                     '/rfordatascience/tidytuesday/master/data',\r\n                                     '/2021/2021-03-09/movies.csv'))\r\n\r\n\r\n\r\nEDA\r\nLet’s get a feel for the data we’re working with.\r\n\r\n\r\n# output reproducible\r\nset.seed(2187)\r\n\r\nmovie_sample <- movies %>% \r\n  slice_sample(n = 10)\r\n\r\nmovie_sample %>% \r\n  DT::datatable(filter = 'top', list(scrollX = TRUE,\r\n                     pageLength = 5),\r\n    caption = htmltools::tags$caption(\r\n      style = 'caption-side: bottom; text-align: center;',\r\n     'Table Name: ', htmltools::em('Movie Data')\r\n  ))\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td><\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"1992\\\" data-max=\\\"2013\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"250000\\\" data-max=\\\"1.5e+08\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"382195\\\" data-max=\\\"184978932\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"1\\\" data-max=\\\"5\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"1\\\" data-max=\\\"3\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"logical\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"width: 100%; display: none;\\\">\\n      <select multiple=\\\"multiple\\\" style=\\\"width: 100%;\\\" data-options=\\\"[&quot;true&quot;,&quot;false&quot;,&quot;na&quot;]\\\"><\\/select>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"37\\\" data-max=\\\"74\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"5.8\\\" data-max=\\\"8\\\" data-scale=\\\"1\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"26746\\\" data-max=\\\"300569\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"disabled\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"caption\":\"<caption style=\\\"caption-side: bottom; text-align: center;\\\">\\n  Table Name: \\n  <em>Movie Data<\\/em>\\n<\\/caption>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],[1995,2008,1992,2006,2001,2013,1997,2009,2004,2000],[\"tt0113416\",\"tt0866439\",\"tt0104797\",\"tt0454921\",\"tt0265086\",\"tt1535108\",\"tt0124819\",\"tt0409459\",\"tt0332452\",\"tt0168629\"],[\"The Incredibly True Adventures of Two Girls in Love\",\"Made of Honor\",\"Malcolm X\",\"The Pursuit of Happyness\",\"Black Hawk Down\",\"Elysium\",\"Orgazmo\",\"Watchmen\",\"Troy\",\"Dancer in the Dark\"],[\"ok\",\"men\",\"dubious\",\"nowomen-disagree\",\"nowomen-disagree\",\"ok-disagree\",\"notalk\",\"men-disagree\",\"notalk\",\"ok\"],[\"ok\",\"men\",\"dubious\",\"nowomen\",\"nowomen\",\"ok\",\"notalk\",\"men\",\"notalk\",\"ok\"],[\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\"],[250000,40000000,35000000,55000000,95000000,120000000,1000000,138000000,150000000,12500000],[\"2210408\",\"46012734\",\"48169910\",\"162586036\",\"108638745\",\"93050117\",\"582024\",\"107509799\",\"133298577\",\"4157491\"],[\"2477155\",\"106548738\",\"48169910\",\"307325633\",\"159691085\",\"286192091\",\"627287\",\"184068357\",\"484161265\",\"45557491\"],[\"1995PASS\",\"2008FAIL\",\"1992FAIL\",\"2006FAIL\",\"2001FAIL\",\"2013PASS\",\"1997FAIL\",\"2009FAIL\",\"2004FAIL\",\"2000PASS\"],[382195,43290252,58112153,63568799,125005366,120000000,1451238,149830960,184978932,16911355],[\"3379226\",\"49797572\",\"79978777\",\"187916346\",\"142951853\",\"93050117\",\"844655\",\"116726786\",\"164382856\",\"5624704\"],[\"3787024\",\"115313044\",\"79978777\",\"355205844\",\"210128869\",\"286192091\",\"910343\",\"199848831\",\"597064223\",\"61635111\"],[4,2,5,2,3,1,4,2,3,3],[3,2,3,2,2,1,3,2,2,2],[\"0113416\",\"0866439\",\"0104797\",\"0454921\",\"0265086\",\"1535108\",\"0124819\",\"0409459\",\"0332452\",\"0168629\"],[null,\"A guy in love with an engaged woman tries to win her over after she asks him to be her maid of honor.\",\"Biographical epic of the controversial and influential Black Nationalist leader, from his early life and career as a small-time gangster, to his ministry as a member of the Nation of Islam and his assassination.\",\"A struggling salesman takes custody of his son as he's poised to begin a life-changing professional endeavor.\",\"123 elite U.S. soldiers drop into Somalia to capture two top lieutenants of a renegade warlord and find themselves in a desperate battle with a large force of heavily-armed Somalis.\",\"In the year 2154, the very wealthy live on a man-made space station while the rest of the population resides on a ruined Earth. A man takes on a mission that could bring equality to the polarized worlds.\",\"Naive young Mormon Joe Young is recruited to act in porn movies.\",\"In an alternate 1985 where former superheroes exist, the murder of a colleague sends active vigilante Rorschach into his own sprawling investigation, uncovering something that could completely change the course of history as we know it.\",\"An adaptation of Homer's great epic, the film follows the assault on Troy by the united Greek forces and chronicles the fates of the men involved.\",\"An east European girl goes to America with her young son, expecting it to be like a Hollywood film.\"],[null,\"PG-13\",\"PG-13\",\"PG-13\",\"R\",\"R\",\"NC-17\",\"R\",\"R\",\"R\"],[null,true,true,true,true,true,true,true,true,true],[null,\"English\",\"English\",\"English, Cantonese\",\"English, Somali\",\"English, Spanish, French, Afrikaans\",\"English\",\"English\",\"English\",\"English\"],[null,\"USA, UK\",\"USA, Japan\",\"USA\",\"USA, UK\",\"USA\",\"USA, Japan\",\"USA\",\"USA, Malta, UK\",\"Spain, Argentina, Denmark, Germany, Netherlands, Italy, USA, UK, France, Sweden, Finland, Iceland, Norway\"],[null,\"Adam Sztykiel (screenplay), Deborah Kaplan (screenplay), Harry Elfont (screenplay), Adam Sztykiel (story)\",\"Alex Haley (book), Malcolm X (book), Arnold Perl (screenplay), Spike Lee (screenplay)\",\"Steve Conrad\",\"Mark Bowden (book), Ken Nolan (screenplay)\",\"Neill Blomkamp\",\"Trey Parker\",\"David Hayter (screenplay), Alex Tse (screenplay), Dave Gibbons (graphic novel illustrator)\",\"Homer (poem), David Benioff (screenplay)\",\"Lars von Trier\"],[null,37,72,64,74,61,48,56,56,61],[null,5.8,7.7,7.9,7.7,6.7,6.2,7.6,7.2,8],[null,\"Paul Weiland\",\"Spike Lee\",\"Gabriele Muccino\",\"Ridley Scott\",\"Neill Blomkamp\",\"Trey Parker\",\"Zack Snyder\",\"Wolfgang Petersen\",\"Lars von Trier\"],[null,\"02 May 2008\",\"18 Nov 1992\",\"15 Dec 2006\",\"18 Jan 2002\",\"09 Aug 2013\",\"23 Oct 1998\",\"06 Mar 2009\",\"14 May 2004\",\"06 Oct 2000\"],[null,\"Patrick Dempsey, Michelle Monaghan, Kevin McKidd, Kadeem Hardison\",\"Denzel Washington, Angela Bassett, Albert Hall, Al Freeman Jr.\",\"Will Smith, Jaden Smith, Thandie Newton, Brian Howe\",\"Josh Hartnett, Ewan McGregor, Tom Sizemore, Eric Bana\",\"Matt Damon, Jodie Foster, Sharlto Copley, Alice Braga\",\"Trey Parker, Dian Bachar, Robyn Lynne Raab, Michael Dean Jacobs\",\"Malin Akerman, Billy Crudup, Matthew Goode, Jackie Earle Haley\",\"Julian Glover, Brian Cox, Nathan Jones, Adoni Maropis\",\"Björk, Catherine Deneuve, David Morse, Peter Stormare\"],[null,\"Comedy, Romance\",\"Biography, Drama, History\",\"Biography, Drama\",\"Drama, History, War\",\"Action, Drama, Sci-Fi\",\"Comedy\",\"Action, Drama, Mystery\",\"Adventure, Drama\",\"Crime, Drama, Musical\"],[null,\"1 nomination.\",\"Nominated for 2 Oscars. Another 19 wins &amp; 8 nominations.\",\"Nominated for 1 Oscar. Another 11 wins &amp; 18 nominations.\",\"Won 2 Oscars. Another 8 wins &amp; 28 nominations.\",\"5 nominations.\",\"N/A\",\"5 wins &amp; 11 nominations.\",\"Nominated for 1 Oscar. Another 3 wins &amp; 17 nominations.\",\"Nominated for 1 Oscar. Another 28 wins &amp; 34 nominations.\"],[null,\"101 min\",\"202 min\",\"117 min\",\"144 min\",\"109 min\",\"94 min\",\"162 min\",\"163 min\",\"140 min\"],[null,\"movie\",\"movie\",\"movie\",\"movie\",\"movie\",\"movie\",\"movie\",\"movie\",\"movie\"],[null,\"http://ia.media-imdb.com/images/M/MV5BMTk1MzA5MjEzMF5BMl5BanBnXkFtZTcwNTk0MjU1MQ@@._V1_SX300.jpg\",\"http://ia.media-imdb.com/images/M/MV5BMTYyNzg4MTMxM15BMl5BanBnXkFtZTcwMzE5MzIyMQ@@._V1_SX300.jpg\",\"http://ia.media-imdb.com/images/M/MV5BMTQ5NjQ0NDI3NF5BMl5BanBnXkFtZTcwNDI0MjEzMw@@._V1_SX300.jpg\",\"http://ia.media-imdb.com/images/M/MV5BMTQxODgzMjYyN15BMl5BanBnXkFtZTgwNDU4NTYxMTE@._V1_SX300.jpg\",\"http://ia.media-imdb.com/images/M/MV5BNDc2NjU0MTcwNV5BMl5BanBnXkFtZTcwMjg4MDg2OQ@@._V1_SX300.jpg\",\"http://ia.media-imdb.com/images/M/MV5BMTIyNjU5ODc3M15BMl5BanBnXkFtZTcwMDM4NzcyMQ@@._V1_SX300.jpg\",\"http://ia.media-imdb.com/images/M/MV5BMTc0NjI2OTYxMF5BMl5BanBnXkFtZTcwMTcxMjkyMg@@._V1_SX300.jpg\",\"http://ia.media-imdb.com/images/M/MV5BMTk5MzU1MDMwMF5BMl5BanBnXkFtZTcwNjczODMzMw@@._V1_SX300.jpg\",\"http://ia.media-imdb.com/images/M/MV5BMTIxNDMwNTQ3NV5BMl5BanBnXkFtZTYwMDU4MzQ5._V1_SX300.jpg\"],[null,42509,50949,245551,225412,194012,26746,300569,274525,63443],[null,null,null,null,null,null,null,null,null,null]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>year<\\/th>\\n      <th>imdb<\\/th>\\n      <th>title<\\/th>\\n      <th>test<\\/th>\\n      <th>clean_test<\\/th>\\n      <th>binary<\\/th>\\n      <th>budget<\\/th>\\n      <th>domgross<\\/th>\\n      <th>intgross<\\/th>\\n      <th>code<\\/th>\\n      <th>budget_2013<\\/th>\\n      <th>domgross_2013<\\/th>\\n      <th>intgross_2013<\\/th>\\n      <th>period_code<\\/th>\\n      <th>decade_code<\\/th>\\n      <th>imdb_id<\\/th>\\n      <th>plot<\\/th>\\n      <th>rated<\\/th>\\n      <th>response<\\/th>\\n      <th>language<\\/th>\\n      <th>country<\\/th>\\n      <th>writer<\\/th>\\n      <th>metascore<\\/th>\\n      <th>imdb_rating<\\/th>\\n      <th>director<\\/th>\\n      <th>released<\\/th>\\n      <th>actors<\\/th>\\n      <th>genre<\\/th>\\n      <th>awards<\\/th>\\n      <th>runtime<\\/th>\\n      <th>type<\\/th>\\n      <th>poster<\\/th>\\n      <th>imdb_votes<\\/th>\\n      <th>error<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"scrollX\":true,\"pageLength\":5,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,7,11,14,15,23,24,33]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true,\"lengthMenu\":[5,10,25,50,100]}},\"evals\":[],\"jsHooks\":[]}\r\nraw_bechdel %>% \r\n  filter(imdb_id %in% c(movie_sample %>% pull(imdb_id))) %>% \r\n  DT::datatable(filter = 'top', list(scrollX = TRUE,\r\n                     pageLength = 5),\r\n    caption = htmltools::tags$caption(\r\n      style = 'caption-side: bottom; text-align: center;',\r\n     'Table Name: ', htmltools::em('Bechdel Data')\r\n  ))\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td><\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"1992\\\" data-max=\\\"2013\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"198\\\" data-max=\\\"5007\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"0\\\" data-max=\\\"3\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"caption\":\"<caption style=\\\"caption-side: bottom; text-align: center;\\\">\\n  Table Name: \\n  <em>Bechdel Data<\\/em>\\n<\\/caption>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],[1992,1995,1997,2000,2001,2004,2006,2008,2009,2013],[4391,2931,3917,1843,698,956,198,5007,358,4460],[\"0104797\",\"0113416\",\"0124819\",\"0168629\",\"0265086\",\"0332452\",\"0454921\",\"0866439\",\"0409459\",\"1535108\"],[\"Malcolm X\",\"The Incredibly True Adventures of Two Girls in Love\",\"Orgazmo\",\"Dancer in the Dark\",\"Black Hawk Down\",\"Troy\",\"The Pursuit of Happyness\",\"Made of Honor\",\"Watchmen\",\"Elysium\"],[3,3,1,3,0,1,0,2,3,3]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>year<\\/th>\\n      <th>id<\\/th>\\n      <th>imdb_id<\\/th>\\n      <th>title<\\/th>\\n      <th>rating<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"scrollX\":true,\"pageLength\":5,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,2,5]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true,\"lengthMenu\":[5,10,25,50,100]}},\"evals\":[],\"jsHooks\":[]}\r\n\r\n\r\nmovies %>% \r\n  count(clean_test, binary, sort=TRUE) %>% \r\n  gt::gt()\r\n\r\n\r\n\r\nhtml {\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\r\n}\r\n\r\n#cbidaqcxmu .gt_table {\r\n  display: table;\r\n  border-collapse: collapse;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  color: #333333;\r\n  font-size: 16px;\r\n  font-weight: normal;\r\n  font-style: normal;\r\n  background-color: #FFFFFF;\r\n  width: auto;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #A8A8A8;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #A8A8A8;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n}\r\n\r\n#cbidaqcxmu .gt_heading {\r\n  background-color: #FFFFFF;\r\n  text-align: center;\r\n  border-bottom-color: #FFFFFF;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#cbidaqcxmu .gt_title {\r\n  color: #333333;\r\n  font-size: 125%;\r\n  font-weight: initial;\r\n  padding-top: 4px;\r\n  padding-bottom: 4px;\r\n  border-bottom-color: #FFFFFF;\r\n  border-bottom-width: 0;\r\n}\r\n\r\n#cbidaqcxmu .gt_subtitle {\r\n  color: #333333;\r\n  font-size: 85%;\r\n  font-weight: initial;\r\n  padding-top: 0;\r\n  padding-bottom: 6px;\r\n  border-top-color: #FFFFFF;\r\n  border-top-width: 0;\r\n}\r\n\r\n#cbidaqcxmu .gt_bottom_border {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#cbidaqcxmu .gt_col_headings {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#cbidaqcxmu .gt_col_heading {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: normal;\r\n  text-transform: inherit;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 6px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#cbidaqcxmu .gt_column_spanner_outer {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: normal;\r\n  text-transform: inherit;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  padding-left: 4px;\r\n  padding-right: 4px;\r\n}\r\n\r\n#cbidaqcxmu .gt_column_spanner_outer:first-child {\r\n  padding-left: 0;\r\n}\r\n\r\n#cbidaqcxmu .gt_column_spanner_outer:last-child {\r\n  padding-right: 0;\r\n}\r\n\r\n#cbidaqcxmu .gt_column_spanner {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 5px;\r\n  overflow-x: hidden;\r\n  display: inline-block;\r\n  width: 100%;\r\n}\r\n\r\n#cbidaqcxmu .gt_group_heading {\r\n  padding: 8px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  text-transform: inherit;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#cbidaqcxmu .gt_empty_group_heading {\r\n  padding: 0.5px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#cbidaqcxmu .gt_from_md > :first-child {\r\n  margin-top: 0;\r\n}\r\n\r\n#cbidaqcxmu .gt_from_md > :last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n#cbidaqcxmu .gt_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  margin: 10px;\r\n  border-top-style: solid;\r\n  border-top-width: 1px;\r\n  border-top-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#cbidaqcxmu .gt_stub {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  text-transform: inherit;\r\n  border-right-style: solid;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  padding-left: 12px;\r\n}\r\n\r\n#cbidaqcxmu .gt_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#cbidaqcxmu .gt_first_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#cbidaqcxmu .gt_grand_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#cbidaqcxmu .gt_first_grand_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: double;\r\n  border-top-width: 6px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#cbidaqcxmu .gt_striped {\r\n  background-color: rgba(128, 128, 128, 0.05);\r\n}\r\n\r\n#cbidaqcxmu .gt_table_body {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#cbidaqcxmu .gt_footnotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#cbidaqcxmu .gt_footnote {\r\n  margin: 0px;\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#cbidaqcxmu .gt_sourcenotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#cbidaqcxmu .gt_sourcenote {\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#cbidaqcxmu .gt_left {\r\n  text-align: left;\r\n}\r\n\r\n#cbidaqcxmu .gt_center {\r\n  text-align: center;\r\n}\r\n\r\n#cbidaqcxmu .gt_right {\r\n  text-align: right;\r\n  font-variant-numeric: tabular-nums;\r\n}\r\n\r\n#cbidaqcxmu .gt_font_normal {\r\n  font-weight: normal;\r\n}\r\n\r\n#cbidaqcxmu .gt_font_bold {\r\n  font-weight: bold;\r\n}\r\n\r\n#cbidaqcxmu .gt_font_italic {\r\n  font-style: italic;\r\n}\r\n\r\n#cbidaqcxmu .gt_super {\r\n  font-size: 65%;\r\n}\r\n\r\n#cbidaqcxmu .gt_footnote_marks {\r\n  font-style: italic;\r\n  font-weight: normal;\r\n  font-size: 65%;\r\n}\r\nclean_test\r\n      binary\r\n      n\r\n    ok\r\nPASS\r\n803notalk\r\nFAIL\r\n514men\r\nFAIL\r\n194dubious\r\nFAIL\r\n142nowomen\r\nFAIL\r\n141\r\n\r\nmovies %>% \r\n  count(genre, binary, clean_test) %>% \r\n  DT::datatable(filter = 'top', list(scrollX = TRUE,\r\n                     pageLength = 5),\r\n    caption = htmltools::tags$caption(\r\n      style = 'caption-side: bottom; text-align: center;',\r\n     'Table Name: ', htmltools::em('Test criteria for pass/fail')\r\n  ))\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td><\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"integer\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"1\\\" data-max=\\\"103\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"caption\":\"<caption style=\\\"caption-side: bottom; text-align: center;\\\">\\n  Table Name: \\n  <em>Test criteria for pass/fail<\\/em>\\n<\\/caption>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\",\"51\",\"52\",\"53\",\"54\",\"55\",\"56\",\"57\",\"58\",\"59\",\"60\",\"61\",\"62\",\"63\",\"64\",\"65\",\"66\",\"67\",\"68\",\"69\",\"70\",\"71\",\"72\",\"73\",\"74\",\"75\",\"76\",\"77\",\"78\",\"79\",\"80\",\"81\",\"82\",\"83\",\"84\",\"85\",\"86\",\"87\",\"88\",\"89\",\"90\",\"91\",\"92\",\"93\",\"94\",\"95\",\"96\",\"97\",\"98\",\"99\",\"100\",\"101\",\"102\",\"103\",\"104\",\"105\",\"106\",\"107\",\"108\",\"109\",\"110\",\"111\",\"112\",\"113\",\"114\",\"115\",\"116\",\"117\",\"118\",\"119\",\"120\",\"121\",\"122\",\"123\",\"124\",\"125\",\"126\",\"127\",\"128\",\"129\",\"130\",\"131\",\"132\",\"133\",\"134\",\"135\",\"136\",\"137\",\"138\",\"139\",\"140\",\"141\",\"142\",\"143\",\"144\",\"145\",\"146\",\"147\",\"148\",\"149\",\"150\",\"151\",\"152\",\"153\",\"154\",\"155\",\"156\",\"157\",\"158\",\"159\",\"160\",\"161\",\"162\",\"163\",\"164\",\"165\",\"166\",\"167\",\"168\",\"169\",\"170\",\"171\",\"172\",\"173\",\"174\",\"175\",\"176\",\"177\",\"178\",\"179\",\"180\",\"181\",\"182\",\"183\",\"184\",\"185\",\"186\",\"187\",\"188\",\"189\",\"190\",\"191\",\"192\",\"193\",\"194\",\"195\",\"196\",\"197\",\"198\",\"199\",\"200\",\"201\",\"202\",\"203\",\"204\",\"205\",\"206\",\"207\",\"208\",\"209\",\"210\",\"211\",\"212\",\"213\",\"214\",\"215\",\"216\",\"217\",\"218\",\"219\",\"220\",\"221\",\"222\",\"223\",\"224\",\"225\",\"226\",\"227\",\"228\",\"229\",\"230\",\"231\",\"232\",\"233\",\"234\",\"235\",\"236\",\"237\",\"238\",\"239\",\"240\",\"241\",\"242\",\"243\",\"244\",\"245\",\"246\",\"247\",\"248\",\"249\",\"250\",\"251\",\"252\",\"253\",\"254\",\"255\",\"256\",\"257\",\"258\",\"259\",\"260\",\"261\",\"262\",\"263\",\"264\",\"265\",\"266\",\"267\",\"268\",\"269\",\"270\",\"271\",\"272\",\"273\",\"274\",\"275\",\"276\",\"277\",\"278\",\"279\",\"280\",\"281\",\"282\",\"283\",\"284\",\"285\",\"286\",\"287\",\"288\",\"289\",\"290\",\"291\",\"292\",\"293\",\"294\",\"295\",\"296\",\"297\",\"298\",\"299\",\"300\",\"301\",\"302\",\"303\",\"304\",\"305\",\"306\",\"307\",\"308\",\"309\",\"310\",\"311\",\"312\",\"313\",\"314\",\"315\",\"316\",\"317\",\"318\",\"319\",\"320\",\"321\",\"322\",\"323\",\"324\",\"325\",\"326\",\"327\",\"328\",\"329\",\"330\",\"331\",\"332\",\"333\",\"334\",\"335\",\"336\",\"337\",\"338\",\"339\",\"340\",\"341\",\"342\",\"343\",\"344\",\"345\",\"346\",\"347\",\"348\",\"349\",\"350\",\"351\",\"352\",\"353\",\"354\",\"355\",\"356\",\"357\",\"358\",\"359\",\"360\",\"361\",\"362\",\"363\",\"364\",\"365\",\"366\",\"367\",\"368\",\"369\",\"370\",\"371\",\"372\",\"373\",\"374\",\"375\",\"376\",\"377\",\"378\",\"379\",\"380\",\"381\",\"382\",\"383\",\"384\",\"385\",\"386\",\"387\",\"388\",\"389\",\"390\",\"391\",\"392\",\"393\",\"394\",\"395\",\"396\",\"397\",\"398\",\"399\",\"400\",\"401\",\"402\",\"403\",\"404\",\"405\",\"406\",\"407\",\"408\",\"409\",\"410\",\"411\",\"412\",\"413\",\"414\",\"415\",\"416\",\"417\",\"418\",\"419\",\"420\",\"421\",\"422\",\"423\",\"424\",\"425\",\"426\",\"427\",\"428\",\"429\",\"430\",\"431\",\"432\",\"433\",\"434\",\"435\",\"436\",\"437\",\"438\",\"439\",\"440\",\"441\",\"442\",\"443\",\"444\",\"445\",\"446\",\"447\",\"448\",\"449\",\"450\",\"451\",\"452\",\"453\",\"454\",\"455\",\"456\",\"457\",\"458\",\"459\",\"460\",\"461\",\"462\",\"463\",\"464\",\"465\",\"466\",\"467\",\"468\",\"469\",\"470\",\"471\",\"472\",\"473\",\"474\",\"475\",\"476\",\"477\",\"478\",\"479\",\"480\",\"481\",\"482\",\"483\",\"484\",\"485\",\"486\",\"487\",\"488\",\"489\",\"490\",\"491\",\"492\",\"493\",\"494\",\"495\",\"496\",\"497\",\"498\",\"499\",\"500\",\"501\",\"502\",\"503\",\"504\",\"505\",\"506\",\"507\",\"508\",\"509\",\"510\",\"511\",\"512\",\"513\",\"514\",\"515\",\"516\",\"517\",\"518\",\"519\",\"520\",\"521\",\"522\",\"523\",\"524\",\"525\",\"526\",\"527\",\"528\",\"529\",\"530\",\"531\",\"532\",\"533\",\"534\",\"535\",\"536\",\"537\",\"538\",\"539\",\"540\",\"541\",\"542\",\"543\",\"544\",\"545\",\"546\",\"547\",\"548\",\"549\",\"550\",\"551\",\"552\",\"553\",\"554\",\"555\",\"556\",\"557\",\"558\",\"559\",\"560\",\"561\",\"562\",\"563\",\"564\",\"565\",\"566\",\"567\",\"568\",\"569\",\"570\",\"571\"],[\"Action\",\"Action, Adventure\",\"Action, Adventure\",\"Action, Adventure\",\"Action, Adventure, Comedy\",\"Action, Adventure, Comedy\",\"Action, Adventure, Comedy\",\"Action, Adventure, Crime\",\"Action, Adventure, Crime\",\"Action, Adventure, Crime\",\"Action, Adventure, Crime\",\"Action, Adventure, Drama\",\"Action, Adventure, Drama\",\"Action, Adventure, Drama\",\"Action, Adventure, Drama\",\"Action, Adventure, Drama\",\"Action, Adventure, Family\",\"Action, Adventure, Family\",\"Action, Adventure, Fantasy\",\"Action, Adventure, Fantasy\",\"Action, Adventure, Fantasy\",\"Action, Adventure, Fantasy\",\"Action, Adventure, Fantasy\",\"Action, Adventure, Horror\",\"Action, Adventure, Horror\",\"Action, Adventure, Mystery\",\"Action, Adventure, Mystery\",\"Action, Adventure, Mystery\",\"Action, Adventure, Mystery\",\"Action, Adventure, Romance\",\"Action, Adventure, Sci-Fi\",\"Action, Adventure, Sci-Fi\",\"Action, Adventure, Sci-Fi\",\"Action, Adventure, Sci-Fi\",\"Action, Adventure, Sci-Fi\",\"Action, Adventure, Thriller\",\"Action, Adventure, Thriller\",\"Action, Adventure, Thriller\",\"Action, Adventure, Thriller\",\"Action, Adventure, Western\",\"Action, Biography, Crime\",\"Action, Biography, Drama\",\"Action, Biography, Drama\",\"Action, Biography, Drama\",\"Action, Comedy\",\"Action, Comedy\",\"Action, Comedy\",\"Action, Comedy, Crime\",\"Action, Comedy, Crime\",\"Action, Comedy, Crime\",\"Action, Comedy, Crime\",\"Action, Comedy, Drama\",\"Action, Comedy, Drama\",\"Action, Comedy, Family\",\"Action, Comedy, Fantasy\",\"Action, Comedy, Fantasy\",\"Action, Comedy, Horror\",\"Action, Comedy, Musical\",\"Action, Comedy, Romance\",\"Action, Comedy, Romance\",\"Action, Comedy, Sci-Fi\",\"Action, Comedy, Sci-Fi\",\"Action, Comedy, Sci-Fi\",\"Action, Comedy, Sport\",\"Action, Comedy, Thriller\",\"Action, Comedy, Thriller\",\"Action, Crime\",\"Action, Crime, Drama\",\"Action, Crime, Drama\",\"Action, Crime, Drama\",\"Action, Crime, Drama\",\"Action, Crime, Drama\",\"Action, Crime, Fantasy\",\"Action, Crime, Horror\",\"Action, Crime, Mystery\",\"Action, Crime, Mystery\",\"Action, Crime, Mystery\",\"Action, Crime, Sci-Fi\",\"Action, Crime, Sci-Fi\",\"Action, Crime, Thriller\",\"Action, Crime, Thriller\",\"Action, Crime, Thriller\",\"Action, Crime, Thriller\",\"Action, Drama\",\"Action, Drama, Comedy\",\"Action, Drama, Crime\",\"Action, Drama, Family\",\"Action, Drama, Family\",\"Action, Drama, Fantasy\",\"Action, Drama, History\",\"Action, Drama, History\",\"Action, Drama, History\",\"Action, Drama, Horror\",\"Action, Drama, Mystery\",\"Action, Drama, Mystery\",\"Action, Drama, Mystery\",\"Action, Drama, Romance\",\"Action, Drama, Sci-Fi\",\"Action, Drama, Sci-Fi\",\"Action, Drama, Sci-Fi\",\"Action, Drama, Thriller\",\"Action, Drama, Thriller\",\"Action, Drama, War\",\"Action, Drama, War\",\"Action, Family, Sport\",\"Action, Fantasy\",\"Action, Fantasy\",\"Action, Fantasy\",\"Action, Fantasy, Adventure\",\"Action, Fantasy, Adventure\",\"Action, Fantasy, History\",\"Action, Fantasy, Horror\",\"Action, Fantasy, Horror\",\"Action, Fantasy, Horror\",\"Action, Fantasy, Sci-Fi\",\"Action, Fantasy, Thriller\",\"Action, Fantasy, Thriller\",\"Action, Horror, Mystery\",\"Action, Horror, Sci-Fi\",\"Action, Horror, Sci-Fi\",\"Action, Horror, Sci-Fi\",\"Action, Horror, Sci-Fi\",\"Action, Horror, Thriller\",\"Action, Horror, Thriller\",\"Action, Mystery, Sci-Fi\",\"Action, Mystery, Thriller\",\"Action, Mystery, Thriller\",\"Action, Romance, Sci-Fi\",\"Action, Romance, Thriller\",\"Action, Sci-Fi\",\"Action, Sci-Fi\",\"Action, Sci-Fi\",\"Action, Sci-Fi\",\"Action, Sci-Fi\",\"Action, Sci-Fi, Thriller\",\"Action, Sci-Fi, Thriller\",\"Action, Sci-Fi, Thriller\",\"Action, Sci-Fi, Thriller\",\"Action, Sci-Fi, Thriller\",\"Action, Thriller\",\"Action, Thriller\",\"Action, Thriller\",\"Action, Thriller\",\"Action, Thriller, Crime\",\"Action, Thriller, War\",\"Action, Thriller, War\",\"Action, Thriller, Western\",\"Action, Western\",\"Action, Western, Comedy\",\"Adventure, Animation, Family\",\"Adventure, Biography, Drama\",\"Adventure, Biography, Drama\",\"Adventure, Biography, Drama\",\"Adventure, Comedy\",\"Adventure, Comedy\",\"Adventure, Comedy, Crime\",\"Adventure, Comedy, Crime\",\"Adventure, Comedy, Drama\",\"Adventure, Comedy, Drama\",\"Adventure, Comedy, Drama\",\"Adventure, Comedy, Drama\",\"Adventure, Comedy, Family\",\"Adventure, Comedy, Family\",\"Adventure, Comedy, Family\",\"Adventure, Comedy, Family\",\"Adventure, Comedy, Fantasy\",\"Adventure, Comedy, Fantasy\",\"Adventure, Comedy, Fantasy\",\"Adventure, Comedy, Sci-Fi\",\"Adventure, Comedy, Sci-Fi\",\"Adventure, Comedy, Sci-Fi\",\"Adventure, Crime, Drama\",\"Adventure, Drama\",\"Adventure, Drama\",\"Adventure, Drama, Family\",\"Adventure, Drama, Family\",\"Adventure, Drama, Family\",\"Adventure, Drama, Fantasy\",\"Adventure, Drama, Fantasy\",\"Adventure, Drama, Fantasy\",\"Adventure, Drama, Fantasy\",\"Adventure, Drama, History\",\"Adventure, Drama, History\",\"Adventure, Drama, History\",\"Adventure, Drama, Mystery\",\"Adventure, Drama, Romance\",\"Adventure, Drama, Sci-Fi\",\"Adventure, Drama, Sci-Fi\",\"Adventure, Drama, Thriller\",\"Adventure, Drama, War\",\"Adventure, Drama, Western\",\"Adventure, Drama, Western\",\"Adventure, Family, Fantasy\",\"Adventure, Family, Fantasy\",\"Adventure, Fantasy\",\"Adventure, Fantasy\",\"Adventure, Fantasy, Animation\",\"Adventure, Fantasy, Mystery\",\"Adventure, Fantasy, Sci-Fi\",\"Adventure, Horror\",\"Adventure, Horror, Thriller\",\"Adventure, Mystery, Sci-Fi\",\"Adventure, Mystery, Thriller\",\"Adventure, Romance, Sci-Fi\",\"Adventure, Sci-Fi\",\"Adventure, Sci-Fi, Thriller\",\"Adventure, Sci-Fi, Thriller\",\"Adventure, Thriller, Western\",\"Animation, Action, Adventure\",\"Animation, Action, Adventure\",\"Animation, Action, Adventure\",\"Animation, Action, Adventure\",\"Animation, Action, Adventure\",\"Animation, Action, Comedy\",\"Animation, Action, Family\",\"Animation, Adventure, Comedy\",\"Animation, Adventure, Comedy\",\"Animation, Adventure, Comedy\",\"Animation, Adventure, Comedy\",\"Animation, Adventure, Comedy\",\"Animation, Adventure, Drama\",\"Animation, Adventure, Drama\",\"Animation, Adventure, Drama\",\"Animation, Adventure, Family\",\"Animation, Adventure, Family\",\"Animation, Adventure, Family\",\"Animation, Adventure, Family\",\"Animation, Adventure, Fantasy\",\"Animation, Biography, Drama\",\"Animation, Comedy, Crime\",\"Animation, Comedy, Crime\",\"Animation, Comedy, Drama\",\"Animation, Comedy, Family\",\"Animation, Comedy, Family\",\"Animation, Comedy, Family\",\"Animation, Comedy, Family\",\"Animation, Comedy, Fantasy\",\"Animation, Drama, Family\",\"Animation, Drama, Fantasy\",\"Animation, Drama, Sci-Fi\",\"Animation, Family, Comedy\",\"Animation, Family, Fantasy\",\"Animation, Fantasy, Musical\",\"Animation, Fantasy, Thriller\",\"Biography, Comedy, Crime\",\"Biography, Comedy, Drama\",\"Biography, Comedy, Drama\",\"Biography, Crime, Drama\",\"Biography, Crime, Drama\",\"Biography, Crime, Drama\",\"Biography, Crime, Drama\",\"Biography, Crime, History\",\"Biography, Drama\",\"Biography, Drama\",\"Biography, Drama\",\"Biography, Drama\",\"Biography, Drama, Family\",\"Biography, Drama, History\",\"Biography, Drama, History\",\"Biography, Drama, History\",\"Biography, Drama, History\",\"Biography, Drama, Music\",\"Biography, Drama, Music\",\"Biography, Drama, Music\",\"Biography, Drama, Romance\",\"Biography, Drama, Romance\",\"Biography, Drama, Romance\",\"Biography, Drama, Sport\",\"Biography, Drama, Sport\",\"Biography, Drama, Sport\",\"Biography, Drama, Thriller\",\"Biography, Drama, Thriller\",\"Biography, Drama, Thriller\",\"Biography, Drama, War\",\"Comedy\",\"Comedy\",\"Comedy\",\"Comedy\",\"Comedy, Action\",\"Comedy, Action, Sci-Fi\",\"Comedy, Crime\",\"Comedy, Crime\",\"Comedy, Crime\",\"Comedy, Crime\",\"Comedy, Crime\",\"Comedy, Crime, Drama\",\"Comedy, Crime, Drama\",\"Comedy, Crime, Drama\",\"Comedy, Crime, Fantasy\",\"Comedy, Crime, Horror\",\"Comedy, Crime, Music\",\"Comedy, Crime, Musical\",\"Comedy, Crime, Mystery\",\"Comedy, Crime, Romance\",\"Comedy, Crime, Romance\",\"Comedy, Crime, Sci-Fi\",\"Comedy, Crime, Thriller\",\"Comedy, Crime, Thriller\",\"Comedy, Crime, Thriller\",\"Comedy, Drama\",\"Comedy, Drama\",\"Comedy, Drama\",\"Comedy, Drama\",\"Comedy, Drama, Family\",\"Comedy, Drama, Family\",\"Comedy, Drama, Fantasy\",\"Comedy, Drama, Fantasy\",\"Comedy, Drama, Fantasy\",\"Comedy, Drama, History\",\"Comedy, Drama, Horror\",\"Comedy, Drama, Music\",\"Comedy, Drama, Music\",\"Comedy, Drama, Musical\",\"Comedy, Drama, Mystery\",\"Comedy, Drama, Romance\",\"Comedy, Drama, Romance\",\"Comedy, Drama, Romance\",\"Comedy, Drama, Romance\",\"Comedy, Drama, Romance\",\"Comedy, Drama, Sci-Fi\",\"Comedy, Drama, Sci-Fi\",\"Comedy, Drama, Sport\",\"Comedy, Drama, Thriller\",\"Comedy, Drama, War\",\"Comedy, Drama, War\",\"Comedy, Family\",\"Comedy, Family\",\"Comedy, Family\",\"Comedy, Family, Fantasy\",\"Comedy, Family, Fantasy\",\"Comedy, Family, Musical\",\"Comedy, Family, Romance\",\"Comedy, Family, Sci-Fi\",\"Comedy, Family, Sport\",\"Comedy, Fantasy\",\"Comedy, Fantasy\",\"Comedy, Fantasy\",\"Comedy, Fantasy, Horror\",\"Comedy, Fantasy, Romance\",\"Comedy, Fantasy, Romance\",\"Comedy, Fantasy, Romance\",\"Comedy, Fantasy, Sci-Fi\",\"Comedy, Horror\",\"Comedy, Horror\",\"Comedy, Horror\",\"Comedy, Horror\",\"Comedy, Horror, Musical\",\"Comedy, Horror, Mystery\",\"Comedy, Horror, Romance\",\"Comedy, Horror, Sci-Fi\",\"Comedy, Horror, Thriller\",\"Comedy, Horror, Thriller\",\"Comedy, Horror, Thriller\",\"Comedy, Music\",\"Comedy, Music, Romance\",\"Comedy, Music, Romance\",\"Comedy, Musical\",\"Comedy, Musical\",\"Comedy, Musical\",\"Comedy, Musical, Romance\",\"Comedy, Romance\",\"Comedy, Romance\",\"Comedy, Romance\",\"Comedy, Romance\",\"Comedy, Romance, Sport\",\"Comedy, Sci-Fi\",\"Comedy, Sci-Fi\",\"Comedy, Sci-Fi\",\"Comedy, Sci-Fi, Thriller\",\"Comedy, Sport\",\"Comedy, Sport\",\"Comedy, Thriller\",\"Comedy, Thriller, Crime\",\"Comedy, War\",\"Comedy, War\",\"Comedy, Western\",\"Crime, Comedy\",\"Crime, Drama\",\"Crime, Drama\",\"Crime, Drama\",\"Crime, Drama\",\"Crime, Drama\",\"Crime, Drama, Fantasy\",\"Crime, Drama, Fantasy\",\"Crime, Drama, Fantasy\",\"Crime, Drama, History\",\"Crime, Drama, History\",\"Crime, Drama, Horror\",\"Crime, Drama, Music\",\"Crime, Drama, Music\",\"Crime, Drama, Musical\",\"Crime, Drama, Mystery\",\"Crime, Drama, Mystery\",\"Crime, Drama, Mystery\",\"Crime, Drama, Mystery\",\"Crime, Drama, Mystery\",\"Crime, Drama, Romance\",\"Crime, Drama, Romance\",\"Crime, Drama, Thriller\",\"Crime, Drama, Thriller\",\"Crime, Drama, Thriller\",\"Crime, Drama, Thriller\",\"Crime, Drama, Thriller\",\"Crime, Drama, Western\",\"Crime, Horror, Mystery\",\"Crime, Horror, Thriller\",\"Crime, Mystery, Thriller\",\"Crime, Mystery, Thriller\",\"Crime, Mystery, Thriller\",\"Crime, Mystery, Thriller\",\"Crime, Thriller\",\"Crime, Thriller\",\"Crime, Thriller\",\"Documentary\",\"Documentary\",\"Documentary, Action, Comedy\",\"Documentary, Animation, Biography\",\"Drama\",\"Drama\",\"Drama\",\"Drama\",\"Drama\",\"Drama, Comedy\",\"Drama, Comedy, Romance\",\"Drama, Family\",\"Drama, Family\",\"Drama, Family, History\",\"Drama, Family, History\",\"Drama, Fantasy\",\"Drama, Fantasy\",\"Drama, Fantasy\",\"Drama, Fantasy\",\"Drama, Fantasy, Horror\",\"Drama, Fantasy, Musical\",\"Drama, Fantasy, Mystery\",\"Drama, Fantasy, Mystery\",\"Drama, Fantasy, Romance\",\"Drama, Fantasy, Romance\",\"Drama, Fantasy, Romance\",\"Drama, Fantasy, Romance\",\"Drama, Fantasy, Sci-Fi\",\"Drama, History\",\"Drama, History\",\"Drama, History\",\"Drama, History, Mystery\",\"Drama, History, Thriller\",\"Drama, History, Thriller\",\"Drama, History, Thriller\",\"Drama, History, War\",\"Drama, History, War\",\"Drama, Horror\",\"Drama, Horror, Mystery\",\"Drama, Horror, Mystery\",\"Drama, Horror, Mystery\",\"Drama, Horror, Sci-Fi\",\"Drama, Horror, Sci-Fi\",\"Drama, Horror, Thriller\",\"Drama, Horror, Thriller\",\"Drama, Horror, Thriller\",\"Drama, Music\",\"Drama, Music\",\"Drama, Music\",\"Drama, Music, Musical\",\"Drama, Music, Romance\",\"Drama, Music, Romance\",\"Drama, Musical, Romance\",\"Drama, Musical, Romance\",\"Drama, Mystery\",\"Drama, Mystery\",\"Drama, Mystery, Romance\",\"Drama, Mystery, Romance\",\"Drama, Mystery, Romance\",\"Drama, Mystery, Romance\",\"Drama, Mystery, Sci-Fi\",\"Drama, Mystery, Sci-Fi\",\"Drama, Mystery, Sci-Fi\",\"Drama, Mystery, Sci-Fi\",\"Drama, Mystery, Sci-Fi\",\"Drama, Mystery, Thriller\",\"Drama, Mystery, Thriller\",\"Drama, Mystery, Thriller\",\"Drama, Mystery, Thriller\",\"Drama, Romance\",\"Drama, Romance\",\"Drama, Romance\",\"Drama, Romance\",\"Drama, Romance\",\"Drama, Romance, Family\",\"Drama, Romance, Music\",\"Drama, Romance, Sci-Fi\",\"Drama, Romance, Sci-Fi\",\"Drama, Romance, Sci-Fi\",\"Drama, Romance, Sci-Fi\",\"Drama, Romance, Sport\",\"Drama, Romance, Sport\",\"Drama, Romance, Thriller\",\"Drama, Romance, War\",\"Drama, Romance, War\",\"Drama, Romance, War\",\"Drama, Sci-Fi\",\"Drama, Sci-Fi\",\"Drama, Sci-Fi, Thriller\",\"Drama, Sci-Fi, Thriller\",\"Drama, Sci-Fi, Thriller\",\"Drama, Sport\",\"Drama, Sport\",\"Drama, Sport, Thriller\",\"Drama, Thriller\",\"Drama, Thriller\",\"Drama, Thriller\",\"Drama, Thriller, Sci-Fi\",\"Drama, Thriller, War\",\"Drama, Thriller, War\",\"Drama, Thriller, War\",\"Drama, War\",\"Drama, War\",\"Drama, War\",\"Family, Comedy, Drama\",\"Fantasy, Adventure, Romance\",\"Fantasy, Horror\",\"Fantasy, Horror\",\"Fantasy, Horror, Music\",\"Fantasy, Horror, Mystery\",\"Fantasy, Mystery, Romance\",\"Fantasy, Mystery, Thriller\",\"Fantasy, Romance, Thriller\",\"Horror\",\"Horror\",\"Horror\",\"Horror\",\"Horror\",\"Horror, Mystery\",\"Horror, Mystery\",\"Horror, Mystery, Sci-Fi\",\"Horror, Mystery, Sci-Fi\",\"Horror, Mystery, Thriller\",\"Horror, Mystery, Thriller\",\"Horror, Mystery, Thriller\",\"Horror, Mystery, Thriller\",\"Horror, Sci-Fi\",\"Horror, Sci-Fi\",\"Horror, Sci-Fi, Thriller\",\"Horror, Sci-Fi, Thriller\",\"Horror, Sci-Fi, Thriller\",\"Horror, Sci-Fi, Thriller\",\"Horror, Thriller\",\"Horror, Thriller\",\"Horror, Thriller\",\"Horror, Thriller\",\"Horror, Thriller\",\"Musical, Romance\",\"Musical, Romance, Fantasy\",\"Mystery, Sci-Fi\",\"Mystery, Sci-Fi, Thriller\",\"Mystery, Sci-Fi, Thriller\",\"Mystery, Thriller\",\"Mystery, Thriller\",\"Romance, Drama\",\"Sci-Fi, Action, Thriller\",\"Sci-Fi, Thriller\",\"Sci-Fi, Thriller\",\"Sci-Fi, Thriller, Action\",\"Thriller\",\"Thriller\",\"Thriller\",\"Western\",null,null,null,null,null],[\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"PASS\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"PASS\",\"PASS\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\"],[\"notalk\",\"notalk\",\"nowomen\",\"ok\",\"notalk\",\"nowomen\",\"ok\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"notalk\",\"ok\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"dubious\",\"notalk\",\"dubious\",\"men\",\"nowomen\",\"ok\",\"men\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"dubious\",\"notalk\",\"nowomen\",\"ok\",\"notalk\",\"ok\",\"men\",\"notalk\",\"ok\",\"notalk\",\"nowomen\",\"ok\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"men\",\"notalk\",\"ok\",\"nowomen\",\"ok\",\"ok\",\"notalk\",\"men\",\"ok\",\"notalk\",\"nowomen\",\"ok\",\"nowomen\",\"nowomen\",\"ok\",\"ok\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"nowomen\",\"notalk\",\"men\",\"notalk\",\"ok\",\"notalk\",\"ok\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"ok\",\"ok\",\"ok\",\"dubious\",\"ok\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"notalk\",\"men\",\"notalk\",\"ok\",\"men\",\"men\",\"notalk\",\"ok\",\"men\",\"nowomen\",\"dubious\",\"nowomen\",\"ok\",\"notalk\",\"nowomen\",\"ok\",\"dubious\",\"notalk\",\"nowomen\",\"dubious\",\"notalk\",\"ok\",\"notalk\",\"dubious\",\"ok\",\"notalk\",\"dubious\",\"notalk\",\"nowomen\",\"ok\",\"dubious\",\"ok\",\"notalk\",\"men\",\"notalk\",\"notalk\",\"nowomen\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"dubious\",\"notalk\",\"nowomen\",\"ok\",\"notalk\",\"notalk\",\"nowomen\",\"notalk\",\"notalk\",\"men\",\"nowomen\",\"dubious\",\"notalk\",\"ok\",\"dubious\",\"ok\",\"dubious\",\"notalk\",\"dubious\",\"men\",\"notalk\",\"ok\",\"dubious\",\"men\",\"notalk\",\"ok\",\"dubious\",\"men\",\"notalk\",\"dubious\",\"notalk\",\"ok\",\"nowomen\",\"notalk\",\"ok\",\"dubious\",\"notalk\",\"ok\",\"dubious\",\"notalk\",\"nowomen\",\"ok\",\"men\",\"notalk\",\"ok\",\"nowomen\",\"notalk\",\"notalk\",\"ok\",\"notalk\",\"dubious\",\"notalk\",\"ok\",\"notalk\",\"ok\",\"notalk\",\"nowomen\",\"men\",\"notalk\",\"dubious\",\"ok\",\"notalk\",\"notalk\",\"dubious\",\"dubious\",\"ok\",\"notalk\",\"ok\",\"ok\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"nowomen\",\"dubious\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"men\",\"notalk\",\"ok\",\"dubious\",\"notalk\",\"nowomen\",\"ok\",\"notalk\",\"ok\",\"notalk\",\"ok\",\"notalk\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"dubious\",\"notalk\",\"nowomen\",\"notalk\",\"ok\",\"ok\",\"dubious\",\"ok\",\"notalk\",\"notalk\",\"ok\",\"dubious\",\"men\",\"notalk\",\"ok\",\"nowomen\",\"dubious\",\"notalk\",\"nowomen\",\"ok\",\"ok\",\"dubious\",\"men\",\"notalk\",\"ok\",\"dubious\",\"notalk\",\"ok\",\"men\",\"notalk\",\"ok\",\"men\",\"notalk\",\"ok\",\"dubious\",\"notalk\",\"ok\",\"nowomen\",\"dubious\",\"men\",\"notalk\",\"ok\",\"notalk\",\"men\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"men\",\"notalk\",\"ok\",\"notalk\",\"ok\",\"ok\",\"ok\",\"notalk\",\"men\",\"ok\",\"men\",\"men\",\"notalk\",\"ok\",\"dubious\",\"men\",\"notalk\",\"ok\",\"notalk\",\"ok\",\"men\",\"notalk\",\"ok\",\"men\",\"men\",\"men\",\"ok\",\"ok\",\"ok\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"notalk\",\"ok\",\"ok\",\"notalk\",\"notalk\",\"ok\",\"men\",\"notalk\",\"ok\",\"notalk\",\"ok\",\"notalk\",\"ok\",\"men\",\"nowomen\",\"men\",\"notalk\",\"ok\",\"men\",\"men\",\"notalk\",\"ok\",\"notalk\",\"dubious\",\"men\",\"notalk\",\"ok\",\"notalk\",\"nowomen\",\"men\",\"ok\",\"dubious\",\"notalk\",\"ok\",\"ok\",\"men\",\"ok\",\"dubious\",\"notalk\",\"ok\",\"ok\",\"dubious\",\"men\",\"notalk\",\"ok\",\"ok\",\"men\",\"notalk\",\"ok\",\"ok\",\"notalk\",\"ok\",\"ok\",\"ok\",\"nowomen\",\"ok\",\"notalk\",\"ok\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"dubious\",\"notalk\",\"ok\",\"dubious\",\"notalk\",\"ok\",\"dubious\",\"ok\",\"ok\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"men\",\"ok\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"notalk\",\"ok\",\"dubious\",\"dubious\",\"men\",\"notalk\",\"ok\",\"notalk\",\"nowomen\",\"ok\",\"notalk\",\"ok\",\"notalk\",\"nowomen\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"ok\",\"ok\",\"men\",\"ok\",\"notalk\",\"ok\",\"dubious\",\"notalk\",\"nowomen\",\"ok\",\"ok\",\"ok\",\"men\",\"ok\",\"dubious\",\"men\",\"notalk\",\"ok\",\"ok\",\"men\",\"notalk\",\"ok\",\"ok\",\"men\",\"notalk\",\"ok\",\"notalk\",\"nowomen\",\"ok\",\"men\",\"notalk\",\"ok\",\"nowomen\",\"ok\",\"dubious\",\"notalk\",\"ok\",\"men\",\"notalk\",\"ok\",\"ok\",\"men\",\"ok\",\"men\",\"ok\",\"notalk\",\"ok\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"dubious\",\"men\",\"notalk\",\"ok\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"ok\",\"ok\",\"dubious\",\"men\",\"notalk\",\"ok\",\"men\",\"ok\",\"notalk\",\"notalk\",\"nowomen\",\"ok\",\"notalk\",\"ok\",\"notalk\",\"nowomen\",\"ok\",\"notalk\",\"ok\",\"notalk\",\"dubious\",\"notalk\",\"ok\",\"notalk\",\"men\",\"notalk\",\"ok\",\"notalk\",\"nowomen\",\"ok\",\"ok\",\"dubious\",\"notalk\",\"nowomen\",\"ok\",\"ok\",\"notalk\",\"men\",\"dubious\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"dubious\",\"ok\",\"dubious\",\"notalk\",\"dubious\",\"men\",\"notalk\",\"ok\",\"men\",\"ok\",\"dubious\",\"men\",\"nowomen\",\"ok\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\",\"ok\",\"ok\",\"notalk\",\"notalk\",\"ok\",\"notalk\",\"ok\",\"ok\",\"nowomen\",\"men\",\"notalk\",\"nowomen\",\"notalk\",\"nowomen\",\"ok\",\"notalk\",\"dubious\",\"men\",\"notalk\",\"nowomen\",\"ok\"],[2,2,3,1,9,2,7,3,4,1,1,2,3,3,7,4,4,3,8,4,15,5,9,1,1,1,1,1,1,1,4,4,22,5,18,1,6,1,2,3,1,1,2,1,2,1,1,4,13,5,7,1,1,1,1,3,1,1,1,1,1,1,2,1,1,1,1,1,2,11,2,5,1,1,1,1,2,1,1,1,21,8,7,1,1,1,1,1,1,1,1,3,1,1,1,1,2,1,4,4,1,1,1,2,1,3,2,1,1,1,1,1,2,3,1,1,1,1,1,1,1,6,1,2,2,1,2,1,1,1,1,3,1,4,2,1,7,1,8,3,8,1,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,4,1,2,4,5,1,1,1,1,4,2,1,4,1,1,1,2,1,2,1,5,1,1,1,1,1,2,2,1,1,1,1,1,16,1,2,1,2,1,1,1,1,1,1,1,2,1,1,3,1,6,2,6,1,1,2,3,19,9,11,1,3,2,1,4,1,3,1,1,1,1,1,2,1,3,6,1,1,1,1,1,2,1,1,2,1,3,1,2,3,1,1,1,3,1,7,1,3,1,4,7,2,1,4,1,1,4,3,3,1,1,2,1,1,2,6,22,21,1,1,1,1,5,3,4,1,5,4,1,1,1,1,1,1,1,2,1,3,1,2,8,14,40,4,3,1,2,9,1,1,1,5,1,1,6,8,9,1,41,1,2,2,1,1,1,1,2,2,1,8,1,2,1,1,1,2,3,1,1,3,5,1,2,1,2,2,1,1,1,3,1,1,1,3,1,1,1,1,1,1,4,9,4,28,1,1,2,3,1,2,3,1,1,1,1,1,1,1,5,7,1,7,1,1,1,1,1,1,2,1,2,1,3,5,1,5,1,1,3,2,10,3,13,1,1,1,1,1,5,1,1,2,2,1,1,1,1,6,4,11,4,34,1,1,2,1,2,2,1,1,1,1,2,1,1,1,2,1,2,5,1,1,4,2,1,1,2,1,3,2,1,1,2,4,1,2,1,3,8,1,1,7,1,1,2,2,3,2,5,1,2,1,4,1,1,1,1,3,1,1,6,8,5,6,5,3,25,1,1,1,2,2,1,1,1,1,1,1,3,2,2,3,2,5,4,3,1,2,2,5,1,1,1,1,3,1,1,1,1,1,1,1,2,1,1,1,1,3,3,2,15,1,7,1,1,2,2,2,13,1,3,1,1,1,4,2,4,4,2,17,1,1,1,3,2,6,1,1,1,3,1,1,1,1,3,1,20,30,34,15,103]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>genre<\\/th>\\n      <th>binary<\\/th>\\n      <th>clean_test<\\/th>\\n      <th>n<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"scrollX\":true,\"pageLength\":5,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":4},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true,\"lengthMenu\":[5,10,25,50,100]}},\"evals\":[],\"jsHooks\":[]}\r\nraw_bechdel %>% \r\n  count(rating) %>% \r\n  gt::gt()\r\n\r\n\r\n\r\nhtml {\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\r\n}\r\n\r\n#dnsdmrxwyp .gt_table {\r\n  display: table;\r\n  border-collapse: collapse;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  color: #333333;\r\n  font-size: 16px;\r\n  font-weight: normal;\r\n  font-style: normal;\r\n  background-color: #FFFFFF;\r\n  width: auto;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #A8A8A8;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #A8A8A8;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n}\r\n\r\n#dnsdmrxwyp .gt_heading {\r\n  background-color: #FFFFFF;\r\n  text-align: center;\r\n  border-bottom-color: #FFFFFF;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#dnsdmrxwyp .gt_title {\r\n  color: #333333;\r\n  font-size: 125%;\r\n  font-weight: initial;\r\n  padding-top: 4px;\r\n  padding-bottom: 4px;\r\n  border-bottom-color: #FFFFFF;\r\n  border-bottom-width: 0;\r\n}\r\n\r\n#dnsdmrxwyp .gt_subtitle {\r\n  color: #333333;\r\n  font-size: 85%;\r\n  font-weight: initial;\r\n  padding-top: 0;\r\n  padding-bottom: 6px;\r\n  border-top-color: #FFFFFF;\r\n  border-top-width: 0;\r\n}\r\n\r\n#dnsdmrxwyp .gt_bottom_border {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#dnsdmrxwyp .gt_col_headings {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#dnsdmrxwyp .gt_col_heading {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: normal;\r\n  text-transform: inherit;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 6px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#dnsdmrxwyp .gt_column_spanner_outer {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: normal;\r\n  text-transform: inherit;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  padding-left: 4px;\r\n  padding-right: 4px;\r\n}\r\n\r\n#dnsdmrxwyp .gt_column_spanner_outer:first-child {\r\n  padding-left: 0;\r\n}\r\n\r\n#dnsdmrxwyp .gt_column_spanner_outer:last-child {\r\n  padding-right: 0;\r\n}\r\n\r\n#dnsdmrxwyp .gt_column_spanner {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 5px;\r\n  overflow-x: hidden;\r\n  display: inline-block;\r\n  width: 100%;\r\n}\r\n\r\n#dnsdmrxwyp .gt_group_heading {\r\n  padding: 8px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  text-transform: inherit;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#dnsdmrxwyp .gt_empty_group_heading {\r\n  padding: 0.5px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#dnsdmrxwyp .gt_from_md > :first-child {\r\n  margin-top: 0;\r\n}\r\n\r\n#dnsdmrxwyp .gt_from_md > :last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n#dnsdmrxwyp .gt_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  margin: 10px;\r\n  border-top-style: solid;\r\n  border-top-width: 1px;\r\n  border-top-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#dnsdmrxwyp .gt_stub {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  text-transform: inherit;\r\n  border-right-style: solid;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  padding-left: 12px;\r\n}\r\n\r\n#dnsdmrxwyp .gt_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#dnsdmrxwyp .gt_first_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#dnsdmrxwyp .gt_grand_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#dnsdmrxwyp .gt_first_grand_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: double;\r\n  border-top-width: 6px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#dnsdmrxwyp .gt_striped {\r\n  background-color: rgba(128, 128, 128, 0.05);\r\n}\r\n\r\n#dnsdmrxwyp .gt_table_body {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#dnsdmrxwyp .gt_footnotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#dnsdmrxwyp .gt_footnote {\r\n  margin: 0px;\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#dnsdmrxwyp .gt_sourcenotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#dnsdmrxwyp .gt_sourcenote {\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#dnsdmrxwyp .gt_left {\r\n  text-align: left;\r\n}\r\n\r\n#dnsdmrxwyp .gt_center {\r\n  text-align: center;\r\n}\r\n\r\n#dnsdmrxwyp .gt_right {\r\n  text-align: right;\r\n  font-variant-numeric: tabular-nums;\r\n}\r\n\r\n#dnsdmrxwyp .gt_font_normal {\r\n  font-weight: normal;\r\n}\r\n\r\n#dnsdmrxwyp .gt_font_bold {\r\n  font-weight: bold;\r\n}\r\n\r\n#dnsdmrxwyp .gt_font_italic {\r\n  font-style: italic;\r\n}\r\n\r\n#dnsdmrxwyp .gt_super {\r\n  font-size: 65%;\r\n}\r\n\r\n#dnsdmrxwyp .gt_footnote_marks {\r\n  font-style: italic;\r\n  font-weight: normal;\r\n  font-size: 65%;\r\n}\r\nrating\r\n      n\r\n    0\r\n8941\r\n19402\r\n8963\r\n5109\r\n\r\nmovies %>% \r\n  inner_join(raw_bechdel, by = \"imdb_id\") %>% \r\n  select(imdb_id, \"title\" = \"title.x\",\r\n         \"year\" = \"year.x\", \r\n         country, genre, rating) %>% \r\n  distinct() %>% \r\n  drop_na() %>%\r\n  slice_sample(n = 50) %>% \r\n  DT::datatable(filter = 'top', list(scrollX = TRUE,\r\n                     pageLength = 5),\r\n    caption = htmltools::tags$caption(\r\n      style = 'caption-side: bottom; text-align: center;',\r\n     'Table Name: ', htmltools::em('Ratings for movies')\r\n  ))\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td><\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"1971\\\" data-max=\\\"2013\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"0\\\" data-max=\\\"3\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"caption\":\"<caption style=\\\"caption-side: bottom; text-align: center;\\\">\\n  Table Name: \\n  <em>Ratings for movies<\\/em>\\n<\\/caption>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\"],[\"0483726\",\"0296572\",\"1201167\",\"0472033\",\"0271027\",\"0304415\",\"0099487\",\"0374536\",\"0402399\",\"1055369\",\"0116583\",\"0800241\",\"0209144\",\"1059786\",\"0467200\",\"0811080\",\"0118583\",\"2191701\",\"1019452\",\"0265666\",\"0090555\",\"1454468\",\"0067741\",\"0095687\",\"1649419\",\"0896923\",\"2094064\",\"0070735\",\"0137523\",\"0097742\",\"0283426\",\"0087995\",\"0108255\",\"1010048\",\"0119137\",\"0821642\",\"0362227\",\"0093409\",\"0159365\",\"2425486\",\"0119567\",\"0942903\",\"0087332\",\"0377109\",\"0112715\",\"2302755\",\"1572315\",\"0368933\",\"0452608\",\"0116778\"],[\"Man of the Year\",\"The Chronicles of Riddick\",\"Funny People\",\"9\",\"Kiss of the Dragon\",\"Mona Lisa Smile\",\"Edward Scissorhands\",\"Bewitched\",\"The New World\",\"Transformers: Revenge of the Fallen\",\"The Hunchback of Notre Dame\",\"Transsiberian\",\"Memento\",\"Eagle Eye\",\"The Other Boleyn Girl\",\"Speed Racer\",\"Alien: Resurrection\",\"Grown Ups 2\",\"A Serious Man\",\"The Royal Tenenbaums\",\"Crocodile Dundee\",\"Gravity\",\"Shaft\",\"My Stepmother Is an Alien\",\"The Impossible\",\"The City of Your Final Destination\",\"Much Ado About Nothing\",\"The Sting\",\"Fight Club\",\"Licence to Kill\",\"The Jungle Book 2\",\"Repo Man\",\"Super Mario Bros.\",\"Slumdog Millionaire\",\"Flubber\",\"The Soloist\",\"The Terminal\",\"Lethal Weapon\",\"Cold Mountain\",\"Gloria\",\"The Lost World: Jurassic Park\",\"Stargate: The Ark of Truth\",\"Ghostbusters\",\"The Ring Two\",\"Congo\",\"Olympus Has Fallen\",\"Texas Chainsaw 3D\",\"The Princess Diaries 2: Royal Engagement\",\"Death Race\",\"Kingpin\"],[2006,2004,2009,2009,2001,2003,1990,2005,2005,2009,1996,2008,2000,2008,2008,2008,1997,2013,2009,2001,1986,2013,1971,1988,2012,2009,2012,1973,1999,1989,2003,1984,1993,2008,1997,2009,2004,1987,2003,2013,1997,2008,1984,2005,1995,2013,2013,2004,2008,1996],[\"USA\",\"USA\",\"USA\",\"USA\",\"France, USA\",\"USA\",\"USA\",\"USA\",\"USA, UK\",\"USA\",\"USA\",\"Spain, Germany, UK, Lithuania\",\"USA\",\"USA, Germany\",\"UK, USA\",\"USA, Australia, Germany\",\"USA\",\"USA\",\"USA, UK, France\",\"USA\",\"Australia\",\"USA, UK\",\"USA\",\"USA\",\"Spain\",\"USA\",\"USA\",\"USA\",\"USA, Germany\",\"UK, USA\",\"USA, Australia\",\"USA\",\"UK, USA\",\"UK\",\"USA\",\"UK, USA, France\",\"USA\",\"USA\",\"USA, UK, Romania, Italy\",\"Chile, Spain\",\"USA\",\"USA, Canada\",\"USA\",\"USA\",\"USA\",\"USA\",\"USA\",\"USA\",\"USA, Germany, UK\",\"USA\"],[\"Comedy, Drama, Romance\",\"Action, Adventure, Sci-Fi\",\"Comedy, Drama\",\"Animation, Action, Adventure\",\"Action, Crime, Thriller\",\"Drama\",\"Drama, Fantasy, Romance\",\"Comedy, Fantasy, Romance\",\"Biography, Drama, History\",\"Action, Adventure, Sci-Fi\",\"Animation, Drama, Family\",\"Crime, Drama, Mystery\",\"Mystery, Thriller\",\"Action, Mystery, Thriller\",\"Biography, Drama, History\",\"Action, Family, Sport\",\"Action, Sci-Fi, Thriller\",\"Comedy\",\"Comedy, Drama\",\"Comedy, Drama\",\"Adventure, Comedy\",\"Drama, Sci-Fi, Thriller\",\"Action, Crime, Thriller\",\"Comedy, Sci-Fi\",\"Drama, History, Thriller\",\"Drama\",\"Comedy, Drama, Romance\",\"Comedy, Crime, Drama\",\"Drama\",\"Action, Adventure, Crime\",\"Adventure, Animation, Family\",\"Comedy, Crime, Sci-Fi\",\"Adventure, Comedy, Family\",\"Drama, Romance, Thriller\",\"Comedy, Family, Sci-Fi\",\"Biography, Drama, Music\",\"Comedy, Drama\",\"Action, Thriller\",\"Drama, Romance, War\",\"Comedy, Drama\",\"Action, Adventure, Sci-Fi\",\"Adventure, Fantasy, Sci-Fi\",\"Comedy, Fantasy, Sci-Fi\",\"Horror, Mystery, Thriller\",\"Action, Adventure, Mystery\",\"Action, Thriller\",\"Horror, Thriller\",\"Comedy, Drama, Family\",\"Action, Sci-Fi, Thriller\",\"Comedy, Sport\"],[1,2,1,0,1,3,3,3,3,3,1,3,1,1,3,3,3,2,2,3,3,0,1,3,2,3,3,1,1,2,0,2,3,1,2,1,1,1,3,3,3,3,2,3,0,1,3,3,1,1]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>imdb_id<\\/th>\\n      <th>title<\\/th>\\n      <th>year<\\/th>\\n      <th>country<\\/th>\\n      <th>genre<\\/th>\\n      <th>rating<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"scrollX\":true,\"pageLength\":5,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[3,6]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true,\"lengthMenu\":[5,10,25,50,100]}},\"evals\":[],\"jsHooks\":[]}\r\nTreemap\r\nFor a treemap you need to provide:\r\ndtf : A dataset\r\nindex : The column(s) in your dataset that represents your group(s).\r\nSpecifying one column = simple treemap with no hierarchy\r\nSpecifying more than one column = a treemap with hierachy (first column = level 1, second column = second level etc.)\r\n?treemap for more information\r\n\r\nvSize : The column(s) that represent the size of each of the group(s).\r\nSimple treemap\r\nPerhaps we’re interested in seeing how many films in each genre are represented. Each movie may be categorised as multiple genres so let’s make each genre a separate row (tip from David Robinson’s screencasts). For example, the movie The Reader is listed as Drama, Romance so it will have a separate row after this with each genre (two rows now instead of one).\r\n\r\n\r\nmovies %>% \r\n  # split each into a separate row with each genre listed separately\r\n  # creates multiple rows for a movie broken down by each genre it\r\n  # belongs to.\r\n  separate_rows(genre, sep = \",\") %>% \r\n  mutate(genre = str_squish(genre)) %>%\r\n  filter(!is.na(genre)) %>% \r\n  count(genre, sort = TRUE) %>% \r\n  DT::datatable(filter = 'top', list(scrollX = TRUE,\r\n                     pageLength = 8),\r\n    caption = htmltools::tags$caption(\r\n      style = 'caption-side: bottom; text-align: center;',\r\n     'Table Name: ', htmltools::em('Number of movies per Genre')\r\n  ))\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td><\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"integer\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"4\\\" data-max=\\\"739\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"caption\":\"<caption style=\\\"caption-side: bottom; text-align: center;\\\">\\n  Table Name: \\n  <em>Number of movies per Genre<\\/em>\\n<\\/caption>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\"],[\"Drama\",\"Comedy\",\"Action\",\"Adventure\",\"Thriller\",\"Crime\",\"Romance\",\"Sci-Fi\",\"Fantasy\",\"Horror\",\"Mystery\",\"Animation\",\"Family\",\"Biography\",\"History\",\"Music\",\"War\",\"Sport\",\"Musical\",\"Western\",\"Documentary\"],[739,560,443,359,304,259,238,204,180,171,143,108,107,77,49,37,29,28,21,12,4]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>genre<\\/th>\\n      <th>n<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"scrollX\":true,\"pageLength\":8,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":2},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true,\"lengthMenu\":[8,10,25,50,100]}},\"evals\":[],\"jsHooks\":[]}\r\nmovies %>% \r\n  # split each into a separate row with each genre listed separately\r\n  # creates multiple rows for a movie broken down by each genre it\r\n  # belongs to. \r\n  separate_rows(genre, sep = \",\") %>% \r\n  mutate(genre = str_squish(genre)) %>% \r\n  filter(!is.na(genre)) %>% \r\n  count(genre) %>% \r\n  treemap(\r\n    # simple treemap with one group\r\n    index = \"genre\",\r\n    # size of rect = number of movies in each category\r\n    vSize = \"n\",\r\n    type = \"index\",\r\n    # make size of title and labels larger\r\n    fontsize.title = 30,\r\n    # specify size of labels in order of group, sub group etc.\r\n    fontsize.labels = c(24)\r\n  )\r\n\r\n\r\n\r\n\r\nThat’s nice, clean and pretty! But we can also change the title etc. to make it more appealing.\r\nTreemap with some hierarchy\r\nLet’s say we just want to see the genre by pass and fail. To achieve this we make our index have the two groups we’re interested in seeing. In the below it is the:\r\nindex = c(\"genre\", \"binary\")\r\nwhich specifies that we’d like to see each rectangle first represent a genre and then represent whether it passed or failed the Bechdel test.\r\n\r\n\r\n# package to allow me to add the font I want to use\r\nlibrary(showtext)\r\nfont_add(family = \"segoeui\", regular = r\"(C:\\WindowsFonts\\segoeui.ttf)\")\r\nshowtext_auto()\r\n\r\n# install palettes\r\n# devtools::install_github(\"sciencificity/werpals\")\r\n# I am using a palette I created\r\npalette_prov <-  werpals::nature_palettes[[\"provence\"]]\r\n\r\nmovies %>% \r\n  separate_rows(genre, sep = \",\") %>% \r\n  mutate(genre = str_squish(genre)) %>%\r\n  filter(!is.na(genre)) %>% \r\n  count(genre, binary, sort = TRUE) %>% \r\n  DT::datatable(filter = 'top', list(scrollX = TRUE,\r\n                     pageLength = 5),\r\n    caption = htmltools::tags$caption(\r\n      style = 'caption-side: bottom; text-align: center;',\r\n     'Table Name: ', htmltools::em('Number of Pass / Fail per Genre')\r\n  ))\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td><\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"integer\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"1\\\" data-max=\\\"375\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"caption\":\"<caption style=\\\"caption-side: bottom; text-align: center;\\\">\\n  Table Name: \\n  <em>Number of Pass / Fail per Genre<\\/em>\\n<\\/caption>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\"],[\"Drama\",\"Drama\",\"Action\",\"Comedy\",\"Comedy\",\"Adventure\",\"Thriller\",\"Crime\",\"Romance\",\"Action\",\"Sci-Fi\",\"Thriller\",\"Adventure\",\"Romance\",\"Horror\",\"Fantasy\",\"Fantasy\",\"Sci-Fi\",\"Mystery\",\"Crime\",\"Animation\",\"Horror\",\"Mystery\",\"Family\",\"Family\",\"Biography\",\"Animation\",\"Biography\",\"History\",\"Music\",\"War\",\"History\",\"Sport\",\"Musical\",\"Sport\",\"Music\",\"Western\",\"Musical\",\"War\",\"Documentary\",\"Western\",\"Documentary\"],[\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"PASS\",\"FAIL\",\"FAIL\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"PASS\"],[375,364,315,287,273,246,187,181,136,128,123,117,113,102,101,98,82,81,80,78,74,70,63,62,45,44,34,33,32,27,22,17,16,13,12,10,10,8,7,3,2,1]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>genre<\\/th>\\n      <th>binary<\\/th>\\n      <th>n<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"scrollX\":true,\"pageLength\":5,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":3},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true,\"lengthMenu\":[5,10,25,50,100]}},\"evals\":[],\"jsHooks\":[]}\r\nmovies %>% \r\n  separate_rows(genre, sep = \",\") %>% \r\n  mutate(genre = str_squish(genre)) %>% \r\n  filter(!is.na(genre)) %>% \r\n  count(genre, binary) %>% \r\n  treemap(\r\n    # treemap with a level of hierarchy\r\n    index = c(\"genre\", \"binary\"),\r\n    vSize = \"n\",\r\n    type = \"index\",\r\n    title = \"Number of Pass vs Fail of Bechdel test in each Genre\",\r\n    fontsize.title = 30,\r\n    # specify size of labels in order of group, sub group etc.\r\n    fontsize.labels = c(24, 20), \r\n    # what font to use\r\n    fontfamily.title = \"segeoui\",\r\n    fontfamily.labels = \"segeoui\",\r\n    # align the labels again in order\r\n    align.labels=list(\r\n        # group 1\r\n        c(\"center\", \"top\"),\r\n        # sub group 1\r\n        c(\"center\", \"center\")\r\n    ),\r\n    lowerbound.cex.labels = 0.5, # multiplier for when labels drawn\r\n    palette = palette_prov\r\n  )\r\n\r\n\r\n\r\n\r\nMake it interactive with {d3treeR}\r\nLet’s have a look at the gross income\r\nName of Field\r\nType\r\nDescription\r\nintgross_2013\r\ncharacter\r\nInternational gross normalized to 2013\r\n\r\n\r\nmovies_summ <- \r\n  # setup our dataset for the treemap\r\n  movies %>%\r\n  # it is a character field so let's convert it\r\n  mutate(intgross_2013 = parse_number(intgross_2013)) %>% \r\n  separate_rows(genre, sep = \",\") %>% \r\n  mutate(genre = str_squish(genre)) %>%\r\n  filter(!is.na(genre)) %>% \r\n  group_by(genre, binary) %>% \r\n  # add median gross income normalised to 2013 year\r\n  # make it millions\r\n  mutate(median_inc = round(median(intgross_2013, na.rm = TRUE)/1e6),2) %>% \r\n  ungroup() %>% \r\n  count(genre, binary, median_inc) \r\n\r\nmovies_summ %>% \r\n  DT::datatable(filter = 'top', list(scrollX = TRUE,\r\n                     pageLength = 5),\r\n    caption = htmltools::tags$caption(\r\n      style = 'caption-side: bottom; text-align: center;',\r\n     'Table Name: ', htmltools::em('Median Income for each Genre based on whether the movie passed / failed the test')\r\n  ))\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td><\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"0\\\" data-max=\\\"356\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"integer\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"1\\\" data-max=\\\"375\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"caption\":\"<caption style=\\\"caption-side: bottom; text-align: center;\\\">\\n  Table Name: \\n  <em>Median Income for each Genre based on whether the movie passed / failed the test<\\/em>\\n<\\/caption>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\"],[\"Action\",\"Action\",\"Adventure\",\"Adventure\",\"Animation\",\"Animation\",\"Biography\",\"Biography\",\"Comedy\",\"Comedy\",\"Crime\",\"Crime\",\"Documentary\",\"Documentary\",\"Drama\",\"Drama\",\"Family\",\"Family\",\"Fantasy\",\"Fantasy\",\"History\",\"History\",\"Horror\",\"Horror\",\"Music\",\"Music\",\"Musical\",\"Musical\",\"Mystery\",\"Mystery\",\"Romance\",\"Romance\",\"Sci-Fi\",\"Sci-Fi\",\"Sport\",\"Sport\",\"Thriller\",\"Thriller\",\"War\",\"War\",\"Western\",\"Western\"],[\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\",\"FAIL\",\"PASS\"],[200,140,261,268,264,356,95,41,97,64,90,73,21,0,74,56,182,186,197,125,79,91,87,82,53,51,149,123,94,97,66,86,143,132,80,96,104,76,117,198,126,159],[315,128,246,113,74,34,44,33,287,273,181,78,3,1,375,364,45,62,98,82,32,17,70,101,10,27,8,13,80,63,102,136,123,81,16,12,187,117,22,7,10,2]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>genre<\\/th>\\n      <th>binary<\\/th>\\n      <th>median_inc<\\/th>\\n      <th>n<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"scrollX\":true,\"pageLength\":5,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[3,4]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true,\"lengthMenu\":[5,10,25,50,100]}},\"evals\":[],\"jsHooks\":[]}\r\nmovie_summ_map <- movies_summ %>% \r\n  treemap(\r\n    # treemap with a level of hierarchy\r\n    index = c(\"genre\", \"median_inc\", \"binary\"),\r\n    vSize = \"median_inc\",\r\n    type = \"index\",\r\n    title = \"Income of each Genre based on whether the movie passed / failed test\",\r\n    fontsize.title = 26,\r\n    # specify size of labels in order of group, sub group etc.\r\n    fontsize.labels = c(24, 0, 20), \r\n    # what font to use\r\n    fontfamily.title = \"segeoui\",\r\n    fontfamily.labels = \"segeoui\",\r\n    # align the labels again in order\r\n    align.labels=list(\r\n        # group 1\r\n        c(\"center\", \"top\"),\r\n        # sub group 1 - we're not showing this though\r\n        c(\"center\", \"bottom\"),\r\n        # sub group 2\r\n        c(\"center\", \"center\")\r\n    ),\r\n    palette = \"Set3\",\r\n    lowerbound.cex.labels = 0.5, # multiplier for when labels drawn\r\n    force.print.labels = FALSE,\r\n  )\r\n\r\n\r\n\r\n\r\nOn the viz below you can click on a block to enter it. Click again to exit.\r\n\r\n\r\n# Make it interactive\r\nd3tree(movie_summ_map, rootname = \"Revenue per Genre per Pass/Fail Bechdel\")\r\n\r\n\r\n\r\n{\"x\":{\"data\":{\"name\":\"Revenue per Genre per Pass/Fail Bechdel\",\"id\":1,\"size\":null,\"children\":[{\"name\":\"Action\",\"color\":\"#8DD3C7\",\"h\":0.330097087378641,\"id\":2,\"size\":340,\"stdErr\":340,\"vColor\":2,\"vSize\":340,\"w\":0.20279582594999,\"x0\":0.226225634967513,\"y0\":0.312621359223301,\"children\":[{\"name\":\"140\",\"color\":\"#72BEA4\",\"h\":0.330097087378641,\"id\":3,\"size\":140,\"stdErr\":140,\"vColor\":1,\"vSize\":140,\"w\":0.0835041636264665,\"x0\":0.345517297291037,\"y0\":0.312621359223301,\"children\":[{\"name\":\"PASS\",\"color\":\"#72BEA4\",\"h\":0.330097087378641,\"id\":4,\"size\":140,\"stdErr\":140,\"vColor\":1,\"vSize\":140,\"w\":0.0835041636264665,\"x0\":0.345517297291037,\"y0\":0.312621359223301}]},{\"name\":\"200\",\"color\":\"#72BEBE\",\"h\":0.330097087378641,\"id\":5,\"size\":200,\"stdErr\":200,\"vColor\":1,\"vSize\":200,\"w\":0.119291662323524,\"x0\":0.226225634967513,\"y0\":0.312621359223301,\"children\":[{\"name\":\"FAIL\",\"color\":\"#72BEBE\",\"h\":0.330097087378641,\"id\":6,\"size\":200,\"stdErr\":200,\"vColor\":1,\"vSize\":200,\"w\":0.119291662323524,\"x0\":0.226225634967513,\"y0\":0.312621359223301}]}]},{\"name\":\"Adventure\",\"color\":\"#FFFFB3\",\"h\":0.460400348128808,\"id\":7,\"size\":529,\"stdErr\":529,\"vColor\":2,\"vSize\":529,\"w\":0.226225634967513,\"x0\":0,\"y0\":0,\"children\":[{\"name\":\"261\",\"color\":\"#E6D893\",\"h\":0.227154046997389,\"id\":8,\"size\":261,\"stdErr\":261,\"vColor\":1,\"vSize\":261,\"w\":0.226225634967513,\"x0\":0,\"y0\":0,\"children\":[{\"name\":\"FAIL\",\"color\":\"#E6D893\",\"h\":0.227154046997389,\"id\":9,\"size\":261,\"stdErr\":261,\"vColor\":1,\"vSize\":261,\"w\":0.226225634967513,\"x0\":0,\"y0\":0}]},{\"name\":\"268\",\"color\":\"#D8E693\",\"h\":0.233246301131419,\"id\":10,\"size\":268,\"stdErr\":268,\"vColor\":1,\"vSize\":268,\"w\":0.226225634967513,\"x0\":0,\"y0\":0.227154046997389,\"children\":[{\"name\":\"PASS\",\"color\":\"#D8E693\",\"h\":0.233246301131419,\"id\":11,\"size\":268,\"stdErr\":268,\"vColor\":1,\"vSize\":268,\"w\":0.226225634967513,\"x0\":0,\"y0\":0.227154046997389}]}]},{\"name\":\"Animation\",\"color\":\"#BEBADA\",\"h\":0.539599651871192,\"id\":12,\"size\":620,\"stdErr\":620,\"vColor\":2,\"vSize\":620,\"w\":0.226225634967513,\"x0\":0,\"y0\":0.460400348128808,\"children\":[{\"name\":\"264\",\"color\":\"#A2A3C4\",\"h\":0.22976501305483,\"id\":13,\"size\":264,\"stdErr\":264,\"vColor\":1,\"vSize\":264,\"w\":0.226225634967513,\"x0\":0,\"y0\":0.460400348128808,\"children\":[{\"name\":\"FAIL\",\"color\":\"#A2A3C4\",\"h\":0.22976501305483,\"id\":14,\"size\":264,\"stdErr\":264,\"vColor\":1,\"vSize\":264,\"w\":0.226225634967513,\"x0\":0,\"y0\":0.460400348128808}]},{\"name\":\"356\",\"color\":\"#ACA2C4\",\"h\":0.309834638816362,\"id\":15,\"size\":356,\"stdErr\":356,\"vColor\":1,\"vSize\":356,\"w\":0.226225634967513,\"x0\":0,\"y0\":0.690165361183638,\"children\":[{\"name\":\"PASS\",\"color\":\"#ACA2C4\",\"h\":0.309834638816362,\"id\":16,\"size\":356,\"stdErr\":356,\"vColor\":1,\"vSize\":356,\"w\":0.226225634967513,\"x0\":0,\"y0\":0.690165361183638}]}]},{\"name\":\"Biography\",\"color\":\"#FB8072\",\"h\":0.201841362059227,\"id\":17,\"size\":136,\"stdErr\":136,\"vColor\":2,\"vSize\":136,\"w\":0.132663217877007,\"x0\":0.74987455796106,\"y0\":0,\"children\":[{\"name\":\"41\",\"color\":\"#E24E57\",\"h\":0.201841362059227,\"id\":18,\"size\":41,\"stdErr\":41,\"vColor\":1,\"vSize\":41,\"w\":0.0399940583305682,\"x0\":0.842543717507499,\"y0\":0,\"children\":[{\"name\":\"PASS\",\"color\":\"#E24E57\",\"h\":0.201841362059227,\"id\":19,\"size\":41,\"stdErr\":41,\"vColor\":1,\"vSize\":41,\"w\":0.0399940583305682,\"x0\":0.842543717507499,\"y0\":0}]},{\"name\":\"95\",\"color\":\"#E2764E\",\"h\":0.201841362059227,\"id\":20,\"size\":95,\"stdErr\":95,\"vColor\":1,\"vSize\":95,\"w\":0.0926691595464385,\"x0\":0.74987455796106,\"y0\":0,\"children\":[{\"name\":\"FAIL\",\"color\":\"#E2764E\",\"h\":0.201841362059227,\"id\":21,\"size\":95,\"stdErr\":95,\"vColor\":1,\"vSize\":95,\"w\":0.0926691595464385,\"x0\":0.74987455796106,\"y0\":0}]}]},{\"name\":\"Comedy\",\"color\":\"#80B1D3\",\"h\":0.255040369088812,\"id\":22,\"size\":161,\"stdErr\":161,\"vColor\":2,\"vSize\":161,\"w\":0.124290728914411,\"x0\":0.875709271085589,\"y0\":0.427428766713657,\"children\":[{\"name\":\"64\",\"color\":\"#64A8BE\",\"h\":0.101382506966981,\"id\":23,\"size\":64,\"stdErr\":64,\"vColor\":1,\"vSize\":64,\"w\":0.124290728914411,\"x0\":0.875709271085589,\"y0\":0.427428766713657,\"children\":[{\"name\":\"PASS\",\"color\":\"#64A8BE\",\"h\":0.101382506966981,\"id\":24,\"size\":64,\"stdErr\":64,\"vColor\":1,\"vSize\":64,\"w\":0.124290728914411,\"x0\":0.875709271085589,\"y0\":0.427428766713657}]},{\"name\":\"97\",\"color\":\"#648ABE\",\"h\":0.153657862121831,\"id\":25,\"size\":97,\"stdErr\":97,\"vColor\":1,\"vSize\":97,\"w\":0.124290728914411,\"x0\":0.875709271085589,\"y0\":0.528811273680638,\"children\":[{\"name\":\"FAIL\",\"color\":\"#648ABE\",\"h\":0.153657862121831,\"id\":26,\"size\":97,\"stdErr\":97,\"vColor\":1,\"vSize\":97,\"w\":0.124290728914411,\"x0\":0.875709271085589,\"y0\":0.528811273680638}]}]},{\"name\":\"Crime\",\"color\":\"#FDB462\",\"h\":0.255040369088812,\"id\":27,\"size\":163,\"stdErr\":163,\"vColor\":2,\"vSize\":163,\"w\":0.125834713124528,\"x0\":0.74987455796106,\"y0\":0.427428766713657,\"children\":[{\"name\":\"73\",\"color\":\"#E4793C\",\"h\":0.114220533395603,\"id\":28,\"size\":73,\"stdErr\":73,\"vColor\":1,\"vSize\":73,\"w\":0.125834713124528,\"x0\":0.74987455796106,\"y0\":0.427428766713657,\"children\":[{\"name\":\"PASS\",\"color\":\"#E4793C\",\"h\":0.114220533395603,\"id\":29,\"size\":73,\"stdErr\":73,\"vColor\":1,\"vSize\":73,\"w\":0.125834713124528,\"x0\":0.74987455796106,\"y0\":0.427428766713657}]},{\"name\":\"90\",\"color\":\"#E4B13C\",\"h\":0.140819835693209,\"id\":30,\"size\":90,\"stdErr\":90,\"vColor\":1,\"vSize\":90,\"w\":0.125834713124528,\"x0\":0.74987455796106,\"y0\":0.54164930010926,\"children\":[{\"name\":\"FAIL\",\"color\":\"#E4B13C\",\"h\":0.140819835693209,\"id\":31,\"size\":90,\"stdErr\":90,\"vColor\":1,\"vSize\":90,\"w\":0.125834713124528,\"x0\":0.74987455796106,\"y0\":0.54164930010926}]}]},{\"name\":\"Documentary\",\"color\":\"#B3DE69\",\"h\":0.209523905251793,\"id\":32,\"size\":21,\"stdErr\":21,\"vColor\":2,\"vSize\":21,\"w\":0.0197336536592048,\"x0\":0.980266346340795,\"y0\":0,\"children\":[{\"name\":\"21\",\"color\":\"#B3DE69\",\"h\":0.209523905251793,\"id\":33,\"size\":21,\"stdErr\":21,\"vColor\":1,\"vSize\":21,\"w\":0.0197336536592048,\"x0\":0.980266346340795,\"y0\":0,\"children\":[{\"name\":\"FAIL\",\"color\":\"#B3DE69\",\"h\":0.209523905251793,\"id\":34,\"size\":21,\"stdErr\":21,\"vColor\":1,\"vSize\":21,\"w\":0.0197336536592048,\"x0\":0.980266346340795,\"y0\":0}]}]},{\"name\":\"Drama\",\"color\":\"#FCCDE5\",\"h\":0.217904861461864,\"id\":35,\"size\":130,\"stdErr\":130,\"vColor\":2,\"vSize\":130,\"w\":0.117462224161933,\"x0\":0.882537775838067,\"y0\":0.209523905251793,\"children\":[{\"name\":\"56\",\"color\":\"#E3B0D2\",\"h\":0.217904861461864,\"id\":36,\"size\":56,\"stdErr\":56,\"vColor\":1,\"vSize\":56,\"w\":0.0505991119466788,\"x0\":0.949400888053321,\"y0\":0.209523905251793,\"children\":[{\"name\":\"PASS\",\"color\":\"#E3B0D2\",\"h\":0.217904861461864,\"id\":37,\"size\":56,\"stdErr\":56,\"vColor\":1,\"vSize\":56,\"w\":0.0505991119466788,\"x0\":0.949400888053321,\"y0\":0.209523905251793}]},{\"name\":\"74\",\"color\":\"#E3B0C2\",\"h\":0.217904861461864,\"id\":38,\"size\":74,\"stdErr\":74,\"vColor\":1,\"vSize\":74,\"w\":0.0668631122152541,\"x0\":0.882537775838067,\"y0\":0.209523905251793,\"children\":[{\"name\":\"FAIL\",\"color\":\"#E3B0C2\",\"h\":0.217904861461864,\"id\":39,\"size\":74,\"stdErr\":74,\"vColor\":1,\"vSize\":74,\"w\":0.0668631122152541,\"x0\":0.882537775838067,\"y0\":0.209523905251793}]}]},{\"name\":\"Family\",\"color\":\"#D9D9D9\",\"h\":0.357281553398058,\"id\":40,\"size\":368,\"stdErr\":368,\"vColor\":2,\"vSize\":368,\"w\":0.20279582594999,\"x0\":0.226225634967513,\"y0\":0.642718446601942,\"children\":[{\"name\":\"182\",\"color\":\"#C3C3C3\",\"h\":0.357281553398058,\"id\":41,\"size\":182,\"stdErr\":182,\"vColor\":1,\"vSize\":182,\"w\":0.100295761747006,\"x0\":0.328725699170497,\"y0\":0.642718446601942,\"children\":[{\"name\":\"FAIL\",\"color\":\"#C3C3C3\",\"h\":0.357281553398058,\"id\":42,\"size\":182,\"stdErr\":182,\"vColor\":1,\"vSize\":182,\"w\":0.100295761747006,\"x0\":0.328725699170497,\"y0\":0.642718446601942}]},{\"name\":\"186\",\"color\":\"#C3C3C3\",\"h\":0.357281553398058,\"id\":43,\"size\":186,\"stdErr\":186,\"vColor\":1,\"vSize\":186,\"w\":0.102500064202984,\"x0\":0.226225634967513,\"y0\":0.642718446601942,\"children\":[{\"name\":\"PASS\",\"color\":\"#C3C3C3\",\"h\":0.357281553398058,\"id\":44,\"size\":186,\"stdErr\":186,\"vColor\":1,\"vSize\":186,\"w\":0.102500064202984,\"x0\":0.226225634967513,\"y0\":0.642718446601942}]}]},{\"name\":\"Fantasy\",\"color\":\"#BC80BD\",\"h\":0.312621359223301,\"id\":45,\"size\":322,\"stdErr\":322,\"vColor\":2,\"vSize\":322,\"w\":0.20279582594999,\"x0\":0.226225634967513,\"y0\":0,\"children\":[{\"name\":\"125\",\"color\":\"#9E68AA\",\"h\":0.312621359223301,\"id\":46,\"size\":125,\"stdErr\":125,\"vColor\":1,\"vSize\":125,\"w\":0.0787250877135055,\"x0\":0.350296373203998,\"y0\":0,\"children\":[{\"name\":\"PASS\",\"color\":\"#9E68AA\",\"h\":0.312621359223301,\"id\":47,\"size\":125,\"stdErr\":125,\"vColor\":1,\"vSize\":125,\"w\":0.0787250877135055,\"x0\":0.350296373203998,\"y0\":0}]},{\"name\":\"197\",\"color\":\"#AA68A0\",\"h\":0.312621359223301,\"id\":48,\"size\":197,\"stdErr\":197,\"vColor\":1,\"vSize\":197,\"w\":0.124070738236485,\"x0\":0.226225634967513,\"y0\":0,\"children\":[{\"name\":\"FAIL\",\"color\":\"#AA68A0\",\"h\":0.312621359223301,\"id\":49,\"size\":197,\"stdErr\":197,\"vColor\":1,\"vSize\":197,\"w\":0.124070738236485,\"x0\":0.226225634967513,\"y0\":0}]}]},{\"name\":\"History\",\"color\":\"#CCEBC5\",\"h\":0.225281073954213,\"id\":50,\"size\":170,\"stdErr\":170,\"vColor\":2,\"vSize\":170,\"w\":0.148575089561769,\"x0\":0.601299468399291,\"y0\":0.223955891166247,\"children\":[{\"name\":\"79\",\"color\":\"#B9D3AA\",\"h\":0.225281073954213,\"id\":51,\"size\":79,\"stdErr\":79,\"vColor\":1,\"vSize\":79,\"w\":0.0690437180904692,\"x0\":0.680830839870591,\"y0\":0.223955891166247,\"children\":[{\"name\":\"FAIL\",\"color\":\"#B9D3AA\",\"h\":0.225281073954213,\"id\":52,\"size\":79,\"stdErr\":79,\"vColor\":1,\"vSize\":79,\"w\":0.0690437180904692,\"x0\":0.680830839870591,\"y0\":0.223955891166247}]},{\"name\":\"91\",\"color\":\"#ABD3AA\",\"h\":0.225281073954213,\"id\":53,\"size\":91,\"stdErr\":91,\"vColor\":1,\"vSize\":91,\"w\":0.0795313714713,\"x0\":0.601299468399291,\"y0\":0.223955891166247,\"children\":[{\"name\":\"PASS\",\"color\":\"#ABD3AA\",\"h\":0.225281073954213,\"id\":54,\"size\":91,\"stdErr\":91,\"vColor\":1,\"vSize\":91,\"w\":0.0795313714713,\"x0\":0.601299468399291,\"y0\":0.223955891166247}]}]},{\"name\":\"Horror\",\"color\":\"#FFED6F\",\"h\":0.223955891166247,\"id\":55,\"size\":169,\"stdErr\":169,\"vColor\":2,\"vSize\":169,\"w\":0.148575089561769,\"x0\":0.601299468399291,\"y0\":0,\"children\":[{\"name\":\"82\",\"color\":\"#E6B84A\",\"h\":0.223955891166247,\"id\":56,\"size\":82,\"stdErr\":82,\"vColor\":1,\"vSize\":82,\"w\":0.0720896884264206,\"x0\":0.67778486953464,\"y0\":0,\"children\":[{\"name\":\"PASS\",\"color\":\"#E6B84A\",\"h\":0.223955891166247,\"id\":57,\"size\":82,\"stdErr\":82,\"vColor\":1,\"vSize\":82,\"w\":0.0720896884264206,\"x0\":0.67778486953464,\"y0\":0}]},{\"name\":\"87\",\"color\":\"#DFE64A\",\"h\":0.223955891166247,\"id\":58,\"size\":87,\"stdErr\":87,\"vColor\":1,\"vSize\":87,\"w\":0.0764854011353486,\"x0\":0.601299468399291,\"y0\":0,\"children\":[{\"name\":\"FAIL\",\"color\":\"#DFE64A\",\"h\":0.223955891166247,\"id\":59,\"size\":87,\"stdErr\":87,\"vColor\":1,\"vSize\":87,\"w\":0.0764854011353486,\"x0\":0.601299468399291,\"y0\":0}]}]},{\"name\":\"Music\",\"color\":\"#8DD3C7\",\"h\":0.209523905251793,\"id\":60,\"size\":104,\"stdErr\":104,\"vColor\":2,\"vSize\":104,\"w\":0.0977285705027282,\"x0\":0.882537775838067,\"y0\":0,\"children\":[{\"name\":\"51\",\"color\":\"#72BEA4\",\"h\":0.102747299690783,\"id\":61,\"size\":51,\"stdErr\":51,\"vColor\":1,\"vSize\":51,\"w\":0.0977285705027282,\"x0\":0.882537775838067,\"y0\":0,\"children\":[{\"name\":\"PASS\",\"color\":\"#72BEA4\",\"h\":0.102747299690783,\"id\":62,\"size\":51,\"stdErr\":51,\"vColor\":1,\"vSize\":51,\"w\":0.0977285705027282,\"x0\":0.882537775838067,\"y0\":0}]},{\"name\":\"53\",\"color\":\"#72BEBE\",\"h\":0.10677660556101,\"id\":63,\"size\":53,\"stdErr\":53,\"vColor\":1,\"vSize\":53,\"w\":0.0977285705027282,\"x0\":0.882537775838067,\"y0\":0.102747299690783,\"children\":[{\"name\":\"FAIL\",\"color\":\"#72BEBE\",\"h\":0.10677660556101,\"id\":64,\"size\":53,\"stdErr\":53,\"vColor\":1,\"vSize\":53,\"w\":0.0977285705027282,\"x0\":0.882537775838067,\"y0\":0.102747299690783}]}]},{\"name\":\"Musical\",\"color\":\"#FFFFB3\",\"h\":0.317530864197531,\"id\":65,\"size\":272,\"stdErr\":272,\"vColor\":2,\"vSize\":272,\"w\":0.168657145560486,\"x0\":0.601299468399291,\"y0\":0.682469135802469,\"children\":[{\"name\":\"123\",\"color\":\"#E6D893\",\"h\":0.317530864197531,\"id\":66,\"size\":123,\"stdErr\":123,\"vColor\":1,\"vSize\":123,\"w\":0.0762677533233082,\"x0\":0.69368886063647,\"y0\":0.682469135802469,\"children\":[{\"name\":\"PASS\",\"color\":\"#E6D893\",\"h\":0.317530864197531,\"id\":67,\"size\":123,\"stdErr\":123,\"vColor\":1,\"vSize\":123,\"w\":0.0762677533233082,\"x0\":0.69368886063647,\"y0\":0.682469135802469}]},{\"name\":\"149\",\"color\":\"#D8E693\",\"h\":0.317530864197531,\"id\":68,\"size\":149,\"stdErr\":149,\"vColor\":1,\"vSize\":149,\"w\":0.0923893922371783,\"x0\":0.601299468399291,\"y0\":0.682469135802469,\"children\":[{\"name\":\"FAIL\",\"color\":\"#D8E693\",\"h\":0.317530864197531,\"id\":69,\"size\":149,\"stdErr\":149,\"vColor\":1,\"vSize\":149,\"w\":0.0923893922371783,\"x0\":0.601299468399291,\"y0\":0.682469135802469}]}]},{\"name\":\"Mystery\",\"color\":\"#BEBADA\",\"h\":0.317530864197531,\"id\":70,\"size\":191,\"stdErr\":191,\"vColor\":2,\"vSize\":191,\"w\":0.11843203971343,\"x0\":0.769956613959778,\"y0\":0.682469135802469,\"children\":[{\"name\":\"94\",\"color\":\"#A2A3C4\",\"h\":0.156271734212397,\"id\":71,\"size\":94,\"stdErr\":94,\"vColor\":1,\"vSize\":94,\"w\":0.11843203971343,\"x0\":0.769956613959778,\"y0\":0.682469135802469,\"children\":[{\"name\":\"FAIL\",\"color\":\"#A2A3C4\",\"h\":0.156271734212397,\"id\":72,\"size\":94,\"stdErr\":94,\"vColor\":1,\"vSize\":94,\"w\":0.11843203971343,\"x0\":0.769956613959778,\"y0\":0.682469135802469}]},{\"name\":\"97\",\"color\":\"#ACA2C4\",\"h\":0.161259129985134,\"id\":73,\"size\":97,\"stdErr\":97,\"vColor\":1,\"vSize\":97,\"w\":0.11843203971343,\"x0\":0.769956613959778,\"y0\":0.838740870014867,\"children\":[{\"name\":\"PASS\",\"color\":\"#ACA2C4\",\"h\":0.161259129985134,\"id\":74,\"size\":97,\"stdErr\":97,\"vColor\":1,\"vSize\":97,\"w\":0.11843203971343,\"x0\":0.769956613959778,\"y0\":0.838740870014867}]}]},{\"name\":\"Romance\",\"color\":\"#FB8072\",\"h\":0.22558740465443,\"id\":75,\"size\":152,\"stdErr\":152,\"vColor\":2,\"vSize\":152,\"w\":0.132663217877007,\"x0\":0.74987455796106,\"y0\":0.201841362059227,\"children\":[{\"name\":\"66\",\"color\":\"#E24E57\",\"h\":0.22558740465443,\"id\":76,\"size\":66,\"stdErr\":66,\"vColor\":1,\"vSize\":66,\"w\":0.0576037656571213,\"x0\":0.824934010180946,\"y0\":0.201841362059227,\"children\":[{\"name\":\"FAIL\",\"color\":\"#E24E57\",\"h\":0.22558740465443,\"id\":77,\"size\":66,\"stdErr\":66,\"vColor\":1,\"vSize\":66,\"w\":0.0576037656571213,\"x0\":0.824934010180946,\"y0\":0.201841362059227}]},{\"name\":\"86\",\"color\":\"#E2764E\",\"h\":0.22558740465443,\"id\":78,\"size\":86,\"stdErr\":86,\"vColor\":1,\"vSize\":86,\"w\":0.0750594522198854,\"x0\":0.74987455796106,\"y0\":0.201841362059227,\"children\":[{\"name\":\"PASS\",\"color\":\"#E2764E\",\"h\":0.22558740465443,\"id\":79,\"size\":86,\"stdErr\":86,\"vColor\":1,\"vSize\":86,\"w\":0.0750594522198854,\"x0\":0.74987455796106,\"y0\":0.201841362059227}]}]},{\"name\":\"Sci-Fi\",\"color\":\"#80B1D3\",\"h\":0.314285714285714,\"id\":80,\"size\":275,\"stdErr\":275,\"vColor\":2,\"vSize\":275,\"w\":0.172278007481788,\"x0\":0.429021460917503,\"y0\":0,\"children\":[{\"name\":\"132\",\"color\":\"#64A8BE\",\"h\":0.314285714285714,\"id\":81,\"size\":132,\"stdErr\":132,\"vColor\":1,\"vSize\":132,\"w\":0.0826934435912581,\"x0\":0.518606024808033,\"y0\":0,\"children\":[{\"name\":\"PASS\",\"color\":\"#64A8BE\",\"h\":0.314285714285714,\"id\":82,\"size\":132,\"stdErr\":132,\"vColor\":1,\"vSize\":132,\"w\":0.0826934435912581,\"x0\":0.518606024808033,\"y0\":0}]},{\"name\":\"143\",\"color\":\"#648ABE\",\"h\":0.314285714285714,\"id\":83,\"size\":143,\"stdErr\":143,\"vColor\":1,\"vSize\":143,\"w\":0.0895845638905296,\"x0\":0.429021460917503,\"y0\":0,\"children\":[{\"name\":\"FAIL\",\"color\":\"#648ABE\",\"h\":0.314285714285714,\"id\":84,\"size\":143,\"stdErr\":143,\"vColor\":1,\"vSize\":143,\"w\":0.0895845638905296,\"x0\":0.429021460917503,\"y0\":0}]}]},{\"name\":\"Sport\",\"color\":\"#FDB462\",\"h\":0.233232170682009,\"id\":85,\"size\":176,\"stdErr\":176,\"vColor\":2,\"vSize\":176,\"w\":0.148575089561769,\"x0\":0.601299468399291,\"y0\":0.44923696512046,\"children\":[{\"name\":\"80\",\"color\":\"#E4793C\",\"h\":0.233232170682009,\"id\":86,\"size\":80,\"stdErr\":80,\"vColor\":1,\"vSize\":80,\"w\":0.067534131618986,\"x0\":0.682340426342074,\"y0\":0.44923696512046,\"children\":[{\"name\":\"FAIL\",\"color\":\"#E4793C\",\"h\":0.233232170682009,\"id\":87,\"size\":80,\"stdErr\":80,\"vColor\":1,\"vSize\":80,\"w\":0.067534131618986,\"x0\":0.682340426342074,\"y0\":0.44923696512046}]},{\"name\":\"96\",\"color\":\"#E4B13C\",\"h\":0.233232170682009,\"id\":88,\"size\":96,\"stdErr\":96,\"vColor\":1,\"vSize\":96,\"w\":0.0810409579427832,\"x0\":0.601299468399291,\"y0\":0.44923696512046,\"children\":[{\"name\":\"PASS\",\"color\":\"#E4B13C\",\"h\":0.233232170682009,\"id\":89,\"size\":96,\"stdErr\":96,\"vColor\":1,\"vSize\":96,\"w\":0.0810409579427832,\"x0\":0.601299468399291,\"y0\":0.44923696512046}]}]},{\"name\":\"Thriller\",\"color\":\"#B3DE69\",\"h\":0.317530864197531,\"id\":90,\"size\":180,\"stdErr\":180,\"vColor\":2,\"vSize\":180,\"w\":0.111611346326793,\"x0\":0.888388653673208,\"y0\":0.682469135802469,\"children\":[{\"name\":\"104\",\"color\":\"#AEC849\",\"h\":0.183462277091907,\"id\":91,\"size\":104,\"stdErr\":104,\"vColor\":1,\"vSize\":104,\"w\":0.111611346326793,\"x0\":0.888388653673208,\"y0\":0.816537722908093,\"children\":[{\"name\":\"FAIL\",\"color\":\"#AEC849\",\"h\":0.183462277091907,\"id\":92,\"size\":104,\"stdErr\":104,\"vColor\":1,\"vSize\":104,\"w\":0.111611346326793,\"x0\":0.888388653673208,\"y0\":0.816537722908093}]},{\"name\":\"76\",\"color\":\"#84C849\",\"h\":0.134068587105624,\"id\":93,\"size\":76,\"stdErr\":76,\"vColor\":1,\"vSize\":76,\"w\":0.111611346326793,\"x0\":0.888388653673208,\"y0\":0.682469135802469,\"children\":[{\"name\":\"PASS\",\"color\":\"#84C849\",\"h\":0.134068587105624,\"id\":94,\"size\":76,\"stdErr\":76,\"vColor\":1,\"vSize\":76,\"w\":0.111611346326793,\"x0\":0.888388653673208,\"y0\":0.682469135802469}]}]},{\"name\":\"War\",\"color\":\"#FCCDE5\",\"h\":0.36,\"id\":95,\"size\":315,\"stdErr\":315,\"vColor\":2,\"vSize\":315,\"w\":0.172278007481788,\"x0\":0.429021460917503,\"y0\":0.64,\"children\":[{\"name\":\"117\",\"color\":\"#E3B0D2\",\"h\":0.133714285714286,\"id\":96,\"size\":117,\"stdErr\":117,\"vColor\":1,\"vSize\":117,\"w\":0.172278007481788,\"x0\":0.429021460917503,\"y0\":0.64,\"children\":[{\"name\":\"FAIL\",\"color\":\"#E3B0D2\",\"h\":0.133714285714286,\"id\":97,\"size\":117,\"stdErr\":117,\"vColor\":1,\"vSize\":117,\"w\":0.172278007481788,\"x0\":0.429021460917503,\"y0\":0.64}]},{\"name\":\"198\",\"color\":\"#E3B0C2\",\"h\":0.226285714285714,\"id\":98,\"size\":198,\"stdErr\":198,\"vColor\":1,\"vSize\":198,\"w\":0.172278007481788,\"x0\":0.429021460917503,\"y0\":0.773714285714286,\"children\":[{\"name\":\"PASS\",\"color\":\"#E3B0C2\",\"h\":0.226285714285714,\"id\":99,\"size\":198,\"stdErr\":198,\"vColor\":1,\"vSize\":198,\"w\":0.172278007481788,\"x0\":0.429021460917503,\"y0\":0.773714285714286}]}]},{\"name\":\"Western\",\"color\":\"#D9D9D9\",\"h\":0.325714285714286,\"id\":100,\"size\":285,\"stdErr\":285,\"vColor\":2,\"vSize\":285,\"w\":0.172278007481788,\"x0\":0.429021460917503,\"y0\":0.314285714285714,\"children\":[{\"name\":\"126\",\"color\":\"#C3C3C3\",\"h\":0.325714285714286,\"id\":101,\"size\":126,\"stdErr\":126,\"vColor\":1,\"vSize\":126,\"w\":0.0761650138340536,\"x0\":0.525134454565238,\"y0\":0.314285714285714,\"children\":[{\"name\":\"FAIL\",\"color\":\"#C3C3C3\",\"h\":0.325714285714286,\"id\":102,\"size\":126,\"stdErr\":126,\"vColor\":1,\"vSize\":126,\"w\":0.0761650138340536,\"x0\":0.525134454565238,\"y0\":0.314285714285714}]},{\"name\":\"159\",\"color\":\"#C3C3C3\",\"h\":0.325714285714286,\"id\":103,\"size\":159,\"stdErr\":159,\"vColor\":1,\"vSize\":159,\"w\":0.0961129936477342,\"x0\":0.429021460917503,\"y0\":0.314285714285714,\"children\":[{\"name\":\"PASS\",\"color\":\"#C3C3C3\",\"h\":0.325714285714286,\"id\":104,\"size\":159,\"stdErr\":159,\"vColor\":1,\"vSize\":159,\"w\":0.0961129936477342,\"x0\":0.429021460917503,\"y0\":0.314285714285714}]}]}]},\"meta\":{\"type\":\"index\",\"vSize\":\"median_inc\",\"vColor\":null,\"stdErr\":\"median_inc\",\"algorithm\":\"pivotSize\",\"vpCoorX\":[0.0302846759539673,0.969715324046033],\"vpCoorY\":[0.0246062992125984,0.812893700787402],\"aspRatio\":1.93657135722312,\"range\":null,\"mapping\":[null,null,null],\"draw\":true},\"options\":{\"id\":\"id\",\"celltext\":\"name\",\"valueField\":\"size\"}},\"evals\":[],\"jsHooks\":[]}\r\nThe movies that fail the test seem to have a higher revenue than those that pass.\r\nWant to save the visual?\r\nYou can save the widget using the code below (courtesy of R Graph Gallery).\r\n\r\n\r\n# save the widget\r\nlibrary(htmlwidgets)\r\nsaveWidget(movie_summ_map, file=paste0(here::here(\"HtmlWidget\"),\r\n                                \"interactiveTreemap-bechdel.html\"))\r\n\r\n\r\n\r\nResources\r\nThe R Graph Gallery\r\nBuilding Widgets\r\nJon Schwabish’s One Chart at a Time on Treemap\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-11-21-tree-map/preview.jpg",
    "last_modified": "2021-11-28T01:49:22+02:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-04-16-datadrivencv-of-the-best-troublemaker/",
    "title": "{datadrivencv} of the ultimate (read as 'best') troublemaker",
    "description": "We're going to create a cv using {datadrivencv} by  Nicholas Strayer",
    "author": [
      {
        "name": "Vebash Naidoo",
        "url": "https://twitter.com/Sciencificity"
      }
    ],
    "date": "2021-04-16",
    "categories": [
      "datadrivencv",
      "RMarkdown"
    ],
    "contents": "\r\n\r\nContents\r\nBackground\r\nSo, what are we doing?\r\nDownload {datadrivencv} 📦\r\nSet-up data\r\nGoogle Sheet Method\r\nGoogle Sheet Amendments\r\n\r\nCreate skeleton project\r\ncv.rmd\r\ncv_printing_functions.r\r\n\r\nData for CV\r\nWorking with a Private Google Sheets File in R\r\nWorking with a Public Google Sheets File in R\r\nWorking with csvs\r\n\r\nRender your CV\r\nHost Online\r\n\r\nAppendices\r\nMock CV Files\r\nPackages used\r\n\r\n\r\n\r\n\r\nblockquote {\r\n  background: #f9f9f9;\r\n  border-left: 10px solid #ccc;\r\n  margin: 1.5em 10px;\r\n  padding: 0.5em 10px;\r\n  quotes: \"\\201C\"\"\\201D\"\"\\2018\"\"\\2019\";\r\n}\r\nblockquote:before {\r\n  color: #ccc;\r\n  content: open-quote;\r\n  font-size: 4em;\r\n  line-height: 0.1em;\r\n  margin-right: 0.25em;\r\n  vertical-align: -0.4em;\r\n}\r\nblockquote p {\r\n  display: inline;\r\n}\r\n\r\n\r\nWhat counts in life is not the mere fact that we have lived. It is what difference we have made to the lives of others that will determine the significance of the life we lead.\r\n\r\n\r\n— Nelson Mandela\r\n\r\nTimeline pic from Timelinemaker where the featured timeline was Nelson Rolihlahla Mandela\r\nBackground\r\nI recently applied for admission into an online Masters in Analytics at a US university. As part of the process I needed to submit my CV. I used Nicholas Strayer’s {datadrivencv} to create the CV I submitted.\r\nBut I am a bit embarrassed at putting my own CV into the public domain, so I thought I would create a mock CV for the best “troublemaker” to ever have graced this earth - at least in my opinion - Nelson Rolihlahla Mandela 💗!\r\nThere are no words for what Madiba did for my country, I still remember mourning his death like that of a dearest loved one, so foundational was he in this ordinary South African’s life.\r\nSo, what are we doing?\r\nWe’re going to run through the motions of setting up a CV using the {datadrivencv} 📦.\r\nDownload {datadrivencv} 📦\r\n\r\n\r\ninstall.packages(\"devtools\")\r\ndevtools::install_github(\"nstrayer/datadrivencv\")\r\n\r\n\r\n\r\nSet-up data\r\nThe data is housed within a google sheet, or alternately you can generate csv’s from an Excel workbook / Googlesheet to hold your data.\r\nWe’re going to use the google sheet method since it is the easiest and cleanest.\r\nGoogle Sheet Method\r\nInstead of starting from scratch, as Nicholas says in the documentation, you can create a copy of this data and amend it to suit your needs.\r\n\r\nFigure 1 - Make a copy of Nick’s Google Sheet Data\r\nGoogle Sheet Amendments\r\nAmend your google sheet copy as you need.\r\nEntries Sheet\r\nI removed certain sections, and added a born, community_positions and awards section.\r\nI renamed data_science_writings to writing.\r\nHere is what my entries sheet looks like after my changes.\r\n\r\nFigure 2 - My entries sheet in the Google Sheet Workbook\r\nText Blocks Sheet\r\nYou may also want to include different aside(s) in your CV. These are specified in the text_blocks sheet of the google sheets document.\r\nHere is what my text_blocks sheet looks like after my changes. The aside(s) are tailored to the sections I have included on the entries sheet.\r\n\r\nFigure 3 - My text_blocks sheet in the Google Sheet Workbook\r\n\r\nThis is an aside, which renders in the gutter of an article. Your asides will render in the gutter of your html and pdf CV.\r\nContact and Languages\r\nThese are the other 2 sheets which need to be personalised with your info.\r\nCreate skeleton project\r\nCreate a folder in an appropriate location on your machine, which will house the files of your CV.\r\nI like working in an R project. If you’d like to do the same, open RStudio, and create a project in that “Existing folder” you created in step 1 (File -> New Project -> Existing Directory)\r\nRun something similar to the below in your console window, after replacing the names with yours, and also replacing the data_location with the location of where your data is housed (i.e. the URL of your copy of the google sheet data).\r\n\r\n\r\ndatadrivencv::use_datadriven_cv(\r\n     full_name = \"Nelson Mandela\",\r\n     data_location = \"https://docs.google.com/spreadsheets/d/1_6fzNA6MwDSjUBXjjV7ThJfKEYj8xxJO9i09IV1cVVY/edit#gid=917338460\",\r\n     pdf_location = here::here(\"nelson-mandela.pdf\"),\r\n     html_location = here::here(),\r\n     source_location = here::here()\r\n )\r\n \r\n\r\n\r\nThis creates a few files in your folder, the most important ones being cv.rmd, cv_printing_functions.r and render_cv.r.\r\ncv.rmd contains the flow of your CV, this is the file which you amend as you need, for example, if I wanted to add a Community Building section I would do so in this file.\r\ncv_printing_functions.r contains the code to print your CV. This is generally not amended, but I did make a few amendments which I will show in the course of the tutorial.\r\nrender_cv.r renders both the html and pdf versions of your CV when it is run (sourced).\r\n\r\ncv.rmd\r\nIn cv.rmd you will set out the flow of your CV.\r\nHere, for example is where I added the Born section, and any other sections which were particular to my entries sheet.\r\n    Born {data-icon=superpowers data-concise=true}\r\n  --------------------------------------------------------------------------------\r\n\r\n  ```{r}\r\n  CV %<>% print_section('born')\r\n  ```\r\nI also amended certain sections I had re-named. All in all this should talk to your entries sections, and the text_blocks names (stored in column loc) for your asides.\r\n\r\nFigure 4 - My Google Sheet entries for the community_positions section\r\n\r\nFigure 5 - My Google Sheet text_blocks for the community_positions section\r\n\r\nFigure 6 - The “Community Experience” section in the cv.rmd file\r\n\r\nSome other things you might want to do here is change the data-icon part. For example, I wanted a superhero icon for the Born section so I searched fontawesome for something like that. It doesn’t work all the time, and I have not dug into the reason behind why some icons are not rendering. For example, searching for hero gives the option of a mask but making data-icon=mask does not render.\r\n\r\nFigure 7 - fontawesome search for “superpower”\r\n\r\nFigure 8 - fontawesome search for “graduate”\r\n\r\nYou may need to add line breaks to align your CV nicely. To do this add a <br> in the cv.rmd file to space sections out to your liking.\r\n<br>\r\n<br>\r\ncv_printing_functions.r\r\nThere is not much to do in this file. If you want to keep your Google sheet private there is something you need to do, but we’ll get into that later.\r\nIn Nick’s data you will see that the loc column contains the university or company, and the institution column contains the actual physical place.\r\n\r\nFigure 9 - Nick’s location and institution entries\r\nI did it the opposite, that is, for loc I captured the physical place on earth, whereas institution I captured ANC etc.\r\n\r\nFigure 10 - My location and institution entries are swopped\r\nSo I needed to amend the print_section() function in this file. I switched the {loc} and {institution} positions in the glue_template.\r\n\r\nFigure 11 - The amended print_section() function in cv_printing_functions.r\r\nData for CV\r\nThe data for the CV may be housed in:\r\nA private Google Sheet file\r\nA public Google Sheet file\r\ncsv files on your local machine\r\nWorking with a Private Google Sheets File in R\r\nYou may prefer to keep your google sheet file private, and not have it publicly available for everyone to see.\r\nIn this case we need to authenticate for the R session.\r\n\r\n\r\ngooglesheets4::gs4_auth(email = \"test@gmail.com\")\r\n \r\n\r\n\r\nA new window will open in the browser asking you to allow “Tidyverse API Packages”, or similar, access to your Google Account. Allow the access so that you may read the google sheets in your R session.\r\nIn the R session you will be asked if information must be cached to a/certain/path/in/your/local/machine. I said yes to mine and set my options in the cv_printing_functions.r file to the cache specified, as follows:\r\n\r\n\r\noptions(\r\n        gargle_oauth_cache = \"C:/Users/vebashini/.R/gargle/gargle-oauth\"\r\n )\r\n \r\n\r\n\r\n\r\nFigure 12 - Authentication cache in cv_printing_functions.r\r\n\r\nIn the cv.rmd file only the pdf_mode parameter is present, but since we are keeping the Google sheet private we need to add another parameter sheet_is_publicly_readable and set it to false.\r\nparams:\r\n  pdf_mode:\r\n    value: true\r\n  sheet_is_publicly_readable:\r\n    value: false\r\n\r\nFigure 13 - sheet_is_publicly_readable Parameter needed in the cv.rmd file\r\n\r\nWe want to pass this parameter into the create_CV_object() function so we amend it as well.\r\n\r\nFigure 14 - Parameter needed in the create_CV_object() function too\r\n\r\nWorking with a Public Google Sheets File in R\r\nIf you’re okay to keep your Google Sheet public you need to Share your sheet by specifying that “Anyone with the link” may View the google sheet.\r\n\r\nFigure 15 - Allow your Google Sheet to be viewed by anyone with the link\r\nThere is no need to add the sheet_is_publicly_readable to your parameter list in cv.rmd.\r\nThe sheet_is_publicly_readable parameter is TRUE by default and hence the googlesheets4::sheets_deauth() will be run.\r\n\r\nFigure 16 - Sharing the Google sheet with public access means that the R session can work without authentication\r\nWorking with csvs\r\nIf you want you can also download the Google sheet data as an Excel file on your machine and amend it there.\r\nTo create csvs from the Excel file you can run something like this:\r\n\r\n\r\nlibrary(readxl)\r\nlibrary(readr)\r\n\r\nentries <- read_xlsx(\"csvs/madiba_cv_data.xlsx\", sheet = 1)\r\nlanguage <- read_xlsx(\"csvs/madiba_cv_data.xlsx\", sheet = 2)\r\ntext_blocks <- read_xlsx(\"csvs/madiba_cv_data.xlsx\", sheet = 3)\r\ncontact <- read_xlsx(\"csvs/madiba_cv_data.xlsx\", sheet = 4)\r\n\r\nwrite_csv(entries, \"csvs/entries.csv\")\r\nwrite_csv(language, \"csvs/language_skills.csv\")\r\nwrite_csv(text_blocks, \"csvs/text_blocks.csv\")\r\nwrite_csv(contact, \"csvs/contact_info.csv\")\r\n\r\n\r\n\r\nThe Google Sheets method is better because every amendment you make on the Excel workbook will mean re-running this code 😨!\r\nYou will also need to make the data_location argument in the create_CV_object() (in cv.rmd) be the folder where your csvs are located.\r\n\r\nFigure 17 - Amend the data_location argument in the create_CV_object() function\r\nRender your CV\r\nFinally you’re all set to be able to render your CV!\r\nTo do this you source the render_cv.r file.\r\nsource('C:/Work/Learning/madiba-cv/render_cv.r')\r\nIf you want to host the html version of your CV as a static site (say on GitHub Pages, or Netlify) you should make one amendment in this file.\r\nChange the output file in your HTML rendering call from cv.html to index.html.\r\n\r\nFigure 18 - Amend the output_file argument to be index.html\r\nHost Online\r\nPush your files to GitHub.\r\nIn the Settings Page navigate to GitHub Pages section and fill in the source as your branch, and the folder as root.\r\nYour site will be published with a URL (it may take a few minutes to render so try again after a few minutes if you experience a 404 error).\r\n\r\nFigure 19 - Setup the GitHub Pages to host your CV online\r\nAppendices\r\n{datadrivencv} GitHub site as well as documentation.\r\nNick’s blog post.\r\nNick’s CV.\r\nConnecting to Google Sheets.\r\nGoogle Sheets Authentication, also {gargle}.\r\nMock CV Files\r\nThe mock CV source files can be found here.\r\nThe html finished product is here.\r\nNote: I amended the Google Sheet to be public and amended the code to use a “public” file so an audience can see all the components.\r\nPackages used\r\nIn this post the main packages we used are the following:\r\n\r\n\r\nlibrary(datadrivencv)\r\nlibrary(googlesheets4)\r\nlibrary(pagedown)\r\nlibrary(magrittr)\r\nlibrary(readxl)\r\nlibrary(readr)\r\nlibrary(knitr)\r\nlibrary(glue)\r\nlibrary(gargle)\r\nlibrary(here)\r\n\r\n\r\n\r\nMost of these are installed as part of the install of {datadrivencv}.\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-04-16-datadrivencv-of-the-best-troublemaker/preview.jpg",
    "last_modified": "2021-11-27T14:08:00+02:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-03-27-sql-in-rmarkdown/",
    "title": "sql-in-rmarkdown",
    "description": "We're going to mix {sql} and {r} code chunks in a .Rmd file to leverage our knowledge in both languages.",
    "author": [
      {
        "name": "Vebash Naidoo",
        "url": "https://twitter.com/Sciencificity"
      }
    ],
    "date": "2021-03-25",
    "categories": [
      "SQL",
      "RMarkdown",
      "databases"
    ],
    "contents": "\r\n\r\nContents\r\nLeveraging RMarkdown\r\nPrerequisites\r\nDataset\r\nGlimpse into the Data\r\n\r\nWrite data to a SQLite DB\r\nConnect to the Database\r\nCode Chunks\r\nAdding SQL Code chunks\r\nUsing Your SQL Knowledge\r\nPassing data between code blocks\r\nCleaning Up\r\n\r\nThe {tidyquery} package\r\ntidyquery::query()\r\ntidyquery::show_dplyr()\r\nToggle to {dplyr} from SQL\r\n\r\nPackages used\r\nResources\r\n\r\n\r\n\r\n\r\n\r\n\r\nLeveraging RMarkdown\r\nRMarkdown (Rmd) allows code chunks of different language types besides R.\r\nFor example, we can have normal R code blocks (created on a Windows machine using the shortcut Ctrl + Alt + i), Python code blocks, and even SQL code blocks (created using the Insert code chunk button, or by hand 😄).\r\n\r\nIn this post we’re going to write SQL syntax and intertwine that with R code to enable you to use both, if you are familiar with both.\r\nWe will also look at the {tidyquery} package which allows you to learn {dplyr} if you’re more familiar with SQL, but keen to grasp more {dplyr}.\r\nPrerequisites\r\nThe blog post assumes that you have at least a beginner understanding of:\r\nRMarkdown\r\nSQL\r\nTidyverse\r\nConnecting to a DB from RStudio (see Part I, Part II or Part III for more info).\r\nDataset\r\nIn my home, my 6 year old is currently obsessed with Ticket to Ride Europe, so I was excited when I saw the TidyTuesday Transit Costs Project data 🚂.\r\nGlimpse into the Data\r\nTo work with a Database in R we need a few packages. There are a few blog posts on this site that contains more info on how this is achieved, for example, Using the Tidyverse with Databases - Part I.\r\n\r\n\r\nlibrary(DBI) # main DB interface\r\nlibrary(RSQLite) # To connect to SQLite DB\r\nlibrary(tidyverse) # for dplyr, readr etc.\r\nlibrary(dbplyr) # dplyr backend for DBs\r\n\r\n\r\n\r\n\r\n\r\n# read in the TidyTuesday dataset\r\ntransit_cost <- readr::read_csv(glue::glue('https://raw.githubusercontent.com/',\r\n'rfordatascience/tidytuesday/master/data/',\r\n'2021/2021-01-05/transit_cost.csv'))\r\ntransit_cost %>%\r\n  head(20) %>%\r\n  DT::datatable(list(scrollX = TRUE,\r\n                     pageLength = 5))\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\"],[7136,7137,7138,7139,7144,7145,7146,7147,7152,7153,7154,7155,7160,7161,7162,7163,7168,7169,7170,7171],[\"CA\",\"CA\",\"CA\",\"CA\",\"CA\",\"NL\",\"CA\",\"US\",\"US\",\"US\",\"US\",\"US\",\"US\",\"US\",\"CA\",\"US\",\"BG\",\"BG\",\"BG\",\"BG\"],[\"Vancouver\",\"Toronto\",\"Toronto\",\"Toronto\",\"Toronto\",\"Amsterdam\",\"Montreal\",\"Seattle\",\"Los Angeles\",\"Los Angeles\",\"Los Angeles\",\"Los Angeles\",\"San Francisco\",\"Boston\",\"Ottawa\",\"San Jose\",\"Sofia\",\"Sofia\",\"Sofia\",\"Sofia\"],[\"Broadway\",\"Vaughan\",\"Scarborough\",\"Ontario\",\"Yonge to Richmond Hill\",\"North-South\",\"Blue Line extension\",\"U-Link\",\"Purple Phase 3\",\"Purple Phase 2\",\"Purple Phase 1\",\"Regional Connector\",\"Central Subway\",\"Green Line Extension\",\"Confederation\",\"BART\",\"Line 1 northern\",\"Line 1 southern\",\"Line 2\",\"Line 2 extension\"],[\"2020\",\"2009\",\"2020\",\"2020\",\"2020\",\"2003\",\"2020\",\"2009\",\"2020\",\"2018\",\"2014\",\"2014\",\"2010\",\"2012\",\"2013\",\"2022\",\"2009\",\"2013\",\"2008\",\"2012\"],[\"2025\",\"2017\",\"2030\",\"2030\",\"2030\",\"2018\",\"2026\",\"2016\",\"2027\",\"2026\",\"2023\",\"2022\",\"2021\",\"2021\",\"2019\",\"2030\",\"2012\",\"2015\",\"2012\",\"2016\"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[5.7,8.6,7.8,15.5,7.4,9.7,5.8,5.1,4.2,4.2,6.3,3.1,2.7,7.6,12.5,9.6,5.1,3,17,1.3],[\"87.72%\",\"100.00%\",\"100.00%\",\"57.00%\",\"100.00%\",\"73.00%\",\"100.00%\",\"100.00%\",\"100.00%\",\"100.00%\",\"100.00%\",\"100.00%\",\"100.00%\",\"0.00%\",\"20.00%\",\"83.00%\",\"60.00%\",\"100.00%\",\"90.00%\",\"100.00%\"],[5,8.6,7.8,8.8,7.4,7.1,5.8,5.1,4.2,4.2,6.3,3.1,2.7,0,2.5,8,3.1,3,15.3,1.3],[6,6,3,15,6,8,5,2,2,2,3,3,4,7,13,4,4,3,11,1],[\"Plan\",\"Media\",\"Wiki\",\"Plan\",\"Plan\",\"Wiki\",\"Media\",\"Media\",\"Media\",\"Trade\",\"Media\",\"Plan\",\"Media\",\"Plan\",\"Trade\",\"Plan\",\"Measured\",\"Media\",\"Trade\",\"Media\"],[2830,3200,5500,8573,5600,3100,4500,1756,3600,2400,2800,1756,1670,2289,2100,6900,407,44,952,21],[\"CAD\",\"CAD\",\"CAD\",\"CAD\",\"CAD\",\"EUR\",\"CAD\",\"USD\",\"USD\",\"USD\",\"USD\",\"USD\",\"USD\",\"USD\",\"CAD\",\"USD\",\"BGN\",\"EUR\",\"EUR\",\"EUR\"],[2018,2013,2018,2019,2020,2009,2018,2012,2023,2021,2018,2018,2014,2020,2016,2026,2010,2014,2010,2014],[0.84,0.81,0.84,0.84,0.84,1.3,0.84,1,1,1,1,1,1,1,0.83,1,1.69,3.32,3.32,3.32],[\"2377.2\",\"2592\",\"4620\",\"7201.32\",\"4704\",\"4030\",\"3780\",\"1756\",\"3600\",\"2400\",\"2800\",\"1756\",\"1670\",\"2289\",\"1743\",\"6900\",\"687.83\",\"146.08\",\"3160.64\",\"69.72\"],[417.0526316,301.3953488,592.3076923,464.6012903,635.6756757,415.4639175,651.7241379,344.3137255,857.1428571,571.4285714,444.4444444,566.4516129,618.5185185,301.1842105,139.44,718.75,134.8686275,48.69333333,185.92,53.63076923],[\"Media\",\"Media\",\"Media\",\"Plan\",\"Media\",\"Media\",\"Media\",\"Plan\",\"Media\",\"Trade\",\"Media\",\"Plan\",\"Media\",\"Plan\",\"Trade\",\"Plan\",\"Media\",\"Media\",\"Trade\",\"Media\"],[\"https://www.translink.ca/Plans-and-Projects/Rapid-Transit-Projects/Broadway-Subway-Project.aspx\",\"https://www.thestar.com/news/gta/transportation/2017/12/15/trudeau-wynne-tory-on-hand-to-cut-ribbon-on-32-billion-subway-extension.html\",\"https://urbantoronto.ca/news/2020/03/metrolinxs-preliminary-business-case-scarborough-subway-extension-raises-questions\",\"https://metrolinx.files.wordpress.com/2019/07/click-here-to-view-the-ontario-line-initial-business-case.pdf\",\"https://www.thestar.com/news/gta/2020/06/24/metrolinx-considering-a-route-for-the-yonge-subway-extension-to-richmond-hill-that-would-take-it-above-ground.html\",\"https://www.at5.nl/artikelen/184604/zaterdag-noordzuidlijn-eindelijk-open-de-opvallendste-feiten\",\"https://montrealgazette.com/news/local-news/montreal-metro-green-light-for-blue-line-extension\",\"https://www.soundtransit.org/sites/default/files/documents/2018-q3-link-light-rail_0.pdf\",\"https://la.streetsblog.org/2020/03/24/metro-signs-1-3-billion-full-funding-grant-agreement-for-westside-subway-phase-3/\",\"https://www.railjournal.com/in_depth/transit-projects-fly-in-the-city-of-angels\",\"https://la.streetsblog.org/2018/04/25/metro-celebrates-purple-line-extension-1-tunnel-machines-set-to-start-in-august/\",\"https://www.metro.net/projects/connector/\",\"https://www.sfchronicle.com/bayarea/article/Central-Subway-tab-likely-to-grow-by-55M-as-14447857.php\",\"https://www.ctps.org/data/pdf/plans/TIP/FFYs-2020-2024-Final-TIP-20190730.pdf\",\"https://www.aecom.com/projects/ottawa-light-rail/\",\"https://www.mercurynews.com/2020/07/19/with-costs-rising-for-bart-extension-critics-question-500m-plan-for-redundant-santa-clara-segment/\",\"https://www.novinite.com/articles/167648/Subway+Trains+to+Sofia+Airport+Start+Running+at+1+pm+on+April+2\",\"https://www.novinite.com/articles/168384/Subway+Extension+to+Business+Park+Sofia+Opens\",\"https://www.railway-technology.com/uncategorised/newsbulgaria-opens-sofia-metro-line-2/\",\"https://seenews.com/news/sofia-subway-launches-13-km-section-with-one-station-533330\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>e<\\/th>\\n      <th>country<\\/th>\\n      <th>city<\\/th>\\n      <th>line<\\/th>\\n      <th>start_year<\\/th>\\n      <th>end_year<\\/th>\\n      <th>rr<\\/th>\\n      <th>length<\\/th>\\n      <th>tunnel_per<\\/th>\\n      <th>tunnel<\\/th>\\n      <th>stations<\\/th>\\n      <th>source1<\\/th>\\n      <th>cost<\\/th>\\n      <th>currency<\\/th>\\n      <th>year<\\/th>\\n      <th>ppp_rate<\\/th>\\n      <th>real_cost<\\/th>\\n      <th>cost_km_millions<\\/th>\\n      <th>source2<\\/th>\\n      <th>reference<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"scrollX\":true,\"pageLength\":5,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,7,8,10,11,13,15,16,18]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"lengthMenu\":[5,10,25,50,100]}},\"evals\":[],\"jsHooks\":[]}\r\nIf we look at the data we see that Country is the 2-letter code CZ, DK, CH etc. We can use the {countrycode} package to find the actual country name.\r\nLet’s take a look at a few of the variables included in the countrycode::codelist dataframe.\r\n\r\n\r\nlibrary(countrycode)\r\ncodelist %>%\r\n  select(country.name.en,\r\n         country.name.en.regex,\r\n         iso.name.en,\r\n         currency,\r\n         iso2c, iso3c)\r\n\r\n\r\n# A tibble: 288 x 6\r\n   country.name.en   country.name.en~ iso.name.en currency iso2c iso3c\r\n   <chr>             <chr>            <chr>       <chr>    <chr> <chr>\r\n 1 Afghanistan       afghan           Afghanistan Afghani  AF    AFG  \r\n 2 Åland Islands     ^[å|a]land       Åland Isla~ Euro     AX    ALA  \r\n 3 Albania           albania          Albania     Lek      AL    ALB  \r\n 4 Algeria           algeria          Algeria     Algeria~ DZ    DZA  \r\n 5 American Samoa    ^(?=.*americ).*~ American S~ US Doll~ AS    ASM  \r\n 6 Andorra           andorra          Andorra     Euro     AD    AND  \r\n 7 Angola            angola           Angola      Kwanza   AO    AGO  \r\n 8 Anguilla          anguill?a        Anguilla    East Ca~ AI    AIA  \r\n 9 Antarctica        antarctica       Antarctica  <NA>     AQ    ATA  \r\n10 Antigua & Barbuda antigua          Antigua an~ East Ca~ AG    ATG  \r\n# ... with 278 more rows\r\n\r\nIf you try the countrycode::countrycode() function you will get a warning for UK in the transit_cost dataset. This is because the United Kingdom is coded as GB not UK. So we need to amend our dataset first before we try and use the function.\r\n\r\n\r\ntransit_cost %>%\r\n  # rename UK as GB to enable\r\n  # the join later\r\n  mutate(country = if_else(country == \"UK\",\r\n            \"GB\",\r\n            country)) %>%\r\n  mutate(country_name = countrycode(country, origin = 'iso2c',\r\n                                    destination = \"country.name\")) %>%\r\n  count(country, country_name, sort = TRUE) %>%\r\n    DT::datatable(list(scrollX = TRUE,\r\n                     pageLength = 8))\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\",\"51\",\"52\",\"53\",\"54\",\"55\",\"56\",\"57\"],[\"CN\",\"IN\",\"TR\",\"ES\",\"FR\",\"JP\",\"DE\",\"US\",\"TW\",\"IT\",\"CA\",\"SA\",\"TH\",\"EG\",null,\"BG\",\"KR\",\"RU\",\"SE\",\"VN\",\"AU\",\"GR\",\"PH\",\"PL\",\"UZ\",\"AE\",\"AT\",\"BD\",\"BR\",\"CH\",\"GB\",\"IR\",\"PA\",\"SG\",\"UA\",\"BH\",\"CL\",\"FI\",\"IL\",\"MX\",\"MY\",\"NO\",\"PT\",\"AR\",\"BE\",\"CZ\",\"DK\",\"EC\",\"HU\",\"ID\",\"KW\",\"NL\",\"NZ\",\"PE\",\"PK\",\"QA\",\"RO\"],[\"China\",\"India\",\"Turkey\",\"Spain\",\"France\",\"Japan\",\"Germany\",\"United States\",\"Taiwan\",\"Italy\",\"Canada\",\"Saudi Arabia\",\"Thailand\",\"Egypt\",null,\"Bulgaria\",\"South Korea\",\"Russia\",\"Sweden\",\"Vietnam\",\"Australia\",\"Greece\",\"Philippines\",\"Poland\",\"Uzbekistan\",\"United Arab Emirates\",\"Austria\",\"Bangladesh\",\"Brazil\",\"Switzerland\",\"United Kingdom\",\"Iran\",\"Panama\",\"Singapore\",\"Ukraine\",\"Bahrain\",\"Chile\",\"Finland\",\"Israel\",\"Mexico\",\"Malaysia\",\"Norway\",\"Portugal\",\"Argentina\",\"Belgium\",\"Czechia\",\"Denmark\",\"Ecuador\",\"Hungary\",\"Indonesia\",\"Kuwait\",\"Netherlands\",\"New Zealand\",\"Peru\",\"Pakistan\",\"Qatar\",\"Romania\"],[253,29,20,15,15,15,13,13,12,11,10,9,8,7,7,6,6,5,5,5,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>country<\\/th>\\n      <th>country_name<\\/th>\\n      <th>n<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"scrollX\":true,\"pageLength\":8,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":3},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"lengthMenu\":[8,10,25,50,100]}},\"evals\":[],\"jsHooks\":[]}\r\nNow we can see which country is attached to which iso2 code, DK = Denmark, CN = China etc.\r\nThe codelist dataframe contains the raw data for countries as we saw previously.\r\n\r\n\r\nShow code\r\n\r\ncodelist %>% \r\n  head(4)\r\n\r\n\r\n# A tibble: 4 x 743\r\n  ar5      cctld continent country.name.de country.name.de.regex\r\n  <chr>    <chr> <chr>     <chr>           <chr>                \r\n1 ASIA     .af   Asia      Afghanistan     afghan               \r\n2 OECD1990 .ax   Europe    Aland Islands   åland                \r\n3 EIT      .al   Europe    Albanien        albanien             \r\n4 MAF      .dz   Africa    Algerien        algerien             \r\n# ... with 738 more variables: country.name.en <chr>,\r\n#   country.name.en.regex <chr>, cow.name <chr>, cowc <chr>,\r\n#   cown <dbl>, currency <chr>, dhs <chr>, ecb <chr>, eu28 <chr>,\r\n#   eurocontrol_pru <chr>, eurocontrol_statfor <chr>, eurostat <chr>,\r\n#   fao <dbl>, fips <chr>, gaul <dbl>, genc2c <chr>, genc3c <chr>,\r\n#   genc3n <chr>, gwc <chr>, gwn <dbl>, icao.region <chr>, imf <dbl>,\r\n#   ioc <chr>, iso.name.en <chr>, iso.name.fr <chr>, iso2c <chr>, ...\r\n\r\nWrite data to a SQLite DB\r\nWe’re going to write the transit_cost and codelist dataframes into tables in a SQLite DB for our demo.\r\n\r\n\r\n# Make a connection to a non-existant\r\n# DB - here the DB `ticket_to_ride` does\r\n# not yet exist.\r\n# This step creates it.\r\ncon <- DBI::dbConnect(RSQLite::SQLite(), \r\n        dbname = \"ticket_to_ride.sqlite\")\r\n\r\n\r\n\r\n\r\n\r\n# Amend UK to GB for the join of country names later\r\ntransit_cost <- transit_cost %>%\r\n  mutate(country = if_else(country == \"UK\",\r\n            \"GB\",\r\n            country))\r\n\r\n# rename to an easy to understand SQL table name\r\ncountry_codes <- codelist\r\n\r\n# Write dataframes into DB tables \r\ndbWriteTable(con,\r\n    \"transit_cost\", # table will be named transit_cost\r\n    transit_cost, # df being written\r\n    overwrite = TRUE)\r\ndbWriteTable(con, \r\n    \"country_codes\", # table will be named country_codes\r\n    country_codes, # df being written \r\n    overwrite = TRUE)\r\n\r\n# close the connection\r\ndbDisconnect(con)\r\n\r\n\r\n\r\nI closed the connection here since the tasks of writing data into a Database, and reading from it, are most likely separate.\r\nIn this blog post these functions run into each other, and we don’t strictly need to do this dbDisconnect(con) here.\r\nConnect to the Database\r\nNow that we have a SQLite DB, we can connect to it and query the data we have stored there.\r\n\r\n\r\n# Make a connection\r\nttr_con <- dbConnect(RSQLite::SQLite(), \"ticket_to_ride.sqlite\")\r\n# List tables in DB\r\ndbListTables(ttr_con)\r\n\r\n\r\n[1] \"country_codes\" \"transit_cost\" \r\n\r\nAh nice, we see our two tables. Let’s have a closer look.\r\n\r\n\r\n# Get a glimpse of the data\r\n\r\n# Using our connection reach into the DB\r\n# and show us some of the data for GR\r\n\r\n# Equivalent to:\r\n#   SELECT * FROM transit_cost\r\n#   WHERE country = 'GR'\r\ntbl(ttr_con, \"transit_cost\") %>%\r\n  filter(country == \"GR\")\r\n\r\n\r\n# Source:   lazy query [?? x 20]\r\n# Database: sqlite 3.36.0 [C:\\Users\\Vebashini\\OneDrive -\r\n#   Rain\\Documents\\Main-Documents\\Personal\\Blog_Vebash\\_posts\\2021-03-27-sql-in-rmarkdown\\ticket_to_ride.sqlite]\r\n      e country city         line     start_year end_year    rr length\r\n  <dbl> <chr>   <chr>        <chr>    <chr>      <chr>    <dbl>  <dbl>\r\n1  7313 GR      Athens       Line 4   2019       2027         0   12.8\r\n2  7314 GR      Athens       Line 3 ~ 2012       2021         0    7.6\r\n3  7315 GR      Thessaloniki Main li~ 2006       2020         0    9.5\r\n4  7320 GR      Thessaloniki Kalamar~ 2013       2021         0    4.8\r\n# ... with 12 more variables: tunnel_per <chr>, tunnel <dbl>,\r\n#   stations <dbl>, source1 <chr>, cost <dbl>, currency <chr>,\r\n#   year <dbl>, ppp_rate <dbl>, real_cost <chr>,\r\n#   cost_km_millions <dbl>, source2 <chr>, reference <chr>\r\n\r\nCode Chunks\r\nAll our code chunks have thus far been r code chunks:\r\n```{r}\r\n# Do some processing\r\n```\r\nFor example, to filter the Greece transit data in the dataset, we used the code chunk:\r\n```{r}\r\n# Get a glimpse of the data\r\ntbl(ttr_con, \"transit_cost\") %>%\r\n  filter(country == \"GR\")\r\n```\r\nAdding SQL Code chunks\r\nTo add a SQL code chunk we can use the Insert a new code chunk drop down item. But a SQL code chunk also needs one additional argument - the connection object which represents the connection to the database.\r\n```{sql, connection = con}\r\n# Do some processing\r\n```\r\nLet’s try it.\r\n```{sql, connection = ttr_con} \r\n-- This is a SQL comment\r\n-- Notice our connection is the ttr_con we established\r\n-- in the {r} code chunk earlier.\r\n\r\nSELECT * \r\nFROM transit_cost\r\nWHERE country = 'GR'\r\nLIMIT 10\r\n```\r\nThere is even syntax highlighting in the {sql, connection = ttr_con} code blocks.\r\n\r\n\r\n\r\nShow code\r\n-- This is a SQL comment\r\n-- Notice our connection is the ttr_con we established\r\n-- in the {r} code chunk earlier.\r\n\r\nSELECT * \r\nFROM transit_cost\r\nWHERE country = 'GR'\r\nLIMIT 10\r\n\r\nTable 1: 4 records\r\ne\r\ncountry\r\ncity\r\nline\r\nstart_year\r\nend_year\r\nrr\r\nlength\r\ntunnel_per\r\ntunnel\r\nstations\r\nsource1\r\ncost\r\ncurrency\r\nyear\r\nppp_rate\r\nreal_cost\r\ncost_km_millions\r\nsource2\r\nreference\r\n7313\r\nGR\r\nAthens\r\nLine 4\r\n2019\r\n2027\r\n0\r\n12.8\r\n100.00%\r\n12.8\r\n15\r\nPlan\r\n1328\r\nEUR\r\n2023\r\n1.3\r\n1726.4\r\n134.8750\r\nPlan\r\nhttps://www.ametro.gr/?p=14801&lang=en\r\n7314\r\nGR\r\nAthens\r\nLine 3 to Piraeus\r\n2012\r\n2021\r\n0\r\n7.6\r\n100.00%\r\n7.6\r\n6\r\nPlan\r\n742\r\nEUR\r\n2016\r\n1.3\r\n964.6\r\n126.9211\r\nPlan\r\nhttps://www.ametro.gr/wp-content/uploads/2018/08/AM_Xrimatooikonomikes_katastaseis_2017.pdf\r\n7315\r\nGR\r\nThessaloniki\r\nMain line\r\n2006\r\n2020\r\n0\r\n9.5\r\n100.00%\r\n9.5\r\n13\r\nPlan\r\n1112\r\nEUR\r\n2014\r\n1.3\r\n1445.6\r\n152.1684\r\nPlan\r\nhttps://omekgroup.com.gr/projects/thessaloniki-metro/\r\n7320\r\nGR\r\nThessaloniki\r\nKalamaria Extension\r\n2013\r\n2021\r\n0\r\n4.8\r\n100.00%\r\n4.8\r\n5\r\nPlan\r\n567\r\nEUR\r\n2017\r\n1.3\r\n737.1\r\n153.5625\r\nPlan\r\nhttps://www.ametro.gr/wp-content/uploads/2018/08/AM_Xrimatooikonomikes_katastaseis_2017.pdf\r\n\r\n\r\nThe connection is the one we established earlier, in an {r} code chunk, shown again below.\r\n```{r}  \r\n# Make a connection\r\nttr_con <- dbConnect(RSQLite::SQLite(), \"ticket_to_ride.sqlite\")\r\n# List tables in DB\r\ndbListTables(ttr_con)\r\n```\r\nThe SQL code chunk uses a different character for comments. The -- (double dashes) is a SQL comment marker, whereas the # (hash / pound symbol / octothorpe) is used for R and Python comments.\r\n```{sql, connection = ttr_con} \r\n-- This is a SQL comment\r\n-- Notice our connection is the ttr_con we established\r\n-- in the {r} code chunk earlier.\r\n\r\n-- Do some processing ...\r\n\r\n```\r\nUsing Your SQL Knowledge\r\nLet’s use SQL to get a few columns of the transit_cost table for Denmark (DK) and Turkey (TR). My kid’s favourite route in Ticket to Ride is Kobenhavn-Erzurum so he can use the high scoring tunnel, which gets him 21 points 🙌!\r\n```{sql, connection = ttr_con} \r\nSELECT country\r\n, city\r\n, start_year\r\n, end_year\r\n, cost_km_millions\r\n, AVG(cost_km_millions) OVER (PARTITION BY country) AS avg_cost_km\r\n, MAX(cost_km_millions) OVER (PARTITION BY country) AS max_cost_km\r\nFROM transit_cost\r\nWHERE country IN ('DK', 'TR')\r\nORDER BY country, start_year\r\n```\r\n\r\n\r\nShow code\r\nSELECT country\r\n, city\r\n, start_year\r\n, end_year\r\n, cost_km_millions\r\n, AVG(cost_km_millions) OVER (PARTITION BY country) AS avg_cost_km\r\n, MAX(cost_km_millions) OVER (PARTITION BY country) AS max_cost_km\r\nFROM transit_cost\r\nWHERE country IN ('DK', 'TR')\r\nORDER BY start_year, country\r\n\r\nTable 2: Displaying records 1 - 10\r\ncountry\r\ncity\r\nstart_year\r\nend_year\r\ncost_km_millions\r\navg_cost_km\r\nmax_cost_km\r\nTR\r\nIstanbul\r\n1992\r\n2015\r\n117.5800\r\n107.9630\r\n262.4200\r\nTR\r\nIzmir\r\n1995\r\n2000\r\n103.4500\r\n107.9630\r\n262.4200\r\nTR\r\nBursa\r\n1997\r\n2014\r\n22.8800\r\n107.9630\r\n262.4200\r\nTR\r\nAnkara\r\n2003\r\n2017\r\n119.3100\r\n107.9630\r\n262.4200\r\nTR\r\nIstanbul\r\n2004\r\n2013\r\n206.2500\r\n107.9630\r\n262.4200\r\nTR\r\nIstanbul\r\n2005\r\n2012\r\n100.9000\r\n107.9630\r\n262.4200\r\nTR\r\nIzmir\r\n2005\r\n2014\r\n51.8100\r\n107.9630\r\n262.4200\r\nTR\r\nIstanbul\r\n2006\r\n2013\r\n136.4500\r\n107.9630\r\n262.4200\r\nDK\r\nCopenhagen\r\n2009\r\n2019\r\n225.2516\r\n225.2516\r\n225.2516\r\nTR\r\nIzmir\r\n2010\r\n2012\r\n47.1100\r\n107.9630\r\n262.4200\r\n\r\n\r\nPassing data between code blocks\r\nWe can also pass data between code blocks by using the ouput.var variable in a code block.\r\nFor example, below we use a SQL query (in a {sql, connection = ttr_con} code block) but the result is stored in a variable which is subsequently used in an {r} code chunk. How cool is that! 😎 💪\r\n```{sql, connection = ttr_con,  output.var = \"transit_subset\"} \r\n-- output stored in transit_subset\r\nSELECT country\r\n, city\r\n, start_year\r\n, end_year\r\n, cost_km_millions\r\nFROM transit_cost\r\n```\r\n\r\n\r\nShow code\r\n-- output stored in transit_subset\r\nSELECT country\r\n, city\r\n, start_year\r\n, end_year\r\n, cost_km_millions\r\nFROM transit_cost\r\n\r\nWhen we store the data in a variable the SQL query is executed on the DB and the output stored in the variable. As a result we don’t see the results of the query as output from the code chunk, as we have seen previously.\r\nNow let’s use the transit_subset variable in an {r} code chunk, to see how many transit lines the country has.\r\n```{r} \r\ntransit_subset %>% \r\n  count(country, sort = TRUE) %>%\r\n    DT::datatable(list(scrollX = TRUE,\r\n                     pageLength = 8))\r\n```\r\n\r\n\r\nShow code\r\n\r\ntransit_subset %>% \r\n  count(country, sort = TRUE) %>%\r\n    DT::datatable(list(scrollX = TRUE,\r\n                     pageLength = 8))\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\",\"51\",\"52\",\"53\",\"54\",\"55\",\"56\",\"57\"],[\"CN\",\"IN\",\"TR\",\"ES\",\"FR\",\"JP\",\"DE\",\"US\",\"TW\",\"IT\",\"CA\",\"SA\",\"TH\",\"EG\",null,\"BG\",\"KR\",\"RU\",\"SE\",\"VN\",\"AU\",\"GR\",\"PH\",\"PL\",\"UZ\",\"AE\",\"AT\",\"BD\",\"BR\",\"CH\",\"GB\",\"IR\",\"PA\",\"SG\",\"UA\",\"BH\",\"CL\",\"FI\",\"IL\",\"MX\",\"MY\",\"NO\",\"PT\",\"AR\",\"BE\",\"CZ\",\"DK\",\"EC\",\"HU\",\"ID\",\"KW\",\"NL\",\"NZ\",\"PE\",\"PK\",\"QA\",\"RO\"],[253,29,20,15,15,15,13,13,12,11,10,9,8,7,7,6,6,5,5,5,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>country<\\/th>\\n      <th>n<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"scrollX\":true,\"pageLength\":8,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":2},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"lengthMenu\":[8,10,25,50,100]}},\"evals\":[],\"jsHooks\":[]}\r\nHow about if we want to use {dplyr} to get the average cost per km in millions of dollars, for Denmark and Turkey as we did in the SQL code previously?\r\n```{r} \r\ntransit_subset %>% \r\n  filter(country %in% c('DK', 'TR')) %>% \r\n  group_by(country) %>% \r\n  mutate(avg_cost_km = mean(cost_km_millions, na.rm = TRUE)) %>% \r\n  ungroup()\r\n```\r\n\r\n\r\nShow code\r\n\r\ntransit_subset %>% \r\n  filter(country %in% c('DK', 'TR')) %>% \r\n  group_by(country) %>% \r\n  mutate(avg_cost_km = mean(cost_km_millions, na.rm = TRUE)) %>% \r\n  ungroup()\r\n\r\n\r\n# A tibble: 21 x 6\r\n   country city       start_year end_year cost_km_millions avg_cost_km\r\n   <chr>   <chr>      <chr>      <chr>               <dbl>       <dbl>\r\n 1 DK      Copenhagen 2009       2019                225.         225.\r\n 2 TR      Istanbul   1992       2015                118.         108.\r\n 3 TR      Istanbul   2006       2013                136.         108.\r\n 4 TR      Istanbul   2005       2012                101.         108.\r\n 5 TR      Istanbul   2013       2016                 75.8        108.\r\n 6 TR      Istanbul   2011       2018                101.         108.\r\n 7 TR      Istanbul   2004       2013                206.         108.\r\n 8 TR      Istanbul   2011       2019                 47.4        108.\r\n 9 TR      Istanbul   2014       2022                113.         108.\r\n10 TR      Izmir      1995       2000                103.         108.\r\n# ... with 11 more rows\r\n\r\nOr what if we wanted to make a plot of the costs over time, for a few select countries.\r\n```{r} \r\ntransit_subset %>% \r\n  filter(country %in% c('IN', 'TR'),\r\n         !is.na(start_year)) %>% \r\n  ggplot(aes(start_year, \r\n             cost_km_millions, \r\n             fill = country)) +\r\n  geom_col() +\r\n  theme_light() +\r\n  theme(axis.text.x = element_text(angle = 45,\r\n                                   hjust = 1)) +\r\n  labs(x = \"\", \r\n       y = \"Cost per km ($millions)\",\r\n       title = \"Cost per km over the years for India and Turkey\")\r\n```\r\n\r\n\r\nShow code\r\n\r\ntransit_subset %>% \r\n  filter(country %in% c('IN', 'TR'),\r\n         !is.na(start_year)) %>% \r\n  ggplot(aes(start_year, \r\n             cost_km_millions, \r\n             fill = country)) +\r\n  geom_col() +\r\n  theme_light() +\r\n  theme(axis.text.x = element_text(angle = 45,\r\n                                   hjust = 1)) +\r\n  labs(x = \"\", \r\n       y = \"Cost per km ($millions)\",\r\n       title = \"Cost per km over the years for India and Turkey\")\r\n\r\n\r\n\r\n\r\nIt’s really empowering to flex both our R and SQL skills!\r\nWe are able to write quite complex SQL code in the {sql connection = ttr_con} code blocks, including joins, window functions etc.\r\nHere’s an example of a join in order to get the country name:\r\n```{sql, connection = ttr_con} \r\nSELECT t.country AS country_code\r\n, \"country.name.en\" AS country\r\n, t.city\r\n, t.currency\r\n, t.start_year\r\n, t.end_year\r\n, t.cost_km_millions\r\nFROM transit_cost t\r\nINNER JOIN country_codes c\r\nON t.country = c.iso2c\r\nLIMIT 10\r\n```\r\n\r\n\r\n\r\nShow code\r\nSELECT t.country AS country_code\r\n, \"country.name.en\" AS country\r\n, t.city\r\n, t.currency\r\n, t.start_year\r\n, t.end_year\r\n, t.cost_km_millions\r\nFROM transit_cost t\r\nINNER JOIN country_codes c\r\nON t.country = c.iso2c\r\nLIMIT 10\r\n\r\nTable 3: Displaying records 1 - 10\r\ncountry_code\r\ncountry\r\ncity\r\ncurrency\r\nstart_year\r\nend_year\r\ncost_km_millions\r\nCA\r\nCanada\r\nVancouver\r\nCAD\r\n2020\r\n2025\r\n417.0526\r\nCA\r\nCanada\r\nToronto\r\nCAD\r\n2009\r\n2017\r\n301.3953\r\nCA\r\nCanada\r\nToronto\r\nCAD\r\n2020\r\n2030\r\n592.3077\r\nCA\r\nCanada\r\nToronto\r\nCAD\r\n2020\r\n2030\r\n464.6013\r\nCA\r\nCanada\r\nToronto\r\nCAD\r\n2020\r\n2030\r\n635.6757\r\nNL\r\nNetherlands\r\nAmsterdam\r\nEUR\r\n2003\r\n2018\r\n415.4639\r\nCA\r\nCanada\r\nMontreal\r\nCAD\r\n2020\r\n2026\r\n651.7241\r\nUS\r\nUnited States\r\nSeattle\r\nUSD\r\n2009\r\n2016\r\n344.3137\r\nUS\r\nUnited States\r\nLos Angeles\r\nUSD\r\n2020\r\n2027\r\n857.1429\r\nUS\r\nUnited States\r\nLos Angeles\r\nUSD\r\n2018\r\n2026\r\n571.4286\r\n\r\n\r\nCleaning Up\r\nFinally we need to disconnect from the database, which we do in an {r} code chunk.\r\n```{r} \r\ndbDisconnect(con)\r\n```\r\n\r\n\r\nShow code\r\n\r\ndbDisconnect(con)\r\n\r\n\r\n\r\nThe {tidyquery} package\r\nWe can use a nifty package called {tidyquery} to query a dataframe as though it is a SQL table, with some limitations (for example, OVER clauses are not yet supported).\r\nFor the rest of the post the code that is in {r} code chunks.\r\ntidyquery::query()\r\nFirst up is the query(\"SELECT * FROM df_name\").\r\nThe function allows you to write SQL statements on an R data frame.\r\n\"SELECT * FROM\" is the familiar SQL syntax.\r\ndf_name is the data frame name in your code (we will use the transit_cost and country_codes data frames).\r\nNote: We called our tables in the DB by the same names, but we have closed the connection to the DB in the section prior to this.\r\n\r\n\r\nlibrary(tidyquery)\r\n# We have a df that is transit_cost in our environment\r\nclass(transit_cost)\r\n\r\n\r\n[1] \"spec_tbl_df\" \"tbl_df\"      \"tbl\"         \"data.frame\" \r\n\r\nglimpse(transit_cost)\r\n\r\n\r\nRows: 544\r\nColumns: 20\r\n$ e                <dbl> 7136, 7137, 7138, 7139, 7144, 7145, 7146, 7~\r\n$ country          <chr> \"CA\", \"CA\", \"CA\", \"CA\", \"CA\", \"NL\", \"CA\", \"~\r\n$ city             <chr> \"Vancouver\", \"Toronto\", \"Toronto\", \"Toronto~\r\n$ line             <chr> \"Broadway\", \"Vaughan\", \"Scarborough\", \"Onta~\r\n$ start_year       <chr> \"2020\", \"2009\", \"2020\", \"2020\", \"2020\", \"20~\r\n$ end_year         <chr> \"2025\", \"2017\", \"2030\", \"2030\", \"2030\", \"20~\r\n$ rr               <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~\r\n$ length           <dbl> 5.7, 8.6, 7.8, 15.5, 7.4, 9.7, 5.8, 5.1, 4.~\r\n$ tunnel_per       <chr> \"87.72%\", \"100.00%\", \"100.00%\", \"57.00%\", \"~\r\n$ tunnel           <dbl> 5.0, 8.6, 7.8, 8.8, 7.4, 7.1, 5.8, 5.1, 4.2~\r\n$ stations         <dbl> 6, 6, 3, 15, 6, 8, 5, 2, 2, 2, 3, 3, 4, 7, ~\r\n$ source1          <chr> \"Plan\", \"Media\", \"Wiki\", \"Plan\", \"Plan\", \"W~\r\n$ cost             <dbl> 2830, 3200, 5500, 8573, 5600, 3100, 4500, 1~\r\n$ currency         <chr> \"CAD\", \"CAD\", \"CAD\", \"CAD\", \"CAD\", \"EUR\", \"~\r\n$ year             <dbl> 2018, 2013, 2018, 2019, 2020, 2009, 2018, 2~\r\n$ ppp_rate         <dbl> 0.840, 0.810, 0.840, 0.840, 0.840, 1.300, 0~\r\n$ real_cost        <chr> \"2377.2\", \"2592\", \"4620\", \"7201.32\", \"4704\"~\r\n$ cost_km_millions <dbl> 417.05263, 301.39535, 592.30769, 464.60129,~\r\n$ source2          <chr> \"Media\", \"Media\", \"Media\", \"Plan\", \"Media\",~\r\n$ reference        <chr> \"https://www.translink.ca/Plans-and-Project~\r\n\r\nclass(country_codes)\r\n\r\n\r\n[1] \"tbl_df\"     \"tbl\"        \"data.frame\"\r\n\r\nAlright let’s see the query() function in action.\r\n\r\n\r\nquery(\r\n  \"SELECT country\r\n    , city\r\n    , start_year\r\n    , end_year\r\n    , cost_km_millions\r\n    FROM transit_cost\r\n    WHERE country IN ('DK', 'TR')\r\n    ORDER BY start_year, country ;\r\n  \"\r\n)\r\n\r\n\r\n# A tibble: 21 x 5\r\n   country city       start_year end_year cost_km_millions\r\n   <chr>   <chr>      <chr>      <chr>               <dbl>\r\n 1 TR      Istanbul   1992       2015                118. \r\n 2 TR      Izmir      1995       2000                103. \r\n 3 TR      Bursa      1997       2014                 22.9\r\n 4 TR      Ankara     2003       2017                119. \r\n 5 TR      Istanbul   2004       2013                206. \r\n 6 TR      Istanbul   2005       2012                101. \r\n 7 TR      Izmir      2005       2014                 51.8\r\n 8 TR      Istanbul   2006       2013                136. \r\n 9 DK      Copenhagen 2009       2019                225. \r\n10 TR      Izmir      2010       2012                 47.1\r\n# ... with 11 more rows\r\n\r\nWe get the results of our query on a data frame! 😮 😱\r\ntidyquery::show_dplyr()\r\nThe package also has a show_dplyr() function to let you see how to use {dplyr} verbs to get equivalent output as your SQL query ❣️ 🌠.\r\nCall show_dplyr()\r\nPass in a SQL query in \"\" as an argument.\r\n\r\n\r\nshow_dplyr(\r\n    \"SELECT country\r\n    , city\r\n    , start_year\r\n    , end_year\r\n    , cost_km_millions\r\n    FROM transit_cost\r\n    WHERE country IN ('DK', 'TR')\r\n    ORDER BY start_year, country ;\r\n  \"\r\n)\r\n\r\n\r\ntransit_cost %>%\r\n  filter(country %in% c(\"DK\", \"TR\")) %>%\r\n  select(country, city, start_year, end_year, cost_km_millions) %>%\r\n  arrange(start_year, country)\r\n\r\nWe get the {dplyr} pipeline!\r\nToggle to {dplyr} from SQL\r\nCopying and pasting this {dplyr} pipeline into an {r} code chunk results in the same output! Nice, eh? 🎉\r\n\r\n\r\ntransit_cost %>%\r\n  filter(country %in% c(\"DK\", \"TR\")) %>%\r\n  select(country, city, start_year, end_year, cost_km_millions) %>%\r\n  arrange(start_year, country)\r\n\r\n\r\n# A tibble: 21 x 5\r\n   country city       start_year end_year cost_km_millions\r\n   <chr>   <chr>      <chr>      <chr>               <dbl>\r\n 1 TR      Istanbul   1992       2015                118. \r\n 2 TR      Izmir      1995       2000                103. \r\n 3 TR      Bursa      1997       2014                 22.9\r\n 4 TR      Ankara     2003       2017                119. \r\n 5 TR      Istanbul   2004       2013                206. \r\n 6 TR      Istanbul   2005       2012                101. \r\n 7 TR      Izmir      2005       2014                 51.8\r\n 8 TR      Istanbul   2006       2013                136. \r\n 9 DK      Copenhagen 2009       2019                225. \r\n10 TR      Izmir      2010       2012                 47.1\r\n# ... with 11 more rows\r\n\r\n{tidyquery} can also do more complex querying.\r\n\r\n\r\nquery(\r\n  'SELECT t.country AS country_code\r\n  , country.name.en AS country_name\r\n  , COUNT(city) AS num_lines\r\n  FROM transit_cost t\r\n  INNER JOIN country_codes c\r\n  ON t.country = c.iso2c\r\n  GROUP BY t.country, country.name.en\r\n  HAVING num_lines >= 10\r\n  ORDER BY num_lines DESC\r\n  LIMIT 15\r\n  '\r\n)\r\n\r\n\r\n# A tibble: 11 x 3\r\n   country_code country_name  num_lines\r\n   <chr>        <chr>             <int>\r\n 1 CN           China               253\r\n 2 IN           India                29\r\n 3 TR           Turkey               20\r\n 4 ES           Spain                15\r\n 5 FR           France               15\r\n 6 JP           Japan                15\r\n 7 DE           Germany              13\r\n 8 US           United States        13\r\n 9 TW           Taiwan               12\r\n10 IT           Italy                11\r\n11 CA           Canada               10\r\n\r\n\r\n\r\nshow_dplyr(\r\n  'SELECT t.country AS country_code\r\n  , country.name.en AS country_name\r\n  , COUNT(city) AS num_lines\r\n  FROM transit_cost t\r\n  INNER JOIN country_codes c\r\n  ON t.country = c.iso2c\r\n  GROUP BY t.country, country.name.en\r\n  HAVING num_lines >= 10\r\n  ORDER BY num_lines DESC\r\n  LIMIT 15\r\n  '\r\n)\r\n\r\n\r\ntransit_cost %>%\r\n  inner_join(country_codes, by = c(country = \"iso2c\"), suffix = c(\".t\", \".c\"), na_matches = \"never\") %>%\r\n  rename(t.currency = \"currency.t\", c.currency = \"currency.c\") %>%\r\n  group_by(country, country.name.en) %>%\r\n  filter(sum(!is.na(city)) >= 10) %>%\r\n  summarise(sum(!is.na(city))) %>%\r\n  ungroup() %>%\r\n  mutate(country_code = country, country_name = country.name.en, num_lines = `sum(!is.na(city))`) %>%\r\n  arrange(dplyr::desc(num_lines)) %>%\r\n  select(country_code, country_name, num_lines) %>%\r\n  head(15)\r\n\r\nCopying and pasting the {dplyr} code produced here also works like the bomb! 💣\r\n\r\n\r\ntransit_cost %>%\r\n  inner_join(country_codes, by = c(country = \"iso2c\"), suffix = c(\".t\", \".c\"), na_matches = \"never\") %>%\r\n  rename(t.currency = \"currency.t\", c.currency = \"currency.c\") %>%\r\n  group_by(country, country.name.en) %>%\r\n  filter(sum(!is.na(city)) >= 10) %>%\r\n  summarise(sum(!is.na(city))) %>%\r\n  ungroup() %>%\r\n  mutate(country_code = country, country_name = country.name.en, num_lines = `sum(!is.na(city))`) %>%\r\n  arrange(dplyr::desc(num_lines)) %>%\r\n  select(country_code, country_name, num_lines) %>%\r\n  head(15)\r\n\r\n\r\n# A tibble: 11 x 3\r\n   country_code country_name  num_lines\r\n   <chr>        <chr>             <int>\r\n 1 CN           China               253\r\n 2 IN           India                29\r\n 3 TR           Turkey               20\r\n 4 ES           Spain                15\r\n 5 FR           France               15\r\n 6 JP           Japan                15\r\n 7 DE           Germany              13\r\n 8 US           United States        13\r\n 9 TW           Taiwan               12\r\n10 IT           Italy                11\r\n11 CA           Canada               10\r\n\r\nWhile {tidyquery} has some limitations this is a cool way to learn {dplyr} if you’re familiar with SQL.\r\nPackages used\r\nIn this post the main packages we used are the following:\r\n\r\n\r\nlibrary(DBI)\r\nlibrary(RSQLite)\r\nlibrary(dplyr)\r\nlibrary(dbplyr)\r\nlibrary(ggplot2)\r\nlibrary(readr)\r\nlibrary(countrycode)\r\nlibrary(tidyquery)\r\n\r\n\r\n\r\nResources\r\nIf you’d like to see the code for this post, you may find it here.\r\nIan Cook’s talk “Bridging the Gap between SQL and R”.\r\nThanks for reading!\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-03-27-sql-in-rmarkdown/balazs-busznyak-El5zuQAtfeo-unsplash.jpg",
    "last_modified": "2021-11-27T14:08:00+02:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-02-20-enable-utterances-with-distill/",
    "title": "Enable utterances with distill",
    "description": "Interested in giving your readers the ability to comment on your {distill} blog? Look no further than utteranc.es.",
    "author": [
      {
        "name": "Vebash Naidoo",
        "url": "https://twitter.com/Sciencificity"
      }
    ],
    "date": "2021-02-20",
    "categories": [
      "Blog Comments",
      "utterances"
    ],
    "contents": "\r\n\r\nContents\r\nAllow readers to comment on your blog posts\r\nAcknowledgements\r\nutterances\r\nHTML File in RStudio Project\r\nSomeone commented 🎉\r\n\r\n\r\n\r\n\r\n\r\n\r\nAllow readers to comment on your blog posts\r\nYou may be interested, like I was, in allowing reader comments for your {distill} blog posts.\r\nUpon researching the best way, I found that there was some negativity towards some comment platforms, and heard that utterances was a good alternative for now. Thanks go to Maëlle Salmon - during her session on blogging, for R-Ladies Johannesburg, she used utterances on her teaching site, and also taught us about it.\r\nAcknowledgements\r\nI’d like to make my acknowledgements up front, because this post is just a synthesis of two excellent posts from Maëlle Salmon and Miles McBain.\r\nGoodbye Disqus! Hello, Utterances\r\nHow I got utteranc.es working on my rmarkdown distill blog\r\nThis distill issue, was also a big help. Thanks to Taras Kaduk.\r\nReading their posts will give you the tools you need to have comments on your blog posts using utterances. The below is a summary from these resources.\r\nutterances\r\n“utterances is a comments widget built on GitHub issues”.\r\nTo set it up you need to first install the utterances GitHub app, if you have not already done so.\r\nYou then need to allow the app access to your blog repository (repo) in GitHub. My blog repo is named Blog_Vebash (inspired, eh 🤐).\r\n\r\nIn GitHub, navigate to the Issues tab in your Blog’s repo, and open the Labels section as highlighted below.\r\n\r\nChoose New label to add a label for the issue that will serve as your blog’s comments. I added mine as:\r\n\r\n   comments 💬\r\n \r\n\r\nHTML File in RStudio Project\r\nWe need to add an .html file that contains the information for the utterances app. Like Miles did, I named mine utterances.html.\r\nCreate an utterances.html file as shown below, with your blog repo details in the place of the one noted there. Here is mine, copied nearly directly from Mile’s.\r\n ```\r\n <script>\r\n   document.addEventListener(\"DOMContentLoaded\", function () {\r\n     if (!/posts/.test(location.pathname)) {\r\n       return;\r\n     }\r\n\r\n     var script = document.createElement(\"script\");\r\n     script.src = \"https://utteranc.es/client.js\";\r\n     script.setAttribute(\"repo\", \"sciencificity/Blog_Vebash\");\r\n     script.setAttribute(\"issue-term\", \"title\");\r\n     script.setAttribute(\"crossorigin\", \"anonymous\");\r\n     script.setAttribute(\"label\", \"comments 💬\");\r\n     script.setAttribute(\"theme\", \"github-light\");\r\n\r\n     /* wait for article to load, append script to article element */\r\n     var observer = new MutationObserver(function (mutations, observer) {\r\n       var article = document.querySelector(\"d-article\");\r\n       if (article) {\r\n         observer.disconnect();\r\n         /* HACK: article scroll */\r\n         article.setAttribute(\"style\", \"overflow-y: hidden\");\r\n         article.appendChild(script);\r\n       }\r\n     });\r\n\r\n     observer.observe(document.body, { childList: true });\r\n   });\r\n <\/script>\r\n ```\r\n\r\nYou may also follow Taras Kaduk’s advice and amend the d-article, in the querySelector, to d-appendix, if you want your comments to appear after the appendix, instead of between the article and the appendix.\r\nPlace utterances.html in your main blog folder.\r\n\r\nIn your _site.yml file add the includes part under your output format YAML. Now comments using utterances is available for all your blog posts.\r\noutput: \r\n  distill::distill_article:\r\n    includes:\r\n      in_header: utterances.html\r\nSomeone commented 🎉\r\nTo comment a reader has to log into their GitHub account, and give the utterances app permission.\r\nWhen a reader comments it opens a comment issue in your Blog’s GitHub repo via the utterances-bot.\r\nYou may respond on your blog post directly, or in the GitHub repo’s Issues page.\r\nIf you do it on the Issues page, you may also close the issue there.\r\nAs Maëlle remarks the downside is perhaps that your reader needs a GitHub account. I am hopeful this will not be too big of a deterrent for readers. If it is, don’t hesitate to reach out on Twitter - I am interested to hear your opinion.\r\nHappy {distill} Blogging\r\n💃\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-02-20-enable-utterances-with-distill/preview2_small_.jpg",
    "last_modified": "2021-11-27T14:08:00+02:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-01-30-control-your-factors-with-forcats/",
    "title": "Feel like the cat that got the cream with {forcats}",
    "description": "Do mi do mi do so mi do,\n\nEvery truly cultured tidyverse stud-ent knows,\n\nYou must learn your forcats and your d-plyr.\n\n  -- Adapted from 'Scales and Arpeggios' from the Aristocats",
    "author": [
      {
        "name": "Vebash Naidoo",
        "url": "https://twitter.com/Sciencificity"
      }
    ],
    "date": "2021-01-31",
    "categories": [
      "Categorical Variables",
      "Factors",
      "forcats"
    ],
    "contents": "\r\n\r\nContents\r\nTerminology\r\nNumerical (Quantitative) data\r\nNon-Numerical (Qualitative) data\r\n\r\n{forcats} 📦\r\nData\r\nConvert variable to factor\r\nbrewing_materials\r\nfactor() / as.factor()\r\nforcats::as_factor()\r\nfct_inorder()\r\n\r\nManually order levels\r\nfct_relevel()\r\n\r\nCollapse multiple levels\r\nbrewer_size\r\nfct_collapse()\r\n\r\nReduce categories\r\nbeer_awards\r\nfct_other()\r\nfct_lump()\r\n\r\nRe-labeling levels\r\nbrewing_materials$type\r\nfct_recode()\r\n\r\nReorder levels\r\nfct_infreq() and fct_rev()\r\nfct_reorder()\r\n\r\nCode\r\nSession Info\r\n\r\nFurther Resources\r\n\r\n\r\n\r\n\r\n\r\nblockquote {\r\n  background: #f9f9f9;\r\n  border-left: 10px solid #ccc;\r\n  margin: 1.5em 10px;\r\n  padding: 0.5em 10px;\r\n  quotes: \"\\201C\"\"\\201D\"\"\\2018\"\"\\2019\";\r\n}\r\nblockquote:before {\r\n  color: #ccc;\r\n  content: open-quote;\r\n  font-size: 4em;\r\n  line-height: 0.1em;\r\n  margin-right: 0.25em;\r\n  vertical-align: -0.4em;\r\n}\r\nblockquote p {\r\n  display: inline;\r\n}\r\n\r\n\r\nNo need to be a scared-y cat, “A lot of good tricks. I will show them to you. Your mother will not mind at all if I do.”\r\n\r\n\r\n— The Cat In The Hat\r\n\r\nPhoto by MIKHAIL VASILYEV on Unsplash\r\nTerminology\r\nTo set the stage, let’s talk about the types of data. These are concepts more for beginners, so if you’re familiar with these please feel free to skip ahead.\r\nWe have two types of data:\r\nNumerical data, also known as Quantitative data.\r\nNon-Numerical data, also known as Qualitative data (this is what we will be concentrating on in this post).\r\nNumerical (Quantitative) data\r\nTakes on number values:\r\nDiscrete: These are for example, count values: 0, 1, 2 - how many people took the survey, how many cats do you have in your home, how many children (aged below 18) are there in a household?\r\nContinuous: These are numbers that can take on infinite values within some range of values - percentage of survey filled by respondents (e.g. 21.562%, 67.893%, 90.145%), heights of siberian cats (30.167 cm, 31.458 cm, 28.624 cm).\r\n\r\nIt makes sense to take the average of numerical data, and to do other arithmetic on numerical data, such as to add, subtract etc.\r\nFor example, it’s easy to say, in our sample the tallest siberian cat is 1.291 centimetres taller than the shortest siberian cat.\r\nNon-Numerical (Qualitative) data\r\nAlso known as categorical data, since it can take on some number of distinct categories e.g. eye colour (brown, blue, green, grey etc.), favourite rock band, even names if you think about it, fall under categorical data, albeit many distinct categories may be present in such a name variable, and we therefore typically treat those kinds of non-numerical fields as pure character data.\r\nThe categories are limited, and distinct - Siberian cat, Cornish Rex, Russian Blue - and may therefore be represented as numbers. In R each distinct category is referred to as a level.\r\nFor example, you may have a survey question with the following categories:\r\nCategory\r\nLevel Number\r\nVery Likely\r\n1\r\nLikely\r\n2\r\nUncertain\r\n3\r\nUnlikely\r\n4\r\nVery Unlikely\r\n5\r\nThere are 5 levels.\r\nOr, you may have a question asking a participant which of your favourite songs they enjoy the most, with the following categories:\r\nCategory\r\nLevel Number\r\nSweet Child O’ Mine\r\n1\r\nSmells Like Teen Spirit\r\n2\r\nHotel California\r\n3\r\nBest of You\r\n4\r\nNumb\r\n5\r\nUnfamiliar with all of these\r\n6\r\nThere are 6 levels.\r\nThe numbers (Level Number) are basically placeholders for each category level, and is meant for us to work with it easier in a programming language. If I get the responses:\r\n\r\n\r\n      Numb, Smells Like Teen Spirit, Sweet Child O' Mine, Smells Like Teen Spirit, Numb,\r\n      Smells Like Teen Spirit, Sweet Child O' Mine, Numb, Smells Like Teen Spirit, Numb,\r\n      Sweet Child O' Mine, Sweet Child O' Mine, Smells Like Teen Spirit\r\n      \r\n      I.e. 5, 2, 1, 2, 5, 2, 1, 5, 2, 5, 1, 1, 2\r\n      \r\n\r\nI can’t say Numb is 4x better, or 4x worse than Sweet Child O’ Mine (in other words, it makes no sense to take Level Number of Numb [5], and subtract Level Number of Sweet Child ’O Mine [1]).\r\nNeither can I say that Hotel California is the average category chosen (notice it was not chosen once) but if I take the average of the numerical placeholders for the responses received, I would get 2.62 which is 3 if I round up. In other words, we can’t understand what the “average” song is.\r\nSo we have seen that it does not make sense to do arithmetic on these variables. The distance between the categories is not something that can be measured.\r\nWe can count each category, and understand that Smells Like Teen Spirit was the most popular among respondents.\r\nCategorical data may be:\r\nUnordered, often refered to merely as Categorical data, or also known as Nominal data. For example, if your question is “What's your favourite Altoids flavour?” with the following options, while you may rank Cinnamon above Wintergreen there is no order to these categories! 😁.\r\nFave Flavour\r\nLevel Number\r\nPeppermint\r\n1\r\nWintergreen\r\n2\r\nCinnamon\r\n3\r\nSpearmint\r\n4\r\nLiqourice\r\n5\r\nNone of these\r\n6\r\nOrdered, and hence called Ordinal data. Here’s an example using age categories - these are not numerical data, because the Level Number is merely a placeholder for the category, and we can’t do arithmetic on these. This is an Ordinal variable however, since there is some order to the distinct categories shown in Age Range.\r\nAge Range\r\nLevel Number\r\nYounger than 21\r\n1\r\n21-30\r\n2\r\n31-45\r\n3\r\n46-55\r\n4\r\nOlder than 55\r\n5\r\n\r\n{forcats} 📦\r\nThe forcats 📦 is meant to handle factors which is R’s data type for categorical data. forcats is for categorical data, and is an anagram for factors 🆒.\r\nThe functions in the package start with fct_.\r\nThere is non-numeric data where it is useful to work with the data as factors (age-ranges, occupation, etc.), but we must also keep in mind that some non-numeric data should be kept as character data.\r\nWe’re going to work with non-numeric data that may be treated as factors in this post, and learn how to use the forcats 📦 to make that task easier for us.\r\nData\r\nWe’re going to use the data from the awesome TidyTuesday Project ✨:\r\nBeer production data from 2020-03-31\r\nBeer awards data from 2020-10-20.\r\n\r\n\r\nlibrary(tidyverse)\r\nbrewing_materials <-\r\n   read_csv(\r\n    # hacky solution to show readers the full path of file\r\n    # str_glue just pastes the various strings next to each other\r\n    str_glue('https://raw.githubusercontent.com/rfordatascience/',\r\n            'tidytuesday/master/data/2020/2020-03-31/',\r\n            'brewing_materials.csv'))\r\nbeer_taxed <- \r\n    read_csv(\r\n     str_glue('https://raw.githubusercontent.com/rfordatascience/', \r\n              'tidytuesday/master/data/2020/2020-03-31/',\r\n              'beer_taxed.csv'))\r\n\r\nbrewer_size <- \r\n    read_csv(\r\n     str_glue('https://raw.githubusercontent.com/rfordatascience/',\r\n     'tidytuesday/master/data/2020/2020-03-31/',\r\n     'brewer_size.csv'))\r\n\r\nbeer_states <- \r\n    read_csv(\r\n     str_glue('https://raw.githubusercontent.com/rfordatascience/', \r\n     'tidytuesday/master/data/2020/2020-03-31/',\r\n     'beer_states.csv'))\r\n\r\nbeer_awards <- \r\n    read_csv(\r\n     str_glue('https://raw.githubusercontent.com/rfordatascience/', \r\n     'tidytuesday/master/data/2020/2020-10-20/',\r\n     'beer_awards.csv'))\r\n\r\n\r\n\r\nLet’s have a look at the data - here we’re showing a sample from each table.\r\n\r\n\r\nShow code\r\n\r\nbrewing_materials %>% \r\n  sample_n(50) %>% \r\n  DT::datatable(filter = 'top', list(scrollX = TRUE,\r\n                     pageLength = 5),\r\n    caption = htmltools::tags$caption(\r\n      style = 'caption-side: bottom; text-align: center;',\r\n     'Table Name: ', htmltools::em('Brewing Materials')\r\n  ))\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td><\\/td>\\n  <td data-type=\\\"disabled\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"2008\\\" data-max=\\\"2017\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"1\\\" data-max=\\\"12\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"10660\\\" data-max=\\\"589653617\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"17491\\\" data-max=\\\"559691709\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"654640\\\" data-max=\\\"6294629544\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"572537\\\" data-max=\\\"6567052630\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"caption\":\"<caption style=\\\"caption-side: bottom; text-align: center;\\\">\\n  Table Name: \\n  <em>Brewing Materials<\\/em>\\n<\\/caption>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\"],[\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\",\"Pounds of Materials Used\"],[\"Grain Products\",\"Non-Grain Products\",\"Non-Grain Products\",\"Grain Products\",\"Grain Products\",\"Non-Grain Products\",\"Non-Grain Products\",\"Grain Products\",\"Grain Products\",\"Grain Products\",\"Non-Grain Products\",\"Total Used\",\"Non-Grain Products\",\"Total Used\",\"Grain Products\",\"Non-Grain Products\",\"Non-Grain Products\",\"Total Used\",\"Non-Grain Products\",\"Non-Grain Products\",\"Grain Products\",\"Non-Grain Products\",\"Non-Grain Products\",\"Non-Grain Products\",\"Grain Products\",\"Total Non-Grain products\",\"Total Used\",\"Total Used\",\"Non-Grain Products\",\"Grain Products\",\"Grain Products\",\"Total Non-Grain products\",\"Total Grain products\",\"Non-Grain Products\",\"Total Used\",\"Non-Grain Products\",\"Grain Products\",\"Total Used\",\"Non-Grain Products\",\"Non-Grain Products\",\"Total Used\",\"Grain Products\",\"Non-Grain Products\",\"Grain Products\",\"Grain Products\",\"Grain Products\",\"Grain Products\",\"Grain Products\",\"Non-Grain Products\",\"Non-Grain Products\"],[2016,2014,2010,2012,2016,2013,2008,2014,2015,2015,2014,2016,2011,2013,2016,2015,2015,2014,2010,2010,2011,2014,2010,2012,2015,2017,2012,2011,2013,2012,2011,2013,2010,2009,2014,2015,2008,2016,2014,2011,2009,2008,2012,2016,2017,2008,2010,2017,2009,2013],[6,9,5,9,4,7,5,1,10,4,2,8,9,11,9,1,5,9,11,9,6,6,10,9,9,8,4,2,11,10,1,10,5,3,10,5,10,2,12,10,11,9,2,12,10,6,4,4,10,8],[\"Rice and rice products\",\"Hops (dry)\",\"Hops (used as extracts)\",\"Barley and barley products\",\"Wheat and wheat products\",\"Other\",\"Other\",\"Malt and malt products\",\"Wheat and wheat products\",\"Corn and corn products\",\"Other\",\"Total Used\",\"Other\",\"Total Used\",\"Rice and rice products\",\"Sugar and syrups\",\"Sugar and syrups\",\"Total Used\",\"Sugar and syrups\",\"Hops (dry)\",\"Corn and corn products\",\"Hops (dry)\",\"Hops (used as extracts)\",\"Sugar and syrups\",\"Corn and corn products\",\"Total Non-Grain products\",\"Total Used\",\"Total Used\",\"Other\",\"Malt and malt products\",\"Rice and rice products\",\"Total Non-Grain products\",\"Total Grain products\",\"Other\",\"Total Used\",\"Hops (dry)\",\"Malt and malt products\",\"Total Used\",\"Hops (used as extracts)\",\"Other\",\"Total Used\",\"Rice and rice products\",\"Hops (used as extracts)\",\"Corn and corn products\",\"Malt and malt products\",\"Corn and corn products\",\"Wheat and wheat products\",\"Corn and corn products\",\"Hops (used as extracts)\",\"Other\"],[648601,4289504,396737,16834020,51605,13505472,1804156,315728713,1568734,50651219,11645142,11930797,10334415,442925803,759649,71798065,81171257,572287634,59184495,6437916,49399750,2894437,293914,65251144,41626738,217425,589653617,499890818,11793486,321542825,108112318,79817394,538640684,6604657,539444288,2188410,353803777,13802739,42981,9544745,471233122,61739894,361152,16200,8675502,65645480,2247616,10660,302264,13373297],[3689917,2539867,450264,34557083,620546,10561030,1131684,327069448,29782810,213290064,9280218,121678710,9180751,497774963,6014092,71798065,392472907,517256336,44926666,5216389,60811086,12674247,302264,61369571,469941459,4201367,559691709,481549087,9686138,313742612,59701345,90292512,526467792,2381920,512525241,11770282,345268980,29507927,312845,8888902,484817741,65977889,275916,151501,91680339,45077699,1569606,17491,337194,10627949],[null,23443946,1713656,95632721,null,85399277,8060369,315728713,null,null,22615352,null,90288463,6116144124,null,null,null,5065447338,719362563,67378784,332332032,14757533,3751314,704250177,null,null,2261876783,1083948472,134153180,3510158822,108112318,1007715366,2414874688,8974660,5608262163,null,3856411787,null,3653284,99833208,6294629544,641591109,654640,null,null,369024726,8186594,null,3566970,98772814],[null,76772419,1892210,99689758,null,70042991,6471795,327069448,null,null,19954110,null,98989156,6316931434,null,null,null,5138138053,692382199,51892616,356953198,61421591,3566970,598179633,null,null,2251007535,996278471,111986298,3427666793,59701345,976279955,2519964657,4983344,5650762843,null,3834198094,null,3902444,107878058,6567052630,684163022,572537,null,null,262301556,5780327,null,5418406,80670940]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>data_type<\\/th>\\n      <th>material_type<\\/th>\\n      <th>year<\\/th>\\n      <th>month<\\/th>\\n      <th>type<\\/th>\\n      <th>month_current<\\/th>\\n      <th>month_prior_year<\\/th>\\n      <th>ytd_current<\\/th>\\n      <th>ytd_prior_year<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"scrollX\":true,\"pageLength\":5,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[3,4,6,7,8,9]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true,\"lengthMenu\":[5,10,25,50,100]}},\"evals\":[],\"jsHooks\":[]}\r\nShow code\r\n\r\nbeer_taxed %>% \r\n  head(50) %>% \r\n  DT::datatable(filter = 'top', list(scrollX = TRUE,\r\n                     pageLength = 5),    \r\n    caption = htmltools::tags$caption(\r\n      style = 'caption-side: bottom; text-align: center;',\r\n     'Table Name: ', htmltools::em('Beer Taxed')\r\n  ))\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td><\\/td>\\n  <td data-type=\\\"disabled\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"disabled\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"1\\\" data-max=\\\"5\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"0\\\" data-max=\\\"18269043\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"0\\\" data-max=\\\"18465892\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"0\\\" data-max=\\\"84810051\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"0\\\" data-max=\\\"83798440\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"disabled\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"caption\":\"<caption style=\\\"caption-side: bottom; text-align: center;\\\">\\n  Table Name: \\n  <em>Beer Taxed<\\/em>\\n<\\/caption>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\"],[\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\",\"Barrels Produced\"],[\"Totals\",\"Taxable\",\"Taxable\",\"Taxable\",\"Sub Total Taxable\",\"Tax Free\",\"Tax Free\",\"Tax Free\",\"Sub Total Tax-Free\",\"Totals\",\"Totals\",\"Totals\",\"Taxable\",\"Taxable\",\"Taxable\",\"Sub Total Taxable\",\"Tax Free\",\"Tax Free\",\"Tax Free\",\"Sub Total Tax-Free\",\"Totals\",\"Totals\",\"Totals\",\"Taxable\",\"Taxable\",\"Taxable\",\"Sub Total Taxable\",\"Tax Free\",\"Tax Free\",\"Tax Free\",\"Sub Total Tax-Free\",\"Totals\",\"Totals\",\"Totals\",\"Taxable\",\"Taxable\",\"Taxable\",\"Sub Total Taxable\",\"Tax Free\",\"Tax Free\",\"Tax Free\",\"Sub Total Tax-Free\",\"Totals\",\"Totals\",\"Totals\",\"Taxable\",\"Taxable\",\"Taxable\",\"Sub Total Taxable\",\"Tax Free\"],[2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008],[1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5],[\"Production\",\"In bottles and cans\",\"In barrels and kegs\",\"Tax Determined, Premises Use\",\"Sub Total Taxable\",\"For export\",\"For vessels and aircraft\",\"Consumed on brewery premises\",\"Sub Total Tax-Free\",\"Total Removals\",\"Stocks On Hand end-of-month:\",\"Production\",\"In bottles and cans\",\"In barrels and kegs\",\"Tax Determined, Premises Use\",\"Sub Total Taxable\",\"For export\",\"For vessels and aircraft\",\"Consumed on brewery premises\",\"Sub Total Tax-Free\",\"Total Removals\",\"Stocks On Hand end-of-month:\",\"Production\",\"In bottles and cans\",\"In barrels and kegs\",\"Tax Determined, Premises Use\",\"Sub Total Taxable\",\"For export\",\"For vessels and aircraft\",\"Consumed on brewery premises\",\"Sub Total Tax-Free\",\"Total Removals\",\"Stocks On Hand end-of-month:\",\"Production\",\"In bottles and cans\",\"In barrels and kegs\",\"Tax Determined, Premises Use\",\"Sub Total Taxable\",\"For export\",\"For vessels and aircraft\",\"Consumed on brewery premises\",\"Sub Total Tax-Free\",\"Total Removals\",\"Stocks On Hand end-of-month:\",\"Production\",\"In bottles and cans\",\"In barrels and kegs\",\"Tax Determined, Premises Use\",\"Sub Total Taxable\",\"For export\"],[16211480,13222104,1371239,7426,14600769,262985,0,708,263693,14864462,10230147,15690494,13051864,1250974,7558,14310396,286593,0,671,287264,14597660,10497860,17367476,13901582,1449849,88816,15440247,309529,3,7417,316949,15757196,11192957,17254160,14361125,1457124,8561,15826810,361949,0,821,362770,16189580,11250055,18269043,15421462,1489290,8720,16919472,356217],[15880125,12824278,1357372,8419,14190069,268473,0,885,269358,14459427,10614074,15284087,12209114,1197553,8090,13414757,266301,0,732,267033,13681790,11277649,17388588,14386284,1514744,88291,15989319,306542,0,8624,315166,16304485,11406260,16777943,13720960,1323587,8230,15052777,325058,0,922,325980,15378757,11705240,18465892,15480560,1538454,8786,17027800,372808],[16211480,13222104,1371239,7426,14600769,262985,0,708,263693,14864462,10230147,31909489,26279336,2622225,15035,28916596,550005,0,1379,551384,29467980,20745169,49277784,40182359,4072222,103886,44358467,859534,3,8796,868333,45226800,31929810,66535007,54544594,5531773,113354,60189721,1221483,3,9605,1231091,61420812,43182802,84810051,69966780,7023496,123576,77113852,1577700],[15880125,12824278,1357372,8419,14190069,268473,0,885,269358,14459427,10614074,31164212,25033392,2554925,16509,27604826,534774,0,1617,536391,28141217,21891723,48552848,39419676,4069669,104834,43594179,841316,0,10241,851557,44445736,33298974,65331867,53140372,5394086,113569,58648027,1166374,0,11163,1177537,59825564,45004356,83798440,68620932,6932676,122701,75676309,1539182],[\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\",\"$7/$18 per barrel\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>data_type<\\/th>\\n      <th>tax_status<\\/th>\\n      <th>year<\\/th>\\n      <th>month<\\/th>\\n      <th>type<\\/th>\\n      <th>month_current<\\/th>\\n      <th>month_prior_year<\\/th>\\n      <th>ytd_current<\\/th>\\n      <th>ytd_prior_year<\\/th>\\n      <th>tax_rate<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"scrollX\":true,\"pageLength\":5,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[3,4,6,7,8,9]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true,\"lengthMenu\":[5,10,25,50,100]}},\"evals\":[],\"jsHooks\":[]}\r\nShow code\r\n\r\nbrewer_size %>% \r\n  sample_n(50) %>% \r\n  DT::datatable(filter = 'top', list(scrollX = TRUE,\r\n                     pageLength = 5),\r\n    caption = htmltools::tags$caption(\r\n      style = 'caption-side: bottom; text-align: center;',\r\n     'Table Name: ', htmltools::em('Brewer Size')\r\n  ))\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td><\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"2009\\\" data-max=\\\"2019\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"4\\\" data-max=\\\"5964\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"3.7\\\" data-max=\\\"189839913.65\\\" data-scale=\\\"10\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"14711.36\\\" data-max=\\\"175041925.03\\\" data-scale=\\\"10\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"12\\\" data-max=\\\"6908958\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"caption\":\"<caption style=\\\"caption-side: bottom; text-align: center;\\\">\\n  Table Name: \\n  <em>Brewer Size<\\/em>\\n<\\/caption>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\"],[2013,2012,2011,2009,2014,2018,2011,2018,2017,2015,2009,2009,2017,2018,2017,2016,2015,2018,2011,2014,2016,2009,2019,2009,2016,2014,2017,2010,2017,2013,2014,2009,2016,2010,2019,2013,2010,2011,2015,2013,2018,2009,2017,2016,2016,2015,2019,2018,2015,2017],[\"1 to 1,000 Barrels\",\"60,001 to 100,000 Barrels\",\"2,000,000 to 6,000,000 Barrels\",\"100,001 to 500,000 Barrels\",\"6,000,001 Barrels and Over\",\"6,000,001 Barrels and Over\",\"7,501 to 15,000 Barrels\",\"1,000,001 to 1,999,999 Barrels\",\"Total\",\"500,001 to 1,000,000 Barrels\",\"500,001 to 1,000,000 Barrels\",\"1,000,001 to 6,000,000 Barrels\",\"6,000,001 Barrels and Over\",\"Total\",\"15,001 to 30,000 Barrels\",\"1,001 to 7,500 Barrels\",\"30,001 to 60,000 Barrels\",\"15,001 to 30,000 Barrels\",\"6,000,001 Barrels and Over\",\"7,501 to 15,000 Barrels\",\"1 to 1,000 Barrels\",\"Under 1 Barrel\",\"1,001 to 7,500 Barrels\",\"60,001 to 100,000 Barrels\",\"Total\",\"1,000,001 to 1,999,999 Barrels\",\"100,001 to 500,000 Barrels\",\"1 to 1,000 Barrels\",\"1 to 1,000 Barrels\",\"6,000,001 Barrels and Over\",\"30,001 to 60,000 Barrels\",\"1,001 to 7,500 Barrels\",\"1,000,001 to 1,999,999 Barrels\",\"1,001 to 7,500 Barrels\",\"60,001 to 100,000 Barrels\",\"15,001 to 30,000 Barrels\",\"30,001 to 60,000 Barrels\",\"1,000,001 to 1,999,999 Barrels\",\"1,001 to 7,500 Barrels\",\"1,001 to 7,500 Barrels\",\"7,501 to 15,000 Barrels\",\"1 to 1,000 Barrels\",\"1,000,001 to 1,999,999 Barrels\",\"60,001 to 100,000 Barrels\",\"15,001 to 30,000 Barrels\",\"60,001 to 100,000 Barrels\",\"1 to 1,000 Barrels\",\"100,001 to 500,000 Barrels\",\"100,001 to 500,000 Barrels\",\"2,000,000 to 6,000,000 Barrels\"],[1923,20,5,27,15,15,63,5,5648,7,7,4,15,5964,99,935,56,102,16,102,3283,195,1183,19,5096,5,40,1178,3646,17,62,357,4,428,33,51,38,9,851,645,155,1037,4,38,75,24,4577,42,49,5],[602141.422999999,1468172.46,17703591,5422155.72,138677888.13,131336734.02,662095.46,6076447.34,185581837.2,5050717.11,4831385.68,9970404.28,135615117.47,182790960.32,2062332.14,2461722.99,2453623.13,2124238.48,138963353.84,1042199.42,993337.920000003,3.7,3151130.255,1501976.56,189839913.65,6055336.28,8792844.25,426003.383,1073977.86,153023498.63,2639561.553,859934.81,4999263.95,1059505.163,2575065.63,1087970.73,1544051.1,13524548.35,2242859.09,1693579.726,1618340.38,400401.17,4868564.08,3052311.48,1577515.39,1887855.83,1321901.272,8777286.22,10645528.1,17288133.2],[528020.279,1250720.93,16695626.31,4469288.93,127713535.8,124471154.47,577424.67,6110085.42,170760628.18,4821272.06,4535659.48,9592722.75,124049346.77,175041925.03,2239986.46,2282897.14,2185447.02,1871360.04,128108304.25,916679.905,864097.200000001,14711.36,2901015.17,1224618.44,172957178.11,5863392.69,6811548.01,393941.57,1003361.14,141659034.45,2301357.795,769155.15,4994536.9,962969.633,2225453.43,921515.394,1256492.475,12843570.78,1978577.42,1479648.996,1406728.12,371872.85,4897090.56,2395062.26,1341223.91,1583089.18,1293960.317,7630983.19,8697815.57,16092810.95],[922,97318,84271,128000,4331255,5749122,270,3062,6814178,16414,21563,14548,5331930,6908958,38491,13608,29356,15417,3578089,22024,889,119,7509,95732,6490978,43468,235283,1279,790,4385750,40785,12,47250,2227,67048,18103,42409,363998,6661,6369,3983,123,4110,48970,37302,23158,2296,170814,336057,1015504]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>year<\\/th>\\n      <th>brewer_size<\\/th>\\n      <th>n_of_brewers<\\/th>\\n      <th>total_barrels<\\/th>\\n      <th>taxable_removals<\\/th>\\n      <th>total_shipped<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"scrollX\":true,\"pageLength\":5,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,3,4,5,6]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true,\"lengthMenu\":[5,10,25,50,100]}},\"evals\":[],\"jsHooks\":[]}\r\nShow code\r\n\r\nbeer_states %>% \r\n  sample_n(50) %>% \r\n  DT::datatable(filter = 'top', list(scrollX = TRUE,\r\n                     pageLength = 5),\r\n    caption = htmltools::tags$caption(\r\n      style = 'caption-side: bottom; text-align: center;',\r\n     'Table Name: ', htmltools::em('Beer States')\r\n  ))\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td><\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"2008\\\" data-max=\\\"2019\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"7.16\\\" data-max=\\\"162972112.66\\\" data-scale=\\\"12\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"caption\":\"<caption style=\\\"caption-side: bottom; text-align: center;\\\">\\n  Table Name: \\n  <em>Beer States<\\/em>\\n<\\/caption>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\"],[\"WV\",\"WI\",\"MA\",\"FL\",\"HI\",\"TX\",\"MD\",\"KY\",\"HI\",\"LA\",\"IA\",\"UT\",\"IN\",\"NV\",\"SD\",\"total\",\"AK\",\"OH\",\"VA\",\"CO\",\"MI\",\"AL\",\"NJ\",\"WV\",\"FL\",\"MD\",\"MO\",\"IN\",\"MD\",\"WV\",\"IL\",\"AZ\",\"WY\",\"WY\",\"VA\",\"AZ\",\"IA\",\"MA\",\"MS\",\"WY\",\"CT\",\"MI\",\"ME\",\"NC\",\"CO\",\"FL\",\"CA\",\"MD\",\"MN\",\"NV\"],[2017,2013,2017,2014,2018,2008,2017,2012,2013,2019,2008,2017,2014,2015,2008,2010,2016,2017,2009,2014,2012,2019,2014,2010,2011,2008,2009,2013,2019,2017,2015,2015,2014,2009,2019,2009,2014,2010,2018,2012,2016,2013,2019,2017,2016,2014,2016,2011,2009,2008],[8218.02,9038409.69,85176.38,6585.28,34458.29,1094276.99,69714.09,4949.54,13208.44,55422.57,2113.46,54184.15,48204.65,5161.63,572,162972112.66,69473.78,79394.13,1186492.73,72839.26,185386.44,47160.08,447843.58,7.16,6761.68,47959.13,13429771.56,13119.35,72769.66,3564.32,46217.44,44032.85,2447.42,2518.9,12829543.99,18303.18,8090.96,72352.47,10462.16,5752.17,10705.61,28431.97,46942.61,880391.57,1898362.52,1242022.65,201066.01,74120.55,221315.48,15454.08],[\"On Premises\",\"Bottles and Cans\",\"On Premises\",\"On Premises\",\"Bottles and Cans\",\"Kegs and Barrels\",\"Kegs and Barrels\",\"On Premises\",\"Bottles and Cans\",\"On Premises\",\"Kegs and Barrels\",\"Kegs and Barrels\",\"Bottles and Cans\",\"Kegs and Barrels\",\"Kegs and Barrels\",\"Bottles and Cans\",\"Kegs and Barrels\",\"On Premises\",\"Kegs and Barrels\",\"On Premises\",\"Kegs and Barrels\",\"On Premises\",\"Kegs and Barrels\",\"On Premises\",\"On Premises\",\"Bottles and Cans\",\"Bottles and Cans\",\"On Premises\",\"Kegs and Barrels\",\"Kegs and Barrels\",\"On Premises\",\"Bottles and Cans\",\"Bottles and Cans\",\"On Premises\",\"Bottles and Cans\",\"Kegs and Barrels\",\"Bottles and Cans\",\"Bottles and Cans\",\"On Premises\",\"Kegs and Barrels\",\"On Premises\",\"On Premises\",\"On Premises\",\"Bottles and Cans\",\"Kegs and Barrels\",\"Kegs and Barrels\",\"On Premises\",\"Bottles and Cans\",\"Bottles and Cans\",\"On Premises\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>state<\\/th>\\n      <th>year<\\/th>\\n      <th>barrels<\\/th>\\n      <th>type<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"scrollX\":true,\"pageLength\":5,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[2,3]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true,\"lengthMenu\":[5,10,25,50,100]}},\"evals\":[],\"jsHooks\":[]}\r\nShow code\r\n\r\nbeer_awards %>% \r\n  sample_n(50) %>% \r\n  DT::datatable(filter = 'top', list(scrollX = TRUE,\r\n                     pageLength = 5),\r\n    caption = htmltools::tags$caption(\r\n      style = 'caption-side: bottom; text-align: center;',\r\n     'Table Name: ', htmltools::em('Beer Awards')\r\n  ))\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"top\",\"vertical\":false,\"filterHTML\":\"<tr>\\n  <td><\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none;position: absolute;width: 200px;opacity: 1\\\">\\n      <div data-min=\\\"1990\\\" data-max=\\\"2020\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"caption\":\"<caption style=\\\"caption-side: bottom; text-align: center;\\\">\\n  Table Name: \\n  <em>Beer Awards<\\/em>\\n<\\/caption>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\"],[\"Bronze\",\"Gold\",\"Silver\",\"Silver\",\"Silver\",\"Bronze\",\"Silver\",\"Bronze\",\"Gold\",\"Silver\",\"Gold\",\"Gold\",\"Silver\",\"Gold\",\"Bronze\",\"Bronze\",\"Silver\",\"Silver\",\"Bronze\",\"Bronze\",\"Silver\",\"Silver\",\"Bronze\",\"Bronze\",\"Bronze\",\"Bronze\",\"Silver\",\"Gold\",\"Silver\",\"Bronze\",\"Silver\",\"Gold\",\"Bronze\",\"Gold\",\"Gold\",\"Gold\",\"Silver\",\"Gold\",\"Bronze\",\"Silver\",\"Silver\",\"Bronze\",\"Gold\",\"Gold\",\"Gold\",\"Bronze\",\"Silver\",\"Silver\",\"Silver\",\"Silver\"],[\"Genuine Oatmeal Porter\",\"Augenblick Light Lager\",\"Lucknow Munich-Style Lager\",\"Celtic Stout\",\"El Toro Coco Chocolate Stout\",\"Release the Hounds Barley Wine\",\"Glasscock Helles\",\"Veles Baltic Porter\",\"Royal Oak Red\",\"Super Friends IPA\",\"Chicago Overcoat\",\"Coco Burrito Porter\",\"Yep, Still Boneheads\",\"Black Jack Porter\",\"George's Phunk\",\"Breakside IPA\",\"Hilltopper's Pride Kentucky Common Ale\",\"Seeds of Infinity\",\"Sunken Road\",\"Cinder Beast\",\"Killer Kowalski\",\"Backside Stout\",\"Sawtooth Ale\",\"Oldenberg Premium Verum\",\"Man Full of Trouble\",\"Dominion Octoberfest\",\"Chocolate Stout\",\"Peck's Pilsener\",\"MadeWest Standard\",\"Tears of My Enemies\",\"Alpine Pearl Pale\",\"Ernest's Silky Smoove\",\"Vintage Blonde Ale\",\"Amburana Dream\",\"Chasing Tail Ale\",\"Coors Extra Gold\",\"Survivor Stout\",\"Conelick'r\",\"Freak of Nature Double IPA\",\"Sweetwater Exodus Porter\",\"Winter Warlock Oatmeal Stout\",\"Ragtop Red\",\"Squatters Wit\",\"Grandpa Tractor\",\"Kellerbier\",\"Amber Alt\",\"Kung Fu Smurf\",\"Wipeout IPA\",\"Olly\",\"Dragonstooth Stout\"],[\"Carolina Brewery\",\"Masthead Brewing Co.\",\"Castle Springs Brewing Co.\",\"Fitzpatrick's\",\"El Toro Brewing Co.\",\"Bull &amp; Bush Brewery\",\"Glasscock Brewing Co.\",\"FireHouse Grill &amp; Brewery\",\"Royal Oak Brewery (The)\",\"Ithaca Beer Co.\",\"Midnight Pig Beer\",\"Shoe Tree Brewing Co.\",\"SandLot (The)\",\"Left Hand/Tabernash Brewing\",\"Nodding Head Brewing Co.\",\"Breakside Brewery &amp; Taproom\",\"Ironworks Brewery &amp; Pub\",\"Coldfire Brewing\",\"Spencer Devon Brewing\",\"Sunriver Brewing\",\"Flossmoor Station Brewing Co.\",\"Steamworks Brewing Co.\",\"Left Hand Brewing Co.\",\"Oldenberg Brewery/Drawbridge\",\"Dock Street Brewery\",\"Old Dominion Brewing Co.\",\"H.C. Berger Brewing\",\"Great Dane Pub &amp; Brewing Co. (The)\",\"MadeWest Brewing Co.\",\"Monday Night Brewing\",\"Redwood Coast Brewing Co.\",\"Pizza Port - San Clemente\",\"Blue Moon Brewing Co.\",\"Denver Beer Co. - Olde Town Arvada\",\"Squatters Pub Brewery\",\"Coors Brewing Co.\",\"San Andreas Brewing Co.\",\"Three Creeks Brewing Co.\",\"Wicked Weed Brewing\",\"Sweetwater Brewing Co.\",\"Bristol Brewing Co.\",\"Rock Bottom Breweries\",\"Utah Brewers Cooperative\",\"Barley Forge Brewing\",\"Herkimer Pub and Brewery\",\"Pacific Coast Brewing Co.\",\"Bastone Brewery\",\"Port Brewing Co. Pizza Port Carlsbad\",\"Free Will Brewing Co.\",\"Elysian Brewing Co.\"],[\"Pittsboro\",\"Cleveland\",\"Moultonborough\",\"Iowa City\",\"Morgan Hill\",\"Denver\",\"Edinburg\",\"Sunnyvale\",\"Royal Oak\",\"Ithaca\",\"Plainfield\",\"Carson City\",\"Denver\",\"Longmont\",\"Philadelphia\",\"Milwaukie\",\"Lakewood\",\"Eugene\",\"Fredericksburg\",\"Sunriver\",\"Flossmoor\",\"Durango\",\"Longmont\",\"Fort Mitchell\",\"Philadelphia\",\"Ashburn\",\"Fort Collins\",\"Madison\",\"Ventura\",\"Atlanta\",\"Santa Cruz\",\"San Clemente\",\"Golden\",\"Arvada\",\"Salt Lake City\",\"Golden\",\"Hollister\",\"Sisters\",\"Asheville\",\"Atlanta\",\"Colorado Springs\",\"La Jolla\",\"Salt Lake City\",\"Costa Mesa\",\"Minneapolis\",\"Oakland\",\"Royal Oak\",\"Carlsbad\",\"Perkasie\",\"Seattle\"],[\"NC\",\"OH\",\"NH\",\"IA\",\"CA\",\"CO\",\"TX\",\"CA\",\"MI\",\"NY\",\"IL\",\"NV\",\"CO\",\"CO\",\"PA\",\"OR\",\"CO\",\"OR\",\"VA\",\"OR\",\"IL\",\"CO\",\"CO\",\"KY\",\"PA\",\"VA\",\"CO\",\"WI\",\"CA\",\"GA\",\"CA\",\"CA\",\"CO\",\"CO\",\"UT\",\"CO\",\"CA\",\"OR\",\"NC\",\"GA\",\"CO\",\"CA\",\"UT\",\"CA\",\"MN\",\"CA\",\"MI\",\"CA\",\"PA\",\"WA\"],[\"Robust Porter\",\"Munich-Style Helles\",\"Munchner-Style Helles\",\"Classic Irish-Style Dry Stout\",\"Chocolate Beer\",\"Barley Wine-Style Ale\",\"Munchener Helles\",\"Baltic-Style Porter\",\"Scottish-Style Ale\",\"American-Style Brett Ale\",\"Barley Wine-Style Ale\",\"Specialty Beer\",\"International-Style Pilsener\",\"Robust Porter\",\"Wood- and Barrel-Aged Sour Beer\",\"American-Style India Pale Ale\",\"Historical Beer\",\"Specialty Saison\",\"Belgian-Style Blonde Ale or Pale Ale\",\"Imperial Red Ale\",\"Baltic-Style Porter\",\"Oatmeal Stout\",\"Ordinary or Special Bitter\",\"American Premium Lagers\",\"Brown Porter\",\"Marzen / Oktoberfeset\",\"Sweet Stout\",\"Bohemian Style Pilsener\",\"Golden or Blonde Ale\",\"Chocolate Beer\",\"Blonde Ale\",\"Oatmeal Stout\",\"Fruit Wheat Beer\",\"Wood- and Barrel-Aged Beer\",\"English-Style Summer Ale\",\"American Premium Lagers\",\"Classic Irish-Style Dry Stout\",\"Fresh Hop Beer\",\"Imperial India Pale Ale\",\"Brown Porter\",\"Foreign Style Stout\",\"American-Style Amber/Red Ale\",\"Session Beer\",\"Dortmunder or German-Style Oktoberfest\",\"Cellar or Unfiltered Beer\",\"Alts\",\"Belgian-Style Dubbel or Quadrupel\",\"American-Style India Pale Ale\",\"Belgian-Style Lambic or Sour Ale\",\"Other Strong Ale or Lager\"],[2013,2020,2001,2001,2015,2013,1998,2009,2005,2011,2018,2020,2008,1995,2012,2017,2017,2020,2016,2018,2008,2016,2012,1991,2017,1996,2001,1997,2019,2017,1992,2009,2011,2019,2003,1990,1997,2020,2020,2003,1998,2000,2010,2018,2006,1990,2018,2004,2019,2006]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>medal<\\/th>\\n      <th>beer_name<\\/th>\\n      <th>brewery<\\/th>\\n      <th>city<\\/th>\\n      <th>state<\\/th>\\n      <th>category<\\/th>\\n      <th>year<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"scrollX\":true,\"pageLength\":5,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":7},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true,\"lengthMenu\":[5,10,25,50,100]}},\"evals\":[],\"jsHooks\":[]}\r\nConvert variable to factor\r\nTo convert a variable to a factor we use factor() / as.factor() or forcats::as_factor(). These functions converts each distinct category to some number placeholder in the background.\r\nLet’s get a better feel for the non-numeric data in the datasets we will be considering here.\r\nbrewing_materials\r\nLet’s have a look at the material_type and type fields in the brewing_materials dataset.\r\n\r\n\r\nbrewing_materials %>% \r\n  count(material_type)\r\n\r\n\r\n# A tibble: 5 x 2\r\n  material_type                n\r\n  <chr>                    <int>\r\n1 Grain Products             600\r\n2 Non-Grain Products         480\r\n3 Total Grain products       120\r\n4 Total Non-Grain products   120\r\n5 Total Used                 120\r\n\r\nbrewing_materials %>% \r\n  count(type)\r\n\r\n\r\n# A tibble: 12 x 2\r\n   type                           n\r\n   <chr>                      <int>\r\n 1 Barley and barley products   120\r\n 2 Corn and corn products       120\r\n 3 Hops (dry)                   120\r\n 4 Hops (used as extracts)      120\r\n 5 Malt and malt products       120\r\n 6 Other                        120\r\n 7 Rice and rice products       120\r\n 8 Sugar and syrups             120\r\n 9 Total Grain products         120\r\n10 Total Non-Grain products     120\r\n11 Total Used                   120\r\n12 Wheat and wheat products     120\r\n\r\nbrewing_materials %>% \r\n  filter(stringr::str_to_lower(material_type) %in% \r\n           c('grain products',\r\n             'non-grain products')) %>% \r\n  count(material_type, type)\r\n\r\n\r\n# A tibble: 9 x 3\r\n  material_type      type                           n\r\n  <chr>              <chr>                      <int>\r\n1 Grain Products     Barley and barley products   120\r\n2 Grain Products     Corn and corn products       120\r\n3 Grain Products     Malt and malt products       120\r\n4 Grain Products     Rice and rice products       120\r\n5 Grain Products     Wheat and wheat products     120\r\n6 Non-Grain Products Hops (dry)                   120\r\n7 Non-Grain Products Hops (used as extracts)      120\r\n8 Non-Grain Products Other                        120\r\n9 Non-Grain Products Sugar and syrups             120\r\n\r\nfactor() / as.factor()\r\nThese are conversion functions to convert a variable to a factor in Base R.\r\nTo convert a variable to a factor we may use:\r\ndf <- df %>% mutate(var = factor(var))\r\ndf <- df %>% mutate(var = as.factor(var))\r\n\r\nTo figure out what number placeholder a category was given behind the scenes, use levels().\r\nThe default order of factor() is sorted. According to the help page: “The levels of a factor are by default sorted, but the sort order may well depend on the locale at the time of creation, and should not be assumed to be ASCII.”\r\n\r\n\r\nbrewing_materials %>% \r\n   mutate(material_type = factor(material_type)) %>% \r\n   # use dplyr::pull which acts like $ to get the variable\r\n   pull(material_type) %>% \r\n   # let us get the number placeholder attached to each category\r\n   levels()\r\n \r\n\r\n[1] \"Grain Products\"           \"Non-Grain Products\"      \r\n[3] \"Total Grain products\"     \"Total Non-Grain products\"\r\n[5] \"Total Used\"              \r\n\r\nbrewing_materials %>% \r\n   mutate(material_type = as.factor(material_type)) %>% \r\n   # can also use count() to count how many in each level\r\n   count(material_type)\r\n \r\n\r\n# A tibble: 5 x 2\r\n  material_type                n\r\n  <fct>                    <int>\r\n1 Grain Products             600\r\n2 Non-Grain Products         480\r\n3 Total Grain products       120\r\n4 Total Non-Grain products   120\r\n5 Total Used                 120\r\n\r\nNotice that the base R functions factor() / as.factor() created levels in the alphabetical sorted order (my locale is ASCII). The output of the first part of the code block shows that \"Grain Products\" was coded as 1, while \"Total Non-Grain products\" was coded as 4, and \"Total Used\" was coded as the last level which was 5.\r\nWhat if I wanted to specify the levels myself? I could specify the levels in an argument as shown: levels = c(\"Level1\", ..., \"LevelN\").\r\n\r\n\r\nbrewing_materials %>% \r\n   mutate(material_type = factor(material_type,\r\n                 # I want to make a factor but I want the order to be\r\n                 # as follows:\r\n                 levels = c(\"Grain Products\",\r\n                            \"Total Grain products\",\r\n                            \"Non-Grain Products\",\r\n                            \"Total Non-Grain products\",\r\n                            \"Total Used\"))) %>% \r\n   pull(material_type) %>% \r\n   levels()\r\n \r\n\r\n[1] \"Grain Products\"           \"Total Grain products\"    \r\n[3] \"Non-Grain Products\"       \"Total Non-Grain products\"\r\n[5] \"Total Used\"              \r\n\r\nMy level specification is used to create the levels, so the numeric encoding follows my specification this time. \"Total Grain products\" is coded as level 2 this time (it was level 3 in the default creation where no levels argument was specified).\r\nWhat if I wanted to include levels that may exist in future datasets, but don’t as yet in the dataset we have? This is similar to the months example in R for Data Science. Let’s try it with adding a Not Applicable level, which is not in our dataset’s material_type variable.\r\n\r\n\r\nbrewing_materials %>% \r\n   mutate(material_type = factor(material_type,\r\n                           levels = c(\"Grain Products\",\r\n                                      \"Total Grain products\",\r\n                                      \"Non-Grain Products\",\r\n                                      \"Total Non-Grain products\",\r\n                                      \"Total Used\",\r\n                                      \"Not Applicable\"))) %>% \r\n   pull(material_type) %>% \r\n   levels()\r\n \r\n\r\n[1] \"Grain Products\"           \"Total Grain products\"    \r\n[3] \"Non-Grain Products\"       \"Total Non-Grain products\"\r\n[5] \"Total Used\"               \"Not Applicable\"          \r\n\r\nHas it been created?\r\n\r\n\r\nbrewing_materials %>% \r\n   mutate(material_type = factor(material_type,\r\n                           levels = c(\"Grain Products\",\r\n                                      \"Total Grain products\",\r\n                                      \"Non-Grain Products\",\r\n                                      \"Total Non-Grain products\",\r\n                                      \"Total Used\",\r\n                                      \"Not Applicable\"))) %>%\r\n   # we can also count as before but notice that\r\n   # one category that has no data is missing -\r\n   # the artificial `Not Applicable` we added\r\n   count(material_type)\r\n \r\n\r\n# A tibble: 5 x 2\r\n  material_type                n\r\n  <fct>                    <int>\r\n1 Grain Products             600\r\n2 Total Grain products       120\r\n3 Non-Grain Products         480\r\n4 Total Non-Grain products   120\r\n5 Total Used                 120\r\n\r\nA simple count() does not quite let us know, but if we add an argument .drop = FALSE we get counts for all categories, even those with no observations (i.e. that category has a count of 0). By default the count() function drops categories with 0 counts from the output. By adding .drop = FALSE we’re asking for these to be included.\r\n\r\n\r\nbrewing_materials %>% \r\n   mutate(material_type = factor(material_type,\r\n                           levels = c(\"Grain Products\",\r\n                                      \"Total Grain products\",\r\n                                      \"Non-Grain Products\",\r\n                                      \"Total Non-Grain products\",\r\n                                      \"Total Used\",\r\n                                      \"Not Applicable\"))) %>%\r\n   # we can get all categories by adding the .drop = FALSE\r\n   count(material_type, .drop = FALSE)\r\n \r\n\r\n# A tibble: 6 x 2\r\n  material_type                n\r\n  <fct>                    <int>\r\n1 Grain Products             600\r\n2 Total Grain products       120\r\n3 Non-Grain Products         480\r\n4 Total Non-Grain products   120\r\n5 Total Used                 120\r\n6 Not Applicable               0\r\n\r\n\r\nMy locale is English South African, and hence is ASCII. The order preference in sorting is: […, !, \", #, …, 0, 1, …, 9, …, A, …, Z, …].\r\nforcats::as_factor()\r\nas_factor() behaves differently to as.factor() in that it creates levels in the order in which they appear, hence we get the same factor levels across different locales.\r\n\r\nNote the underscore _ instead of the .: as_factor\r\nBase R’s as.factor()\r\n\r\n\r\ntest_factor_var <-  c(\"012star\", \"DogsRule\", \"!this\", \"%abc\",\r\n            \"Abc#\", \"abc$\", \"$bb\", \"AreYouKiddingCatsRule!\")\r\n\r\ntest_factor_var %>% \r\n  as.factor() %>% \r\n  print(width = Inf)\r\n\r\n\r\n[1] 012star                DogsRule              \r\n[3] !this                  %abc                  \r\n[5] Abc#                   abc$                  \r\n[7] $bb                    AreYouKiddingCatsRule!\r\nLevels: !this $bb %abc 012star Abc# abc$ AreYouKiddingCatsRule! DogsRule\r\n\r\nNote that the levels (seen in the output Levels: !this $bb ...) follow the [ASCII] sort on my machine, this may be completely different based on your locale.\r\nContrast with forcats::as_factor()\r\nNow let’s consider as_factor().\r\n\r\n\r\n# here is the raw variable again\r\ntest_factor_var\r\n\r\n\r\n[1] \"012star\"                \"DogsRule\"              \r\n[3] \"!this\"                  \"%abc\"                  \r\n[5] \"Abc#\"                   \"abc$\"                  \r\n[7] \"$bb\"                    \"AreYouKiddingCatsRule!\"\r\n\r\n# Now let's make it a factor, this time using\r\n# as_factor()\r\ntest_factor_var %>% \r\n  as_factor() %>% \r\n  print(width = Inf)\r\n\r\n\r\n[1] 012star                DogsRule              \r\n[3] !this                  %abc                  \r\n[5] Abc#                   abc$                  \r\n[7] $bb                    AreYouKiddingCatsRule!\r\nLevels: 012star DogsRule !this %abc Abc# abc$ $bb AreYouKiddingCatsRule!\r\n\r\nNote that as_factor() kept the order as it appears (Levels: 012star DogsRule ...), this will be the same for you, even if your locale is different.\r\nConvert brewer data\r\nLet’s perform the same conversion we did with Base R functions, but now using forcats::as_factor().\r\nFirst let’s have a look at the default order that as_factor() creates the variable in.\r\n\r\n\r\nbrewing_materials %>% \r\n    pull(material_type) %>% \r\n    # what order are material_type observations in?\r\n    head(12)\r\n  \r\n\r\n [1] \"Grain Products\"           \"Grain Products\"          \r\n [3] \"Grain Products\"           \"Grain Products\"          \r\n [5] \"Grain Products\"           \"Total Grain products\"    \r\n [7] \"Non-Grain Products\"       \"Non-Grain Products\"      \r\n [9] \"Non-Grain Products\"       \"Non-Grain Products\"      \r\n[11] \"Total Non-Grain products\" \"Total Used\"              \r\n\r\nbrewing_materials %>% \r\n    mutate(material_type = as_factor(material_type)) %>% \r\n    pull(material_type) %>% \r\n    levels()\r\n  \r\n\r\n[1] \"Grain Products\"           \"Total Grain products\"    \r\n[3] \"Non-Grain Products\"       \"Total Non-Grain products\"\r\n[5] \"Total Used\"              \r\n\r\nNotice the levels are created in the order they appear in the material_type field - \"Grain Products\" appeared first hence is Level 1, \"Total Grain products\" appeared second hence occupies Level 2.\r\nfct_inorder()\r\nWe can also explicitly use the fct_inorder() function to reorder the factor levels by first appearance. I add it here just so you’re aware of this option.\r\nFor example, the beer_awards$medal column would be made alphabetical in my locale if I use as.factor().\r\n\r\n\r\nbeer_awards %>% \r\n  head(3)\r\n\r\n\r\n# A tibble: 3 x 7\r\n  medal  beer_name        brewery      city    state category     year\r\n  <chr>  <chr>            <chr>        <chr>   <chr> <chr>       <dbl>\r\n1 Gold   Volksbier Vienna Wibby Brewi~ Longmo~ CO    American A~  2020\r\n2 Silver Oktoberfest      Founders Br~ Grand ~ MI    American A~  2020\r\n3 Bronze Amber Lager      Skipping Ro~ Staunt~ VA    American A~  2020\r\n\r\nbeer_awards %>% \r\n  mutate(medal = as.factor(medal)) %>% \r\n  pull(medal) %>% \r\n  levels()\r\n\r\n\r\n[1] \"Bronze\" \"Gold\"   \"Silver\"\r\n\r\nNotice the alphabetical ordering of levels (Bronze, Gold, Silver).\r\nIf I follow this with a fct_inorder() the ordering of levels is now using the order of appearance instead.\r\n\r\n\r\nbeer_awards %>% \r\n  mutate(medal = as.factor(medal) %>% fct_inorder()) %>% \r\n  pull(medal) %>% \r\n  levels()\r\n\r\n\r\n[1] \"Gold\"   \"Silver\" \"Bronze\"\r\n\r\nIn most cases we’d want this to be Bronze, Silver, Gold in order of increasing award type. We’ll see how to do that just now.\r\nManually order levels\r\nfct_relevel()\r\nNow we may specify the order ourselves (i.e. manually order the levels) by using fct_relevel(). For example, as we talked about previously, we may want the award medals to be ordered Bronze, Silver, Gold in order of increasing award type, instead of order of appearance (or Base R’s alpha sorting in my locale).\r\n\r\n\r\nbeer_awards %>% \r\n    # I want to specify my factor levels myself\r\n    mutate(medal = fct_relevel(medal,\r\n                   # we want a specific order, and\r\n                   # the order in which the categories\r\n                   # appear does not meet that specification\r\n                               \"Bronze\",\r\n                               \"Silver\",\r\n                               \"Gold\")) %>% \r\n    pull(medal) %>% \r\n    levels()\r\n  \r\n\r\n[1] \"Bronze\" \"Silver\" \"Gold\"  \r\n\r\nWe can’t add a level that is not in the dataset, or we can, but we get a Warning), and the level is not added.\r\n\r\n\r\nbrewing_materials_forcats <- brewing_materials %>% \r\n    # create a factor\r\n    mutate(material_type = as_factor(material_type))\r\n\r\n  brewing_materials_forcats %>%\r\n    pull(material_type) %>% \r\n    # what's the default levels?\r\n    levels()\r\n  \r\n\r\n[1] \"Grain Products\"           \"Total Grain products\"    \r\n[3] \"Non-Grain Products\"       \"Total Non-Grain products\"\r\n[5] \"Total Used\"              \r\n\r\nbrewing_materials_forcats %>% \r\n    # we relevel by specifying the order we want\r\n    mutate(material_type = fct_relevel(material_type,\r\n                                       \"Grain Products\",\r\n                                       \"Non-Grain Products\",\r\n                                       \"Total Grain products\",\r\n                                       \"Total Non-Grain products\",\r\n                                       \"Total Used\",\r\n                                       # adding a level that does not exist\r\n                                       \"Not Applicable\")) %>% \r\n    pull(material_type) %>% \r\n    levels()\r\n  \r\n\r\nWarning: Unknown levels in `f`: Not Applicable\r\n[1] \"Grain Products\"           \"Non-Grain Products\"      \r\n[3] \"Total Grain products\"     \"Total Non-Grain products\"\r\n[5] \"Total Used\"              \r\n\r\nNotice the warning you get (Warning: Problem with mutate … . We can’t specify a “level” that does not exist in the observations.\r\nYou may have a factor variable that at present has only some of the categories. For example, you may have a month factor variable where the dataset you’re working with only has observations for some months at present. In this case you are going to be specifying the levels yourself so the best is to use the base functions, and specify all months in your levels argument despite these not being a part of the values seen in the observations at present.\r\nThe nice part about fct_relevel() is you don’t have to list all the categories, sometimes you just want to move one level to the beginning, you may do this as shown below. You may also move some part of the list to a specific position, which may be done using the after argument.\r\nSay I want to move all the “Total” columns up front:\r\n\r\n\r\n# Levels at present are:\r\n  brewing_materials_forcats %>%\r\n    pull(material_type) %>% \r\n    levels()\r\n  \r\n\r\n[1] \"Grain Products\"           \"Total Grain products\"    \r\n[3] \"Non-Grain Products\"       \"Total Non-Grain products\"\r\n[5] \"Total Used\"              \r\n\r\nbrewing_materials_forcats %>% \r\n    # move Total columns to the front of levels\r\n    mutate(material_type = fct_relevel(material_type,\r\n                                       \"Total Used\",\r\n                                       \"Total Grain products\",\r\n                                       \"Total Non-Grain products\")) %>% \r\n    pull(material_type) %>% \r\n    levels()\r\n  \r\n\r\n[1] \"Total Used\"               \"Total Grain products\"    \r\n[3] \"Total Non-Grain products\" \"Grain Products\"          \r\n[5] \"Non-Grain Products\"      \r\n\r\nNotice I did not list all categories. The remaining levels will fall behind the “Total” columns in the order they were originally.\r\nSay I want to move “Grain Products” to the end. I can specify after = Inf to do this.\r\n\r\n\r\n# Levels at present are:\r\n  brewing_materials_forcats %>%\r\n    pull(material_type) %>% \r\n    levels()\r\n  \r\n\r\n[1] \"Grain Products\"           \"Total Grain products\"    \r\n[3] \"Non-Grain Products\"       \"Total Non-Grain products\"\r\n[5] \"Total Used\"              \r\n\r\nbrewing_materials_forcats %>% \r\n    # move \"Grain Products\" to the end of the levels\r\n    mutate(material_type = fct_relevel(material_type,\r\n                                       \"Grain Products\", \r\n                                       after = Inf)) %>% \r\n    pull(material_type) %>% \r\n    levels()\r\n  \r\n\r\n[1] \"Total Grain products\"     \"Non-Grain Products\"      \r\n[3] \"Total Non-Grain products\" \"Total Used\"              \r\n[5] \"Grain Products\"          \r\n\r\nSay I want to move the “Total Grain products” and “Total Non-Grain products” to after the individual amounts. I again can use the after argument to do this. It is easy to get confused as to what integer your after should be set as. I think of it as “What position would I like my moved levels to start from”? In this case I want it to start by occupying slot number 3, then slot number 4, so I set after = 2, meaning “Please put these moved levels after slot number 2”.\r\n\r\n\r\n# Levels at present are:\r\n  brewing_materials_forcats %>%\r\n    pull(material_type) %>% \r\n    levels()\r\n  \r\n\r\n[1] \"Grain Products\"           \"Total Grain products\"    \r\n[3] \"Non-Grain Products\"       \"Total Non-Grain products\"\r\n[5] \"Total Used\"              \r\n\r\nbrewing_materials_forcats %>% \r\n    mutate(material_type = fct_relevel(material_type,\r\n                                       c(\"Total Grain products\",\r\n                                         \"Total Non-Grain products\"), \r\n                                       # what slot in the levels\r\n                                       # should these go into?\r\n                                       # I want them to start in slot 3\r\n                                       # so I set  after = 2\r\n                                       after = 2)) %>% \r\n    pull(material_type) %>% \r\n    levels()\r\n  \r\n\r\n[1] \"Grain Products\"           \"Non-Grain Products\"      \r\n[3] \"Total Grain products\"     \"Total Non-Grain products\"\r\n[5] \"Total Used\"              \r\n\r\n\r\nCollapse multiple levels\r\nbrewer_size\r\nLet’s have a look at the brewer_size field in the brewer_size dataset.\r\n\r\n\r\nbrewer_size %>% \r\n  count(brewer_size)\r\n\r\n\r\n# A tibble: 16 x 2\r\n   brewer_size                        n\r\n   <chr>                          <int>\r\n 1 1 to 1,000 Barrels                11\r\n 2 1,000,000 to 6,000,000 Barrels     1\r\n 3 1,000,001 to 1,999,999 Barrels     9\r\n 4 1,000,001 to 6,000,000 Barrels     1\r\n 5 1,001 to 7,500 Barrels            11\r\n 6 100,001 to 500,000 Barrels        11\r\n 7 15,001 to 30,000 Barrels          11\r\n 8 2,000,000 to 6,000,000 Barrels     9\r\n 9 30,001 to 60,000 Barrels          11\r\n10 500,001 to 1,000,000 Barrels      11\r\n11 6,000,001 Barrels and Over        11\r\n12 60,001 to 100,000 Barrels         11\r\n13 7,501 to 15,000 Barrels           11\r\n14 Total                             11\r\n15 Under 1 Barrel                     6\r\n16 Zero Barrels                       1\r\n\r\nbrewer_size %>% \r\n  count(brewer_size, \r\n        # count's default is to consider the number of rows\r\n        # in each group, we can change it using wt (weight)\r\n        # weight in this example is:\r\n        # the number of brewers in each brewer size category, \r\n        # so count will sum up `n_of_brewers` for each category of brewer_size\r\n        wt = n_of_brewers)\r\n\r\n\r\n# A tibble: 16 x 2\r\n   brewer_size                        n\r\n   <chr>                          <dbl>\r\n 1 1 to 1,000 Barrels             27956\r\n 2 1,000,000 to 6,000,000 Barrels     5\r\n 3 1,000,001 to 1,999,999 Barrels    45\r\n 4 1,000,001 to 6,000,000 Barrels     4\r\n 5 1,001 to 7,500 Barrels          8368\r\n 6 100,001 to 500,000 Barrels       439\r\n 7 15,001 to 30,000 Barrels         728\r\n 8 2,000,000 to 6,000,000 Barrels    47\r\n 9 30,001 to 60,000 Barrels         556\r\n10 500,001 to 1,000,000 Barrels      92\r\n11 6,000,001 Barrels and Over       174\r\n12 60,001 to 100,000 Barrels        291\r\n13 7,501 to 15,000 Barrels         1163\r\n14 Total                          41946\r\n15 Under 1 Barrel                  1602\r\n16 Zero Barrels                     476\r\n\r\nNotice that the brewer_size variable has a few categories which are slightly different, but which overlap.\r\nbrewer_size\r\n1,000,000 to 6,000,000 Barrels\r\n1,000,001 to 6,000,000 Barrels\r\n1,000,001 to 1,999,999 Barrels\r\n2,000,000 to 6,000,000 Barrels\r\nIf you look closely it seems as though 1,000,000 to 6,000,000 Barrels may be a typo, since 500,001 to 1,000,000 Barrels is already a category in that year.\r\nIt also looks as if 1,000,001 to 6,000,000 Barrels was split into 1,000,001 to 1,999,999 Barrels and 2,000,000 to 6,000,000 Barrels from 2011 onwards.\r\nfct_collapse()\r\nWe can consolidate these levels into one level by using fct_collapse().\r\n\r\n\r\n# what are the current levels in this variable\r\nbrewer_size %>% \r\n  mutate(brewer_size = as_factor(brewer_size)) %>% \r\n  pull(brewer_size) %>% \r\n  levels()\r\n\r\n\r\n [1] \"6,000,001 Barrels and Over\"     \"1,000,001 to 6,000,000 Barrels\"\r\n [3] \"500,001 to 1,000,000 Barrels\"   \"100,001 to 500,000 Barrels\"    \r\n [5] \"60,001 to 100,000 Barrels\"      \"30,001 to 60,000 Barrels\"      \r\n [7] \"15,001 to 30,000 Barrels\"       \"7,501 to 15,000 Barrels\"       \r\n [9] \"1,001 to 7,500 Barrels\"         \"1 to 1,000 Barrels\"            \r\n[11] \"Under 1 Barrel\"                 \"Total\"                         \r\n[13] \"1,000,000 to 6,000,000 Barrels\" \"2,000,000 to 6,000,000 Barrels\"\r\n[15] \"1,000,001 to 1,999,999 Barrels\" \"Zero Barrels\"                  \r\n\r\nbrewer_size %>% \r\n  mutate(brewer_size = as_factor(brewer_size)) %>% \r\n  mutate(brewer_size = fct_collapse(brewer_size,\r\n            # the new category name\r\n            \"1,000,000 to 6,000,000 Barrels\" = \r\n            # the current categories that must become\r\n            # the new category\r\n              c(\"1,000,000 to 6,000,000 Barrels\",\r\n                \"1,000,001 to 6,000,000 Barrels\",\r\n                \"1,000,001 to 1,999,999 Barrels\",\r\n                \"2,000,000 to 6,000,000 Barrels\")\r\n        )) %>% \r\n  pull(brewer_size) %>% \r\n  levels()\r\n\r\n\r\n [1] \"6,000,001 Barrels and Over\"     \"1,000,000 to 6,000,000 Barrels\"\r\n [3] \"500,001 to 1,000,000 Barrels\"   \"100,001 to 500,000 Barrels\"    \r\n [5] \"60,001 to 100,000 Barrels\"      \"30,001 to 60,000 Barrels\"      \r\n [7] \"15,001 to 30,000 Barrels\"       \"7,501 to 15,000 Barrels\"       \r\n [9] \"1,001 to 7,500 Barrels\"         \"1 to 1,000 Barrels\"            \r\n[11] \"Under 1 Barrel\"                 \"Total\"                         \r\n[13] \"Zero Barrels\"                  \r\n\r\nNotice that our previous 16 levels are now 13.\r\nIn this case we’d also want to reorder the levels further by using fct_relevel().\r\n\r\n\r\nbrewer_size %>% \r\n  mutate(brewer_size = as_factor(brewer_size)) %>% \r\n  mutate(brewer_size = fct_collapse(brewer_size,\r\n            \"1,000,000 to 6,000,000 Barrels\" = \r\n              c(\"1,000,000 to 6,000,000 Barrels\",\r\n                \"1,000,001 to 6,000,000 Barrels\",\r\n                \"1,000,001 to 1,999,999 Barrels\",\r\n                \"2,000,000 to 6,000,000 Barrels\")\r\n        )) %>% \r\n  mutate(brewer_size = fct_relevel(brewer_size,\r\n        \"Zero Barrels\",\r\n        \"Under 1 Barrel\",\r\n        \"1 to 1,000 Barrels\",\r\n        \"1,001 to 7,500 Barrels\",\r\n        \"7,501 to 15,000 Barrels\",\r\n        \"15,001 to 30,000 Barrels\",\r\n        \"30,001 to 60,000 Barrels\",\r\n        \"60,001 to 100,000 Barrels\",\r\n        \"100,001 to 500,000 Barrels\",\r\n        \"500,001 to 1,000,000 Barrels\",\r\n        \"1,000,000 to 6,000,000 Barrels\",\r\n        \"6,000,001 Barrels and Over\")) %>% \r\n  pull(brewer_size) %>% \r\n  levels()\r\n\r\n\r\n [1] \"Zero Barrels\"                   \"Under 1 Barrel\"                \r\n [3] \"1 to 1,000 Barrels\"             \"1,001 to 7,500 Barrels\"        \r\n [5] \"7,501 to 15,000 Barrels\"        \"15,001 to 30,000 Barrels\"      \r\n [7] \"30,001 to 60,000 Barrels\"       \"60,001 to 100,000 Barrels\"     \r\n [9] \"100,001 to 500,000 Barrels\"     \"500,001 to 1,000,000 Barrels\"  \r\n[11] \"1,000,000 to 6,000,000 Barrels\" \"6,000,001 Barrels and Over\"    \r\n[13] \"Total\"                         \r\n\r\nReduce categories\r\nWe saw that fct_collapse() is used to reduce categories. In the above example, there was some order to the levels so the best we can do is collapse levels into fewer categories, i.e. an Other category does not make much sense in the example we used above.\r\nSome times you have way too many levels to visualise, or be useful in considerations, but there isn’t any inherent order in the levels. We will discuss different category reduction strategies for these (i.e. where an Other category is a viable option).\r\nbeer_awards\r\nLet’s use the beer_awards dataset for this part.\r\n\r\n\r\nbeer_awards %>% \r\n  count(brewery, sort = TRUE) %>% \r\n  DT::datatable()\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\",\"51\",\"52\",\"53\",\"54\",\"55\",\"56\",\"57\",\"58\",\"59\",\"60\",\"61\",\"62\",\"63\",\"64\",\"65\",\"66\",\"67\",\"68\",\"69\",\"70\",\"71\",\"72\",\"73\",\"74\",\"75\",\"76\",\"77\",\"78\",\"79\",\"80\",\"81\",\"82\",\"83\",\"84\",\"85\",\"86\",\"87\",\"88\",\"89\",\"90\",\"91\",\"92\",\"93\",\"94\",\"95\",\"96\",\"97\",\"98\",\"99\",\"100\",\"101\",\"102\",\"103\",\"104\",\"105\",\"106\",\"107\",\"108\",\"109\",\"110\",\"111\",\"112\",\"113\",\"114\",\"115\",\"116\",\"117\",\"118\",\"119\",\"120\",\"121\",\"122\",\"123\",\"124\",\"125\",\"126\",\"127\",\"128\",\"129\",\"130\",\"131\",\"132\",\"133\",\"134\",\"135\",\"136\",\"137\",\"138\",\"139\",\"140\",\"141\",\"142\",\"143\",\"144\",\"145\",\"146\",\"147\",\"148\",\"149\",\"150\",\"151\",\"152\",\"153\",\"154\",\"155\",\"156\",\"157\",\"158\",\"159\",\"160\",\"161\",\"162\",\"163\",\"164\",\"165\",\"166\",\"167\",\"168\",\"169\",\"170\",\"171\",\"172\",\"173\",\"174\",\"175\",\"176\",\"177\",\"178\",\"179\",\"180\",\"181\",\"182\",\"183\",\"184\",\"185\",\"186\",\"187\",\"188\",\"189\",\"190\",\"191\",\"192\",\"193\",\"194\",\"195\",\"196\",\"197\",\"198\",\"199\",\"200\",\"201\",\"202\",\"203\",\"204\",\"205\",\"206\",\"207\",\"208\",\"209\",\"210\",\"211\",\"212\",\"213\",\"214\",\"215\",\"216\",\"217\",\"218\",\"219\",\"220\",\"221\",\"222\",\"223\",\"224\",\"225\",\"226\",\"227\",\"228\",\"229\",\"230\",\"231\",\"232\",\"233\",\"234\",\"235\",\"236\",\"237\",\"238\",\"239\",\"240\",\"241\",\"242\",\"243\",\"244\",\"245\",\"246\",\"247\",\"248\",\"249\",\"250\",\"251\",\"252\",\"253\",\"254\",\"255\",\"256\",\"257\",\"258\",\"259\",\"260\",\"261\",\"262\",\"263\",\"264\",\"265\",\"266\",\"267\",\"268\",\"269\",\"270\",\"271\",\"272\",\"273\",\"274\",\"275\",\"276\",\"277\",\"278\",\"279\",\"280\",\"281\",\"282\",\"283\",\"284\",\"285\",\"286\",\"287\",\"288\",\"289\",\"290\",\"291\",\"292\",\"293\",\"294\",\"295\",\"296\",\"297\",\"298\",\"299\",\"300\",\"301\",\"302\",\"303\",\"304\",\"305\",\"306\",\"307\",\"308\",\"309\",\"310\",\"311\",\"312\",\"313\",\"314\",\"315\",\"316\",\"317\",\"318\",\"319\",\"320\",\"321\",\"322\",\"323\",\"324\",\"325\",\"326\",\"327\",\"328\",\"329\",\"330\",\"331\",\"332\",\"333\",\"334\",\"335\",\"336\",\"337\",\"338\",\"339\",\"340\",\"341\",\"342\",\"343\",\"344\",\"345\",\"346\",\"347\",\"348\",\"349\",\"350\",\"351\",\"352\",\"353\",\"354\",\"355\",\"356\",\"357\",\"358\",\"359\",\"360\",\"361\",\"362\",\"363\",\"364\",\"365\",\"366\",\"367\",\"368\",\"369\",\"370\",\"371\",\"372\",\"373\",\"374\",\"375\",\"376\",\"377\",\"378\",\"379\",\"380\",\"381\",\"382\",\"383\",\"384\",\"385\",\"386\",\"387\",\"388\",\"389\",\"390\",\"391\",\"392\",\"393\",\"394\",\"395\",\"396\",\"397\",\"398\",\"399\",\"400\",\"401\",\"402\",\"403\",\"404\",\"405\",\"406\",\"407\",\"408\",\"409\",\"410\",\"411\",\"412\",\"413\",\"414\",\"415\",\"416\",\"417\",\"418\",\"419\",\"420\",\"421\",\"422\",\"423\",\"424\",\"425\",\"426\",\"427\",\"428\",\"429\",\"430\",\"431\",\"432\",\"433\",\"434\",\"435\",\"436\",\"437\",\"438\",\"439\",\"440\",\"441\",\"442\",\"443\",\"444\",\"445\",\"446\",\"447\",\"448\",\"449\",\"450\",\"451\",\"452\",\"453\",\"454\",\"455\",\"456\",\"457\",\"458\",\"459\",\"460\",\"461\",\"462\",\"463\",\"464\",\"465\",\"466\",\"467\",\"468\",\"469\",\"470\",\"471\",\"472\",\"473\",\"474\",\"475\",\"476\",\"477\",\"478\",\"479\",\"480\",\"481\",\"482\",\"483\",\"484\",\"485\",\"486\",\"487\",\"488\",\"489\",\"490\",\"491\",\"492\",\"493\",\"494\",\"495\",\"496\",\"497\",\"498\",\"499\",\"500\",\"501\",\"502\",\"503\",\"504\",\"505\",\"506\",\"507\",\"508\",\"509\",\"510\",\"511\",\"512\",\"513\",\"514\",\"515\",\"516\",\"517\",\"518\",\"519\",\"520\",\"521\",\"522\",\"523\",\"524\",\"525\",\"526\",\"527\",\"528\",\"529\",\"530\",\"531\",\"532\",\"533\",\"534\",\"535\",\"536\",\"537\",\"538\",\"539\",\"540\",\"541\",\"542\",\"543\",\"544\",\"545\",\"546\",\"547\",\"548\",\"549\",\"550\",\"551\",\"552\",\"553\",\"554\",\"555\",\"556\",\"557\",\"558\",\"559\",\"560\",\"561\",\"562\",\"563\",\"564\",\"565\",\"566\",\"567\",\"568\",\"569\",\"570\",\"571\",\"572\",\"573\",\"574\",\"575\",\"576\",\"577\",\"578\",\"579\",\"580\",\"581\",\"582\",\"583\",\"584\",\"585\",\"586\",\"587\",\"588\",\"589\",\"590\",\"591\",\"592\",\"593\",\"594\",\"595\",\"596\",\"597\",\"598\",\"599\",\"600\",\"601\",\"602\",\"603\",\"604\",\"605\",\"606\",\"607\",\"608\",\"609\",\"610\",\"611\",\"612\",\"613\",\"614\",\"615\",\"616\",\"617\",\"618\",\"619\",\"620\",\"621\",\"622\",\"623\",\"624\",\"625\",\"626\",\"627\",\"628\",\"629\",\"630\",\"631\",\"632\",\"633\",\"634\",\"635\",\"636\",\"637\",\"638\",\"639\",\"640\",\"641\",\"642\",\"643\",\"644\",\"645\",\"646\",\"647\",\"648\",\"649\",\"650\",\"651\",\"652\",\"653\",\"654\",\"655\",\"656\",\"657\",\"658\",\"659\",\"660\",\"661\",\"662\",\"663\",\"664\",\"665\",\"666\",\"667\",\"668\",\"669\",\"670\",\"671\",\"672\",\"673\",\"674\",\"675\",\"676\",\"677\",\"678\",\"679\",\"680\",\"681\",\"682\",\"683\",\"684\",\"685\",\"686\",\"687\",\"688\",\"689\",\"690\",\"691\",\"692\",\"693\",\"694\",\"695\",\"696\",\"697\",\"698\",\"699\",\"700\",\"701\",\"702\",\"703\",\"704\",\"705\",\"706\",\"707\",\"708\",\"709\",\"710\",\"711\",\"712\",\"713\",\"714\",\"715\",\"716\",\"717\",\"718\",\"719\",\"720\",\"721\",\"722\",\"723\",\"724\",\"725\",\"726\",\"727\",\"728\",\"729\",\"730\",\"731\",\"732\",\"733\",\"734\",\"735\",\"736\",\"737\",\"738\",\"739\",\"740\",\"741\",\"742\",\"743\",\"744\",\"745\",\"746\",\"747\",\"748\",\"749\",\"750\",\"751\",\"752\",\"753\",\"754\",\"755\",\"756\",\"757\",\"758\",\"759\",\"760\",\"761\",\"762\",\"763\",\"764\",\"765\",\"766\",\"767\",\"768\",\"769\",\"770\",\"771\",\"772\",\"773\",\"774\",\"775\",\"776\",\"777\",\"778\",\"779\",\"780\",\"781\",\"782\",\"783\",\"784\",\"785\",\"786\",\"787\",\"788\",\"789\",\"790\",\"791\",\"792\",\"793\",\"794\",\"795\",\"796\",\"797\",\"798\",\"799\",\"800\",\"801\",\"802\",\"803\",\"804\",\"805\",\"806\",\"807\",\"808\",\"809\",\"810\",\"811\",\"812\",\"813\",\"814\",\"815\",\"816\",\"817\",\"818\",\"819\",\"820\",\"821\",\"822\",\"823\",\"824\",\"825\",\"826\",\"827\",\"828\",\"829\",\"830\",\"831\",\"832\",\"833\",\"834\",\"835\",\"836\",\"837\",\"838\",\"839\",\"840\",\"841\",\"842\",\"843\",\"844\",\"845\",\"846\",\"847\",\"848\",\"849\",\"850\",\"851\",\"852\",\"853\",\"854\",\"855\",\"856\",\"857\",\"858\",\"859\",\"860\",\"861\",\"862\",\"863\",\"864\",\"865\",\"866\",\"867\",\"868\",\"869\",\"870\",\"871\",\"872\",\"873\",\"874\",\"875\",\"876\",\"877\",\"878\",\"879\",\"880\",\"881\",\"882\",\"883\",\"884\",\"885\",\"886\",\"887\",\"888\",\"889\",\"890\",\"891\",\"892\",\"893\",\"894\",\"895\",\"896\",\"897\",\"898\",\"899\",\"900\",\"901\",\"902\",\"903\",\"904\",\"905\",\"906\",\"907\",\"908\",\"909\",\"910\",\"911\",\"912\",\"913\",\"914\",\"915\",\"916\",\"917\",\"918\",\"919\",\"920\",\"921\",\"922\",\"923\",\"924\",\"925\",\"926\",\"927\",\"928\",\"929\",\"930\",\"931\",\"932\",\"933\",\"934\",\"935\",\"936\",\"937\",\"938\",\"939\",\"940\",\"941\",\"942\",\"943\",\"944\",\"945\",\"946\",\"947\",\"948\",\"949\",\"950\",\"951\",\"952\",\"953\",\"954\",\"955\",\"956\",\"957\",\"958\",\"959\",\"960\",\"961\",\"962\",\"963\",\"964\",\"965\",\"966\",\"967\",\"968\",\"969\",\"970\",\"971\",\"972\",\"973\",\"974\",\"975\",\"976\",\"977\",\"978\",\"979\",\"980\",\"981\",\"982\",\"983\",\"984\",\"985\",\"986\",\"987\",\"988\",\"989\",\"990\",\"991\",\"992\",\"993\",\"994\",\"995\",\"996\",\"997\",\"998\",\"999\",\"1000\",\"1001\",\"1002\",\"1003\",\"1004\",\"1005\",\"1006\",\"1007\",\"1008\",\"1009\",\"1010\",\"1011\",\"1012\",\"1013\",\"1014\",\"1015\",\"1016\",\"1017\",\"1018\",\"1019\",\"1020\",\"1021\",\"1022\",\"1023\",\"1024\",\"1025\",\"1026\",\"1027\",\"1028\",\"1029\",\"1030\",\"1031\",\"1032\",\"1033\",\"1034\",\"1035\",\"1036\",\"1037\",\"1038\",\"1039\",\"1040\",\"1041\",\"1042\",\"1043\",\"1044\",\"1045\",\"1046\",\"1047\",\"1048\",\"1049\",\"1050\",\"1051\",\"1052\",\"1053\",\"1054\",\"1055\",\"1056\",\"1057\",\"1058\",\"1059\",\"1060\",\"1061\",\"1062\",\"1063\",\"1064\",\"1065\",\"1066\",\"1067\",\"1068\",\"1069\",\"1070\",\"1071\",\"1072\",\"1073\",\"1074\",\"1075\",\"1076\",\"1077\",\"1078\",\"1079\",\"1080\",\"1081\",\"1082\",\"1083\",\"1084\",\"1085\",\"1086\",\"1087\",\"1088\",\"1089\",\"1090\",\"1091\",\"1092\",\"1093\",\"1094\",\"1095\",\"1096\",\"1097\",\"1098\",\"1099\",\"1100\",\"1101\",\"1102\",\"1103\",\"1104\",\"1105\",\"1106\",\"1107\",\"1108\",\"1109\",\"1110\",\"1111\",\"1112\",\"1113\",\"1114\",\"1115\",\"1116\",\"1117\",\"1118\",\"1119\",\"1120\",\"1121\",\"1122\",\"1123\",\"1124\",\"1125\",\"1126\",\"1127\",\"1128\",\"1129\",\"1130\",\"1131\",\"1132\",\"1133\",\"1134\",\"1135\",\"1136\",\"1137\",\"1138\",\"1139\",\"1140\",\"1141\",\"1142\",\"1143\",\"1144\",\"1145\",\"1146\",\"1147\",\"1148\",\"1149\",\"1150\",\"1151\",\"1152\",\"1153\",\"1154\",\"1155\",\"1156\",\"1157\",\"1158\",\"1159\",\"1160\",\"1161\",\"1162\",\"1163\",\"1164\",\"1165\",\"1166\",\"1167\",\"1168\",\"1169\",\"1170\",\"1171\",\"1172\",\"1173\",\"1174\",\"1175\",\"1176\",\"1177\",\"1178\",\"1179\",\"1180\",\"1181\",\"1182\",\"1183\",\"1184\",\"1185\",\"1186\",\"1187\",\"1188\",\"1189\",\"1190\",\"1191\",\"1192\",\"1193\",\"1194\",\"1195\",\"1196\",\"1197\",\"1198\",\"1199\",\"1200\",\"1201\",\"1202\",\"1203\",\"1204\",\"1205\",\"1206\",\"1207\",\"1208\",\"1209\",\"1210\",\"1211\",\"1212\",\"1213\",\"1214\",\"1215\",\"1216\",\"1217\",\"1218\",\"1219\",\"1220\",\"1221\",\"1222\",\"1223\",\"1224\",\"1225\",\"1226\",\"1227\",\"1228\",\"1229\",\"1230\",\"1231\",\"1232\",\"1233\",\"1234\",\"1235\",\"1236\",\"1237\",\"1238\",\"1239\",\"1240\",\"1241\",\"1242\",\"1243\",\"1244\",\"1245\",\"1246\",\"1247\",\"1248\",\"1249\",\"1250\",\"1251\",\"1252\",\"1253\",\"1254\",\"1255\",\"1256\",\"1257\",\"1258\",\"1259\",\"1260\",\"1261\",\"1262\",\"1263\",\"1264\",\"1265\",\"1266\",\"1267\",\"1268\",\"1269\",\"1270\",\"1271\",\"1272\",\"1273\",\"1274\",\"1275\",\"1276\",\"1277\",\"1278\",\"1279\",\"1280\",\"1281\",\"1282\",\"1283\",\"1284\",\"1285\",\"1286\",\"1287\",\"1288\",\"1289\",\"1290\",\"1291\",\"1292\",\"1293\",\"1294\",\"1295\",\"1296\",\"1297\",\"1298\",\"1299\",\"1300\",\"1301\",\"1302\",\"1303\",\"1304\",\"1305\",\"1306\",\"1307\",\"1308\",\"1309\",\"1310\",\"1311\",\"1312\",\"1313\",\"1314\",\"1315\",\"1316\",\"1317\",\"1318\",\"1319\",\"1320\",\"1321\",\"1322\",\"1323\",\"1324\",\"1325\",\"1326\",\"1327\",\"1328\",\"1329\",\"1330\",\"1331\",\"1332\",\"1333\",\"1334\",\"1335\",\"1336\",\"1337\",\"1338\",\"1339\",\"1340\",\"1341\",\"1342\",\"1343\",\"1344\",\"1345\",\"1346\",\"1347\",\"1348\",\"1349\",\"1350\",\"1351\",\"1352\",\"1353\",\"1354\",\"1355\",\"1356\",\"1357\",\"1358\",\"1359\",\"1360\",\"1361\",\"1362\",\"1363\",\"1364\",\"1365\",\"1366\",\"1367\",\"1368\",\"1369\",\"1370\",\"1371\",\"1372\",\"1373\",\"1374\",\"1375\",\"1376\",\"1377\",\"1378\",\"1379\",\"1380\",\"1381\",\"1382\",\"1383\",\"1384\",\"1385\",\"1386\",\"1387\",\"1388\",\"1389\",\"1390\",\"1391\",\"1392\",\"1393\",\"1394\",\"1395\",\"1396\",\"1397\",\"1398\",\"1399\",\"1400\",\"1401\",\"1402\",\"1403\",\"1404\",\"1405\",\"1406\",\"1407\",\"1408\",\"1409\",\"1410\",\"1411\",\"1412\",\"1413\",\"1414\",\"1415\",\"1416\",\"1417\",\"1418\",\"1419\",\"1420\",\"1421\",\"1422\",\"1423\",\"1424\",\"1425\",\"1426\",\"1427\",\"1428\",\"1429\",\"1430\",\"1431\",\"1432\",\"1433\",\"1434\",\"1435\",\"1436\",\"1437\",\"1438\",\"1439\",\"1440\",\"1441\",\"1442\",\"1443\",\"1444\",\"1445\",\"1446\",\"1447\",\"1448\",\"1449\",\"1450\",\"1451\",\"1452\",\"1453\",\"1454\",\"1455\",\"1456\",\"1457\",\"1458\",\"1459\",\"1460\",\"1461\",\"1462\",\"1463\",\"1464\",\"1465\",\"1466\",\"1467\",\"1468\",\"1469\",\"1470\",\"1471\",\"1472\",\"1473\",\"1474\",\"1475\",\"1476\",\"1477\",\"1478\",\"1479\",\"1480\",\"1481\",\"1482\",\"1483\",\"1484\",\"1485\",\"1486\",\"1487\",\"1488\",\"1489\",\"1490\",\"1491\",\"1492\",\"1493\",\"1494\",\"1495\",\"1496\",\"1497\",\"1498\",\"1499\",\"1500\",\"1501\",\"1502\",\"1503\",\"1504\",\"1505\",\"1506\",\"1507\",\"1508\",\"1509\",\"1510\",\"1511\",\"1512\",\"1513\",\"1514\",\"1515\",\"1516\",\"1517\",\"1518\",\"1519\",\"1520\",\"1521\",\"1522\",\"1523\",\"1524\",\"1525\",\"1526\",\"1527\",\"1528\",\"1529\",\"1530\",\"1531\",\"1532\",\"1533\",\"1534\",\"1535\",\"1536\",\"1537\",\"1538\",\"1539\",\"1540\",\"1541\",\"1542\",\"1543\",\"1544\",\"1545\",\"1546\",\"1547\",\"1548\",\"1549\",\"1550\",\"1551\",\"1552\",\"1553\",\"1554\",\"1555\",\"1556\",\"1557\",\"1558\",\"1559\",\"1560\",\"1561\",\"1562\",\"1563\",\"1564\",\"1565\",\"1566\",\"1567\",\"1568\",\"1569\",\"1570\",\"1571\",\"1572\",\"1573\",\"1574\",\"1575\",\"1576\",\"1577\",\"1578\",\"1579\",\"1580\",\"1581\",\"1582\",\"1583\",\"1584\",\"1585\",\"1586\",\"1587\",\"1588\",\"1589\",\"1590\",\"1591\",\"1592\",\"1593\",\"1594\",\"1595\",\"1596\",\"1597\",\"1598\",\"1599\",\"1600\",\"1601\",\"1602\",\"1603\",\"1604\",\"1605\",\"1606\",\"1607\",\"1608\",\"1609\",\"1610\",\"1611\",\"1612\",\"1613\",\"1614\",\"1615\",\"1616\",\"1617\",\"1618\",\"1619\",\"1620\",\"1621\",\"1622\",\"1623\",\"1624\",\"1625\",\"1626\",\"1627\",\"1628\",\"1629\",\"1630\",\"1631\",\"1632\",\"1633\",\"1634\",\"1635\",\"1636\",\"1637\",\"1638\",\"1639\",\"1640\",\"1641\",\"1642\",\"1643\",\"1644\",\"1645\",\"1646\",\"1647\",\"1648\",\"1649\",\"1650\",\"1651\",\"1652\",\"1653\",\"1654\",\"1655\",\"1656\",\"1657\",\"1658\",\"1659\",\"1660\",\"1661\",\"1662\",\"1663\",\"1664\",\"1665\",\"1666\",\"1667\",\"1668\",\"1669\",\"1670\",\"1671\",\"1672\",\"1673\",\"1674\",\"1675\",\"1676\",\"1677\",\"1678\",\"1679\",\"1680\",\"1681\",\"1682\",\"1683\",\"1684\",\"1685\",\"1686\",\"1687\",\"1688\",\"1689\",\"1690\",\"1691\",\"1692\",\"1693\",\"1694\",\"1695\",\"1696\",\"1697\",\"1698\",\"1699\",\"1700\",\"1701\",\"1702\",\"1703\",\"1704\",\"1705\",\"1706\",\"1707\",\"1708\",\"1709\",\"1710\",\"1711\",\"1712\",\"1713\",\"1714\",\"1715\",\"1716\",\"1717\",\"1718\",\"1719\",\"1720\",\"1721\",\"1722\",\"1723\",\"1724\",\"1725\",\"1726\",\"1727\",\"1728\",\"1729\",\"1730\",\"1731\",\"1732\",\"1733\",\"1734\",\"1735\",\"1736\",\"1737\",\"1738\",\"1739\",\"1740\",\"1741\",\"1742\",\"1743\",\"1744\",\"1745\",\"1746\",\"1747\",\"1748\",\"1749\",\"1750\",\"1751\",\"1752\",\"1753\",\"1754\",\"1755\",\"1756\",\"1757\",\"1758\",\"1759\",\"1760\",\"1761\",\"1762\",\"1763\",\"1764\",\"1765\",\"1766\",\"1767\",\"1768\",\"1769\",\"1770\",\"1771\",\"1772\",\"1773\",\"1774\",\"1775\",\"1776\",\"1777\",\"1778\",\"1779\",\"1780\",\"1781\",\"1782\",\"1783\",\"1784\",\"1785\",\"1786\",\"1787\",\"1788\",\"1789\",\"1790\",\"1791\",\"1792\",\"1793\",\"1794\",\"1795\",\"1796\",\"1797\",\"1798\",\"1799\",\"1800\",\"1801\",\"1802\",\"1803\",\"1804\",\"1805\",\"1806\",\"1807\",\"1808\",\"1809\",\"1810\",\"1811\",\"1812\",\"1813\",\"1814\",\"1815\",\"1816\",\"1817\",\"1818\",\"1819\",\"1820\",\"1821\",\"1822\",\"1823\",\"1824\",\"1825\",\"1826\",\"1827\",\"1828\",\"1829\",\"1830\",\"1831\",\"1832\",\"1833\",\"1834\",\"1835\",\"1836\",\"1837\",\"1838\",\"1839\",\"1840\",\"1841\",\"1842\",\"1843\",\"1844\",\"1845\",\"1846\",\"1847\",\"1848\",\"1849\",\"1850\",\"1851\",\"1852\",\"1853\",\"1854\",\"1855\",\"1856\",\"1857\",\"1858\",\"1859\"],[\"Pabst Brewing Co.\",\"Miller Brewing Co.\",\"Anheuser-Busch, Inc\",\"Firestone Walker Brewing Co.\",\"Alaskan Brewing and Bottling Co.\",\"Boston Beer Co.\",\"Coors Brewing Co.\",\"New Belgium Brewing Co.\",\"Marin Brewing Co.\",\"New Glarus Brewing Co.\",\"Deschutes Brewery\",\"Pizza Port - Carlsbad\",\"Pelican Pub &amp; Brewery\",\"Saint Arnold Brewing Co.\",\"Snake River Brewing Co.\",\"Rock Bottom Breweries\",\"Sandlot Brewery at Coors Field\",\"Stoudt's Brewing Co.\",\"Goose Island Beer Co.\",\"Rogue Ales\",\"Stroh Brewery Co. (The)\",\"AleSmith Brewing Co.\",\"Barley Brown's Brew Pub\",\"Bear Republic Brewing Co.\",\"Flying Dog Brewery\",\"Redrock Brewing Co.\",\"Russian River Brewing Co.\",\"Sierra Nevada Brewing Co.\",\"Allagash Brewing Co.\",\"G. Heileman Brewing Co.\",\"Big Time Brewing Co.\",\"Boulevard Brewing Co.\",\"Elysian Brewing Co.\",\"Odell Brewing Co.\",\"Pennsylvania Brewing Co.\",\"Pizza Port - Solana Beach\",\"Widmer Brothers Brewing Co.\",\"Capital Brewery Co. Inc\",\"Chuckanut Brewery\",\"Left Hand Brewing Co.\",\"Steamworks Brewing Co.\",\"Sun King Brewing Co.\",\"TrC3=B6egs Brewing Co.\",\"Utah Brewers Cooperative\",\"Alaskan Brewing Co.\",\"Anchor Brewing Co.\",\"Devils Backbone Brewing Co. - Basecamp\",\"Flossmoor Station Brewing Co.\",\"Great Divide Brewing Co.\",\"Iron Hill Brewery &amp; Restaurant - Media\",\"Montana Brewing Co.\",\"Morgan Territory Brewing\",\"North Coast Brewing Co. Inc\",\"Piece Brewery\",\"Bend Brewing Co.\",\"Iron Hill Brewery &amp; Restaurant\",\"Jacob Leinenkugel Brewing Co.\",\"Minneapolis Town Hall Brewery\",\"Redwood Coast Brewing Co.\",\"Uinta Brewing Co.\",\"10 Barrel Brewing Co.\",\"Anderson Valley Brewing Co.\",\"Beachwood BBQ &amp; Brewing\",\"Bristol Brewing Co.\",\"Cannonball Creek Brewing Co.\",\"Seabright Brewery\",\"Springfield Brewing Co.\",\"Starr Hill Brewing Co.\",\"Summit Brewing Co.\",\"TAPS Fish House &amp; Brewery\",\"Tommyknocker Brewery\",\"Cambridge Brewing Co.\",\"Glenwood Canyon Brewing Co.\",\"Gordon Biersch Brewery Restaurant Group\",\"Great Lakes Brewing Co/Ohio\",\"Pacific Coast Brewing Co.\",\"Prescott Brewing Co.\",\"Rock Bottom Brewery\",\"Southampton Publick House\",\"Steelhead Brewing Co.\",\"August Schell Brewing Co.\",\"Baltimore Brewing Co.\",\"BJ's Restaurant &amp; Brewery\",\"Blind Tiger Brewery &amp; Restaurant\",\"Blue Moon Brewing Co.\",\"Chicago Brewing Co.\",\"Deschutes Brewery (No 2)\",\"Dogfish Head Craft Brewery\",\"Eel River Brewing Co.\",\"Elk Grove Brewery and Restaurant\",\"Empire Brewing Co.\",\"Flying Fish Brewing Co.\",\"Four Peaks Brewing Co.\",\"Full Sail Brewing Co.\",\"Mad River Brewing Co.\",\"Marble Brewery\",\"Old Dominion Brewing Co.\",\"Pizza Port Ocean Beach\",\"Real Ale Brewing Co.\",\"SandLot (The)\",\"Ska Brewing Co.\",\"Third Street AleWorks\",\"Thunder Canyon Brewery\",\"Angelic Brewing Co.\",\"Auburn Alehouse\",\"Avery Brewing Co.\",\"Big Dog's Brewing Co.\",\"Boscos Brewing Co.\",\"Captain Lawrence Brewing Co.\",\"Clipper City Brewing Co.\",\"Founders Brewing Co.\",\"Genesee/High Falls Brewing\",\"Main Street Brewery\",\"Millstream Brewing Co.\",\"Mountain Sun Pub and Brewery\",\"Pizza Port Carlsbad\",\"Port City Brewing Co.\",\"Silver City Brewery\",\"Sly Fox Brewing Co.\",\"Stewart's Brewing Co.\",\"Sudwerk Privatbrauerei Hubsch\",\"21st Amendment Brewery\",\"Ballast Point Brewing Co.\",\"Boundary Bay Brewery\",\"Capitol City Brewing Co.\",\"Devils Backbone Brewing Co.\",\"Devils Backbone Brewing Co. - Outpost\",\"Dry Dock Brewing Co.\",\"Fat Head's Brewery\",\"Foothills Brewing\",\"Great Adirondack Brewing Co.\",\"Great American Restaurants\",\"Great Basin Brewing Co.\",\"Great Dane Pub &amp; Brewing Co. (The)\",\"Grimm Brothers Brewhouse\",\"MillerCoors\",\"New Holland Brewing Co.\",\"Oggi's Pizza &amp; Brewing Co.\",\"Port Brewing Co.\",\"Stevens Point Brewery\",\"Sweetwater Brewing Co.\",\"Two Brothers Brewing Co.\",\"AC Golden Brewing Co.\",\"Altitude Chophouse and Brewery\",\"Appleton Brewing Co/Adler Brau\",\"Bastone Brewery\",\"Black Tooth Brewing Co.\",\"Breakside Brewery\",\"Brewery Ommegang\",\"Butterfield Brewing Co.\",\"Celis Brewery Inc\",\"Chama River Brewing Co.\",\"Cigar City Brewing\",\"Dry Dock Brewing Co. - South Dock\",\"Durango Brewing Co.\",\"Fat Head's Brewery &amp; Saloon\",\"Gordon Biersch Brewery Restaurants\",\"Great South Bay Brewery\",\"Green Flash Brewing Co.\",\"Hub City Brewery\",\"Hudepohl-Schoenling Brewing Co.\",\"Il Vicino Brewing Co.\",\"Jones Brewing Co.\",\"Laurelwood Brewing Co.\",\"Laurelwood Public House &amp; Brewery\",\"Left Hand/Tabernash Brewing\",\"Lewis &amp; Clark Brewing Co.\",\"Lion Brewery Inc (The)\",\"Long Valley Pub and Brewery\",\"McKenzie Brew House\",\"Moose's Tooth Brewing Co.\",\"Moylan's Brewing Co.\",\"Pelican Brewing Co.\",\"Perennial Artisan Ales\",\"Pizza Port Solana Beach\",\"Pyramid Breweries Inc\",\"Rockies Brewing Co.\",\"Rocky River Brewing Co.\",\"Saxer Brewing Co.\",\"Spoetzl Brewery (The)\",\"Squatters Pub Brewery\",\"Sun Valley Brewing Co.\",\"Telegraph Brewing Co.\",\"The Austin Beer Garden Brewing Co.\",\"The Commons Brewery\",\"Upslope Brewing Co.\",\"Wynkoop Brewing Co.\",\"Austin Beerworks\",\"Backcountry Brewery\",\"Barton Beers Ltd\",\"Big Horn Brewing Co.\",\"BJ's Restaurant &amp; Brewery - Chandler\",\"Blackstone Restaurant &amp; Brewery\",\"Blue Mountain Brewery\",\"Blue Point Brewing Co.\",\"Bluegrass Brewing Co.\",\"Boise Brewing\",\"Brewzzi\",\"Bull &amp; Bush Brewery\",\"Carver Brewing Co.\",\"Church Brew Works\",\"Claremont Craft Ales\",\"Community Beer Co.\",\"Copper Tank Brewing Co.\",\"Crooked River Brewing Co.\",\"Duck-Rabbit Craft Brewery\",\"El Toro Brewing Co.\",\"Firestone Walker Barrelworks\",\"Free State Brewing Co.\",\"Heavenly Daze Brewery &amp; Grill\",\"High Falls Brewing Co.\",\"Joseph Huber Brewing Co.\",\"Logboat Brewing Co.\",\"Mammoth Brewing\",\"Mickey Finn's Brewery\",\"Midnight Sun Brewing Co.\",\"Pete's Brewing Co.\",\"Plank Road Brewery\",\"Port Brewing Co. Pizza Port Carlsbad\",\"Portland Brewing Co.\",\"Pug Ryan's Brewery\",\"Pyramid Alehouse/Breweries Inc\",\"Red Rock Brewing Co.\",\"Redhook Ale Brewery\",\"Rock Bottom Brewery - Chicago\",\"Rockyard Brewing Co.\",\"Rubicon Brewing Co.\",\"Short's Brewing Co.\",\"Snake River Brewing\",\"Sprecher Brewing Co.\",\"Stoddard's Brewhouse &amp; Eatery\",\"The Bruery\",\"The Lost Abbey\",\"The Post Brewing Co.\",\"Triumph Brewing Co. of New Hope\",\"Twisted Pine Brewing Co.\",\"2SP Brewing Co.\",\"Alchemist (The)\",\"Alesong Brewing &amp; Blending\",\"Alltech's Lexington Brewing Co.\",\"Alpine Beer Co.\",\"Barley Brothers Brewery\",\"Bell's Brewery, Inc\",\"Bitter End Bistro &amp; Brewery\",\"Blitz-Weinhard Brewing Co.\",\"BNS Brewing &amp; Distilling Co.\",\"Bootstrap Brewing Co.\",\"Breakwater Brewing Co.\",\"Brink Brewing Co.\",\"Brown Truck Brewery\",\"Brugge Brasserie\",\"Bull and Bush Pub and Brewery\",\"Chelsea Brewing Co.\",\"Chuckanut Brewery - North Nut\",\"Comrade Brewing Co.\",\"Denver Beer Co.\",\"Echo Brewing Co.\",\"F.X. Matt Brewing Co.\",\"FiftyFifty Brewing Co.\",\"Figueroa Mountain Brewing Co.\",\"Fredericksburg Brewing Co.\",\"Funkwerks\",\"Gella's Diner and Lb. Brewing Co.\",\"Great Northern Brewing Co.\",\"Ground Breaker Brewing\",\"Hart Brewing, Inc\",\"Humboldt Brewery\",\"Independence Brewing Co.\",\"Iron Hill Brewery &amp; Restaurant - Newark\",\"Island Brewing Co.\",\"Jolly Pumpkin Artisan Ales\",\"Karl Strauss Brewing Co. - La Jolla\",\"Kern River Brewing Co.\",\"Kuhnhenn Brewing Co.\",\"La Cumbre Brewing Co.\",\"Lakefront Brewery Inc\",\"Long Trail Brewing Co.\",\"Lost Rhino Brewing Co.\",\"Lumberyard Brewing Co.\",\"McCoys Public House &amp; BrewKitchen\",\"Michigan Brewing Co.\",\"Minnesota Brewing\",\"New South Brewing\",\"Nodding Heading Brewing Co.\",\"O'Fallon Brewery\",\"Oskar Blues Brewery\",\"Pizza Port - San Clemente\",\"Pumphouse Brewery &amp; Restaurant\",\"Red Lodge Ales Brewing Co.\",\"Redfish New Orleans Brewhouse\",\"Redwood Brewing Co.\",\"Riip Beer Co.\",\"Rock Bottom Brewery - Bethesda\",\"Rock Bottom Brewery - Long Beach\",\"Saddle Mountain Brewing Co.\",\"Santa Fe Brewing Co.\",\"Sierra Blanca Brewing Co.\",\"Silver City Brewing Co.\",\"Sioux Falls Brewing Co.\",\"Spoetzl Brewery\",\"St. Ides Brewing Co.\",\"Steel Toe Brewing\",\"Stone Brewing Co.\",\"Sun King Brewery - Indianapolis\",\"Surly Brewing Co.\",\"SweetWater Brewing Co.\",\"Telluride Brewing Co.\",\"The SandLot\",\"Thirsty Dog Brewing Co.\",\"Titletown Brewing Co.\",\"Triple Rock Brewery and Alehouse\",\"Tustin Brewing Co.\",\"Uberbrew\",\"Upland Brewing Co.\",\"Upstream Brewing Co.\",\"Wander Brewing\",\"Waterloo Brewing Co.\",\"WeldWerks Brewing Co.\",\"Wolf Canyon Brewing Co.\",\"Yards Brewing Co.\",\"AC Golden\",\"Alameda Brewing Co.\",\"Alvarado Street Brewery &amp; Grill\",\"American Brewing Co.\",\"Amherst Brewing Co.\",\"Anheuser-Busch\",\"Atwater Block Brewing Co.\",\"Ballast Point Brewing &amp; Spirits - Scripps Ranch\",\"Bardo Rodeo\",\"Barley Brown's Beer\",\"Barley Island Brewing Co.\",\"Beachwood Blendery\",\"Birds Fly South Ale Project\",\"Black Bottle Brewery\",\"Black Diamond Brewing Co.\",\"Blackstone Brewing Co.\",\"Bootlegger's Brewery\",\"Bosque Brewing Co.\",\"Bottle Logic Brewing\",\"Breakside Brewery &amp; Taproom\",\"Breckenridge Brewery\",\"Brew Hub\",\"BridgePort Brewing Co.\",\"Brooklyn Brewery\",\"Brooklyn Brewery (The)\",\"C.H. Evans Brewing Co. at the Albany Pump Station\",\"Cambridge House Brewpub (The)\",\"Central Standard Brewing\",\"Central Waters Brewing Co.\",\"City Star Brewing\",\"Cloudburst Brewing\",\"Coastal Empire Beer Co.\",\"Colorado Boy Pub &amp; Brewery\",\"Columbus Brewing Co.\",\"Commonwealth Brewing Co.\",\"CooperSmith's Pub\",\"Corridor Brewery &amp; Provisions\",\"Cottonwood Brewery\",\"Covey Restaurant &amp; Brewery (The)\",\"Crooked Stave Artisan Beer Project\",\"Denver Beer Co. - Olde Town Arvada\",\"Desert Edge Brewery\",\"Detroit Beer Co. (The)\",\"Devil Mountain Brewery\",\"Diamondback Brewing Co.\",\"Dillon DAM Brewery\",\"Dock Street Brewery\",\"Dostal Alley Brewpub &amp; Casino\",\"Drake's Brewing Co.\",\"Earth Rider Brewery\",\"Elliott Bay Brewery Pub\",\"Figueroa Mountain Brewing\",\"Figueroa Mountain Brewing Co. - Santa Barbara\",\"FireHouse Grill &amp; Brewery\",\"Fish Brewing Co.\",\"Flat Branch Pub and Brewery\",\"Flat Tail Brewing Co.\",\"Flyers Restaurant and Brewery\",\"Frankenmuth Brewery Inc\",\"Frederick Brewing Co.\",\"Georgetown Brewing Co.\",\"Gezellig Brewing Co.\",\"Grains of Wrath Brewing\",\"Grand Teton Brewing Co.\",\"Grimm Artisanal Ales\",\"H.C. Berger Brewing\",\"Hailstorm Brewing Co.\",\"High Water Brewing\",\"Hillman Beer\",\"Hollister Brewing Co.\",\"Holy Cow!\",\"Hoppin' Frog Brewing Co.\",\"Hops Bistro And Brewery (No 1)\",\"Hoptown Brewing Co.\",\"Hopworks Urban Brewery\",\"Hubcap Brewery &amp; Kitchen - Dallas\",\"Humperdinks Restaurant and Brewery\",\"Huntington Beach Beer Co.\",\"J.T. Whitneys Pub &amp; Brewery\",\"James Page Brewing Co.\",\"Jos Schlitz Brewing Co.\",\"Kalamazoo Brewing\",\"Kansas City Bier Co.\",\"Karl Strauss Brewing Co.\",\"Karl Strauss Brewing Co. - San Diego\",\"Kern River Brewing Co. - The Backyard\",\"Kings Brewing Co.\",\"Knee Deep Brewing Co.\",\"Liberty Street Brewing Co.\",\"Lion Bridge Brewing Co.\",\"Logsdon Farmhouse Ales\",\"Lone Star Brewing Co.\",\"Lone Tree Brewing Co.\",\"Lynnwood Brewing Concern - Production Facility\",\"Mad Anthony Brewing Co.\",\"Mad Fox Brewing Co.\",\"Masthead Brewing Co.\",\"Maui Brewing Co.\",\"McKenzie River Partners\",\"McNeill's Brewery\",\"Melvin Brewing\",\"Mendocino Brewing Co.\",\"Metazoa Brewing Co.\",\"Michelob Brewing Co.\",\"Mill Brewery, Eatery &amp; Bakery\",\"Moonraker Brewing Co.\",\"Nebraska Brewing Co.\",\"NoDa Brewing Co. - NE\",\"Nodding Head Brewing Co.\",\"Oaken Barrel Brewing Co.\",\"Old Marlborough Brewing Co.\",\"Old Town Brewing\",\"Olde Hickory Brewery\",\"Pacific Brewing Co.\",\"Peticolas Brewing Co.\",\"pFriem Family Brewers\",\"Phantom Canyon Brewing Co.\",\"Philipsburg Brewing Co.\",\"Pike Brewing Co.\",\"Pinthouse Pizza North\",\"PIVO Brewery\",\"Pizza Port San Clemente\",\"Pollyanna Brewing Co.\",\"Pony Express Brewing Co.\",\"Port Brewing &amp; The Lost Abbey\",\"Portland Brewing Co. (No 2)\",\"Quarter Celtic Brewpub\",\"Rahr &amp; Sons Brewing Co.\",\"Rainier Brewing Co. Inc\",\"RAM International/Big Horn Brewing\",\"Ram Restaurant &amp; Brewery (Indianapolis)\",\"Redwood Curtain Brewing Co.\",\"Revelry Brewing Co.\",\"Revolution Brewing\",\"Rhino Chasers\",\"River's Edge Brewing Co.\",\"Rocky River Brewing Co. - Ohio\",\"Rowley Farmhouse Ales\",\"Salem Beer Works\",\"San Andreas Brewing Co.\",\"Schaefer Brewing Co.\",\"Schlitz Brewing Co.\",\"Second Chance Beer Co.\",\"Shoe Tree Brewing Co.\",\"Silver Moon Brewing\",\"SLO Brewing Co.\",\"Smuggler's Brewpub\",\"Smuttynose Brewing Co.\",\"Smylie Brothers Brewing Co.\",\"Societe Brewing Co.\",\"SouthNorte Beer Co.\",\"Steelhead Brewery &amp; Cafe\",\"Stereo Brewing Co.\",\"Stone Brewing World Bistro &amp; Gardens - Liberty Station\",\"Sudwerk Brewing Co.\",\"TAPS Fish House and Brewery - Corona\",\"Terrapin Beer Co.\",\"The Church Brew Works\",\"The Freehouse\",\"The Rare Barrel\",\"Third Space Brewing\",\"Three Floyds Brewing Co.\",\"Titanic Brewing Co.\",\"Trinity Brewing Co.\",\"Twenty Tank Brewery\",\"Valhalla Microbrewery &amp; Restaurant\",\"Victory Brewing Co.\",\"Walnut Brewery\",\"Water Street Brewery\",\"Weyerbacher Brewing Co.\",\"Wiley Roots Brewing Co.\",\"Willoughby Brewing Co. (The)\",\"Wolverine State Brewing Co.\",\"Yazoo Brewing Co.\",\"21st Amendment Brewery Caf=C3=A9\",\"5 Rabbit Cerveceria\",\"75th Street Brewery\",\"Adelbert's Brewery\",\"Aftershock Brewing Co.\",\"Alarmist Brewing\",\"Alcatraz Brewing Co\",\"Allentown/Bethlehem Brew Works\",\"Alvarado Street Brewery\",\"Alvarado Street Brewery &amp; Tasting Room\",\"Amicas\",\"Appalachian Mountain Brewery - Portsmouth\",\"Arcadia Brewing Co.\",\"Ardent Craft Ales\",\"Arizona Roadhouse and Brewery\",\"Armadillo Ale Works\",\"Aurochs Brewing Co.\",\"Back Bay Brewing Co.\",\"Baere Brewing Co.\",\"Bagby Beer Co.\",\"Baker City Brewing Co.\",\"Barrio Brewing Co.\",\"Basil Ts Brewpub &amp; Italian Grill\",\"Bear Republic Factory Five\",\"BearWaters Brewing Co.\",\"Beaver St. Brewery\",\"Bell's Brewery\",\"Bemidji Brewing Co.\",\"Bent Paddle Brewing Co.\",\"Big Horn Brewing Co. @ The Ram 1\",\"Big Rock Chop House &amp; Brewery\",\"Big Top Brewing Co.\",\"Bills Tavern and Brewhouse\",\"Bison Brewing Co.\",\"BJ's Pizza, Grill &amp; Brewery\",\"BJ's Restaurant &amp; Brewery - Boulder\",\"Black Market Brewing Co.\",\"Black Project Spontaneous &amp; Wild Ales\",\"Blackstone Restaurant\",\"Blind Pig Brewing Co.\",\"Bonn Place Brewing\",\"Bottoms Up Brewing Co.\",\"Boulder Beer Co.\",\"Boxing Bear Brewing Co.\",\"Brasserie Saint James\",\"Bravery Brewing\",\"Breakers Restaurant &amp; Brewpub\",\"Breckenridge Brewery Denver\",\"Brew Kettle Production Works (The)\",\"BrewWorks Restaurant\",\"Bullfrog Brewery\",\"C3=9Cberbrew\",\"Campbell Brewing Co.\",\"Canteen Brew House\",\"Capital Brewery Co.\",\"Carolina Brewery\",\"Carson's Brewery\",\"Cascade Brewery Co. LLC\",\"Castle Island Brewing Co.\",\"Castle Springs Brewing Co.\",\"CB &amp; Potts Restaurant &amp; Brewery - Highlands Ranch\",\"Central Coast Brewing Co.\",\"Chelsea Brewery\",\"Chicago Pizza/BJ's Brewery\",\"Coast Brewing Co.\",\"Coldfire Brewing\",\"Colorado Boy Brewing Co.\",\"Community Beer Works\",\"CooperSmith's Pub &amp; Brewing\",\"Corporate Ladder Brewing Co.\",\"Corralitos Brewing Co.\",\"Craft Brew Alliance - Kona Brewery\",\"Creature Comforts Brewing Co.\",\"Crooked Lane Brewing Co.\",\"Crow Hop Brewing Co.\",\"Culture Brewing Co.\",\"Danville Brewing Co.\",\"DC Brau Brewing Co.\",\"Del Norte Brewing Co.\",\"Dempsey's Ale House/Sonoma Brewing\",\"Detroit Beer Co.\",\"Discretion Brewing\",\"Docent Brewing\",\"Dry Dock Brewing Co. - North Dock\",\"Duck-Rabbit Craft Brewery Inc (The)\",\"Duck Foot Brewing Co.\",\"DuClaw Brewing Co.\",\"Dust Bowl Brewing Co.\",\"E.J. Phair Brewing Co.\",\"Eagle Rock Brewery\",\"El Segundo Brewing Co.\",\"Emmett's Tavern &amp; Brewing Co.\",\"Eppig Brewing\",\"Equinox Brewing\",\"Eugene City Brewery\",\"Evansville Brewing Co.\",\"Far West Brewing Co.\",\"Fat Head's Brewery - Canton\",\"Fat Head's Brewery - N. Olmstead\",\"Fat Heads Brewery\",\"Fat Heads Brewery &amp; Saloon\",\"FATE Brewing Co.\",\"Fegley's Allentown &amp; Bethlehem Brew Works\",\"Fegley's Brew Works\",\"Figueroa Mountain Brewing - Arroyo Grande\",\"Figueroa Mountain Brewing - Santa Barbara\",\"Figueroa Mountain Brewing - Westlake Village\",\"Figueroa Mountain Brewing Co. - Buellton\",\"Fitzpatrick's\",\"Florida Beer Co.\",\"Fonta Flora Brewery\",\"Foothills Brewing Co.\",\"Freetail Brewing Co.\",\"Front Range Brewing Co.\",\"Full Sail Brewing at Riverplace\",\"Ghostfish Brewing Co.\",\"Gibb's Hundred Brewing Co.\",\"Goat Patch Brewing Co.\",\"Golden City Brewery\",\"Golden Pacific Brewing Co.\",\"GoodLife Brewing Co.\",\"Gordon Biersch Brewery Restaurant\",\"Grapevine Craft Brewery\",\"Gravely Brewing Co.\",\"Gray Brewing Co.\",\"Great Basin Brewing Co. - Sparks\",\"Great Notion Brewing\",\"Green Cheek Beer Co.\",\"Gun Hill Brewing Co.\",\"Hardywood Park Craft Brewery\",\"Hardywood West Creek\",\"Harmon Restaurant &amp; Brewery\",\"Harvester Brewing\",\"Haverhill Brewery\",\"Heartland Brewing Co.\",\"Hereford &amp; Hops Brewpub\",\"Heretic Brewing Co.\",\"Heritage Brewing Co.\",\"Herkimer Pub and Brewery\",\"Historic Brewing Co.\",\"Hobbs Tavern &amp; Brewing Co.\",\"Hoffbrau Steaks Brewery\",\"Holy City Brewing\",\"Honolulu Brewing Co.\",\"Hop Dogma Brewing Co.\",\"Hope Brewing Co.\",\"Hoppers Grill &amp; Brewing Co.\",\"Hoppy Brewing Co.\",\"Hops Restaurant, Bar and Brewery\",\"Hubcap Brewery &amp; Kitchen\",\"IMBIB Custom Brews\",\"Institution Ale Co.\",\"Iron Hill Brewery &amp; Restaurant #1\",\"Iron Hill Brewery &amp; Restaurant #3\",\"Ithaca Beer Co.\",\"J.E. Siebel &amp; Sons Co. Inc\",\"Jack's Abby Brewing\",\"Jarre Creek Ranch Restaurant and Brewing Co.\",\"John HarvardE2=80=99s Brew House\",\"Joseph James Brewing Co.\",\"Kelmers Brewhouse\",\"Kessler Brewing Co.\",\"Kettlehouse Brewing Co.\",\"Kilowatt Brewing\",\"Kona Brewery LLC\",\"Kona Brewing Co.\",\"Lager Heads Brewing Co.\",\"Lakefront Brewery\",\"Leinenkugel's Ballyard Brewery\",\"Local Color Brewing Co.\",\"Lonerider Brewing Co.\",\"LoneRider Brewing Co.\",\"Lost Abbey (The)\",\"Lost Forty Brewing\",\"Magnolia Gastropub and Brewery\",\"Maize Valley Craft Brewery\",\"Maplewood Brewing Co.\",\"Market Garden Brewery\",\"Marley's Brewery &amp; Grille\",\"Max Lager's Wood-Fired Grill &amp; Brewery\",\"McCoy's Public House\",\"Meadowlark Brewing\",\"Mickey's Brewing Co.\",\"Millersburg Brewing\",\"Mirror Image Brewing Co.\",\"Mission Brewery\",\"MobCraft Beer\",\"Moon River Brewing Co.\",\"Moontown Brewing Co.\",\"Moosejaw Pizza and Brewing\",\"Mother Earth Brewing\",\"Napa Valley Brewing Co.\",\"Nectar Ales\",\"Neshaminy Creek Brewing Co.\",\"New Belgium Brewing Co. - Ft. Collins\",\"New England Brewing Co.\",\"New Helvetia Brewing Co.\",\"New River Brewing Co.\",\"New Terrain Brewing Co.\",\"Newport Beach Brewing Co.\",\"Nexus Brewery\",\"Ninkasi Brewing Co.\",\"No Clue Craft Brewery\",\"Noble Ale Works\",\"Oak Creek Brewing Co.\",\"Oakshire Brewing\",\"Oasis Brewery And Restaurant\",\"Oasis Brewery Annex\",\"Ocean Beach Brewery\",\"Odd Side Ales\",\"Odin Brewing Co.\",\"Ogopogo Brewing\",\"Old Town Brewing Co.\",\"Olde Saratoga Brewing Co.\",\"Oldenberg Brewery/Drawbridge\",\"Oregon Trail Brewery\",\"Otter Creek Brewing/Wolaver's Organic Ales\",\"Our Mutual Friend Brewing\",\"Overland Stage Stop Brewery\",\"Packinghouse Brewing Co.\",\"Pagosa Brewing &amp; Grill\",\"Pale Fire Brewing Co.\",\"Panther Island Brewing Co.\",\"Papago Brewing Co.\",\"Pearl Brewing Co.\",\"Pedernales Brewing Co.\",\"Penrose Brewing Co.\",\"Peter B's Brewpub\",\"Pilot Brewing Co.\",\"Pittsburgh Brewing Co\",\"Portsmouth Brewery\",\"Powerhouse Brewing Co. (The)\",\"Powerhouse Restaurant &amp; Brewery\",\"Propolis Brewing\",\"Ram Restaurant and Big Horn Brewery - Boise\",\"Ram Restaurant and Big Horn Brewery - Seattle\",\"RAM Restaurant and Brewery - Wheeling\",\"Red Brick-Atlanta Brewing Co.\",\"Red Leg Brewing Co.\",\"Red Rock Brewery - Production\",\"Redhook Ales - Woodinville\",\"Redhook Brewery Woodinville\",\"Reuben's Brews\",\"Reuben's Brews - The Taproom\",\"Reuben's Brews Taproom\",\"Right Brain Brewery\",\"Rikenjaks Brewing Co. Inc\",\"Rio Salado Brewing Co. Inc\",\"Rip Current Brewery\",\"Ritual Brewing Co.\",\"Riverside Brewing Co.\",\"Rock Bottom Brewery - Desert Ridge\",\"Rock Bottom Brewery - King of Prussia\",\"Rock Bottom Brewery - South Denver\",\"Rock Bottom Brewery - Westminster\",\"Rock Bottom Westminster\",\"Rocket Frog Brewing Co.\",\"Rockford Brewing Co.\",\"Rockyard American Grill &amp; Brewing Co.\",\"Root Down Brewing Co.\",\"Ruby Mountain Brewing Co. Inc\",\"Saint Archer Brewing Co.\",\"Santa Barbara Brewing Co.\",\"Santa Clara Valley Brewing\",\"Save the World Brewing Co.\",\"Save The World Brewing Co.\",\"Second Street Brewery\",\"Silver Harbor Brewing Co.\",\"Six Rivers Brewery\",\"SKA Brewing\",\"Skipping Rock Beer Co.\",\"Slesar Bros. Brewing Co.\",\"SLO Brewing Co. - San Luis Obispo\",\"Sly Fox Brewhouse &amp; Eatery\",\"Snake River Brewing Jackson\",\"Snipes Mountain Brewing Co.\",\"Snow Goose Restaurant\",\"Social Kitchen &amp; Brewery\",\"South Street Brewery\",\"Southern Oregon And Pacific\",\"Spanish Peaks Brewing Co.\",\"Spellbound Brewing\",\"Starr Hill Brewery\",\"Steelhead Brewing Co. - Eugene\",\"Stony Creek Brewery\",\"Storm Peak Brewing Co.\",\"Strange Brewing Co.\",\"Stuft Pizza &amp; Brewing Co.\",\"Sunriver Brewing\",\"Sweetwater Tavern &amp; Brewery\",\"Sycamore Brewing\",\"Tabernash Brewing Co.\",\"Tahoe Mountain Brewing Co. - Truckee\",\"TAPS Fish House &amp; Brewery - Brea\",\"TAPS Fish House &amp; Brewery - Corona\",\"Temperance Beer Co.\",\"Templin Family Brewing\",\"Thai Me Up Brewery\",\"The BottleHouse Brewery And Meadery\",\"The Duck-Rabbit Craft Brewery\",\"The Dudes' Brewing Co.\",\"The Olde Mecklenburg Brewery\",\"Third Street Aleworks\",\"Thirsty Dog Grille and Brewery\",\"Thomas Kemper Brewery\",\"Thr3e Wise Men Brewing Co.\",\"Three Creeks Brewing Co.\",\"Three Weavers Brewing Co.\",\"Tied House Cafe &amp; Brewery\",\"Triple C Brewing\",\"Triple Rock Brewery\",\"Trumer Brauerei Berkeley\",\"Two Rivers Brewing Co.\",\"Two Rows Restaurant &amp; Brewery\",\"Typhoon Brewery\",\"Uncle Billy's Brew &amp; Que\",\"Uncle Billy's Brew &amp; Que - Lake Travis\",\"Union Colony Brewery\",\"Upslope Brewing Co. - Flatiron Park\",\"USA Cafe\",\"Ventura Coast Brewing Co.\",\"Vermont Pub And Brewery\",\"Vintage Brewing Co.\",\"Wagner Brewing Co.\",\"Wagner Valley Brewing Co.\",\"Walking Tree Brewery\",\"Wasatch Brewery\",\"Wayfinder Beer\",\"West Brothers Brewery\",\"West O Beer\",\"Western Reserve Brewing\",\"Westwood Brewing Co.\",\"Wibby Brewing\",\"Wicked Weed Brewing\",\"Wild Duck Brewery &amp; Restaurant\",\"Wild River Brewing\",\"Wolf Pack Brewing Co.\",\"Wren House Brewing Co.\",\"Ybor City Brewing Co.\",\"Yegua Creek Brewing Co.\",\"Zuni Street Brewing Co.\",\"(512) Brewing Co.\",\"10 Barrel Brewing Co. - Bend Pub\",\"105 West Brewing Co.\",\"12Degree Brewing\",\"14th Star Brewing Co.\",\"1623 Brewing Co.\",\"217 Brew Works\",\"21st Amendment Brewery Cafe\",\"23rd Street Brewery\",\"4 Noses Brewing Co.\",\"49th State Brewing Co.\",\"5 Stones Artisan Brewery\",\"515 Brewing Co.\",\"5280 Roadhouse &amp; Brewery\",\"54C2=B0 40' Br=ewing Co.\",\"6 Bears &amp; A Goat Brewing Co.\",\"6th and La Brea\",\"75th Street Brewery Lawrence\",\"Aardwolf Brewing Co.\",\"Abita Brewing Co.\",\"Acadian Brewing Co.\",\"Accomplice Beer Co.\",\"Adirondack Pub and Brewery\",\"Aeronaut Brewing Co.\",\"Against the Grain Brewery\",\"Ahnapee Brewery\",\"Aiken Brewing Co.\",\"Airways Brewing Co.\",\"Alameda Brewhouse\",\"Alaro Craft Brewery\",\"Alesong Brewing &amp; Blending - Tasting Room\",\"Alesong Brewing &amp; Tasting Room\",\"ALT Brew\",\"Altitude Chophouse &amp; Brewery\",\"Altstadt Brewery\",\"Americas Brewing Co/Walter Paytons Roundhouse\",\"Amicas Pizza, Microbrews and More\",\"Appalachian Mountain Brewery - Boone\",\"Arch Rock Brewing Co.\",\"Argus Brewery\",\"Arkane Aleworks\",\"Arrow Lodge Brewing\",\"Artifex Brewing Co.\",\"Arts District Brewing Co.\",\"Aspen Beer Co.\",\"Aspen Brewing Co.\",\"Aspetuck Brew Lab\",\"Attic Brewing Co.\",\"Augsburger Brewing Co.\",\"Augusta Brewing Co.\",\"Babe's Bar-B-Que &amp; Brewhouse\",\"Back East Brewing\",\"Back Street Brewery - Vista\",\"Badger Hill Brewing\",\"Bale Breaker Brewing Co.\",\"Ballast Point Brewing Co. - Chicago\",\"Ballast Point Brewing Co. - Home Brew Mart\",\"Banded Oak Brewing Co.\",\"Bankhead Brewing Co.\",\"Barebottle Brewing Co.\",\"Barley's Casino &amp; Brewing Co.\",\"Barley's Casino &amp;amp; Brewing Co.\",\"Barley Brothers Brewery &amp; Grill\",\"Barley Brothers Brewery and Grill\",\"Barley Brown's Brewpub\",\"Barley Forge Brewing\",\"Barley Naked Brewing Co.\",\"Barrel Mountain Brewing\",\"Barrel Theory Beer Co.\",\"Barren Hill Tavern and Brewery\",\"Bartlett Hall\",\"Base Camp Brewing Co.\",\"Batch Brewing Co.\",\"Bavarian Brewing Co. Ltd\",\"Baxter Brewing Co.\",\"Beachwood Brewing\",\"Beale's\",\"Bear Chase Brewing Co.\",\"Bear Republic Brewing Co. - Factory 5\",\"Bear Republic Brewing Co. - Healdsburg\",\"Bear Republic Brewing Co. - Production Facility\",\"Bear Republic Brewing Co. Factory Five\",\"Beartooth Brewing Co.\",\"Beaver Island Brewing Co.\",\"Beaver Street Brewery\",\"Beaver Street Brewery &amp; Whistle Stop CafC3=A9\",\"Begyle Brewing\",\"Bell's Eccentric Cafe\",\"Bellows Brew Crew (The)\",\"Benchmark Brewing Co.\",\"Benchtop Brewing Co.\",\"Bent River Brewing Co.\",\"Berghoff-Huber Brewing Co.\",\"Bethlehem Brew Works\",\"Bier Brewery\",\"Bier Brewery and Taproom\",\"Big aLICe Brewing Co.\",\"Big Bear Brewing Co.\",\"Big Bend Brewing Co.\",\"Big Buck Brewery and Steakhouse, Auburn Hills\",\"Big Grove Brewery\",\"Big Horn Brewing Co. @ Humperdink's\",\"Big Horn Brewing Co. @ The Ram 2\",\"Big Horn Brewing Co./CB-Potts\",\"Big Horn Brewing Co./RAM - Indianapolis\",\"Big House Brewing Co.\",\"Big Island Brewhaus\",\"Big River Grille and Brewing\",\"Big Rock Chop &amp; Brew House\",\"Big Rock Chop House\",\"Big Sexy Brewing Co.\",\"Big Sky Brewing Co.\",\"Big Time Brewery\",\"Big Ugly Brewing\",\"Bingo Beer Co.\",\"Bitter End Brewery\",\"Bitter Sisters Brewing Co.\",\"BJ's Grill &amp; Brewery\",\"BJ's Restaurant &amp; Brewery - Brea\",\"BJ's Restaurant &amp; Brewery - Portland, OR\",\"BJ's Restaurant &amp; Brewery - Reno\",\"BJ's Restaurant &amp; Brewery - Reno, NV &amp; Chandler, AZ\",\"BJ's Restaurant &amp; Brewery - Temple\",\"BJ's Restaurant &amp;amp; Brewery - Woodland Hills\",\"Black Forest Brew Haus LLC\",\"Black Mountain Brewing Co.\",\"Black Raven Brewing Co.\",\"Black Star Co-op\",\"Black Star Co-op Pub and Brewery\",\"Blackberry Farm Brewery\",\"Blind Owl Brewery\",\"Blind Tiger Brewery &amp;amp; Restaurant\",\"Blind Tiger Brewery Pub &amp; Play\",\"Block 15\",\"Block 15 Brewing Co.\",\"Blue Corn Brewery\",\"Blue Corn Caf=C3=A9 &amp; Brewery\",\"Blue Corn CafC3=A9 &amp; Brewery\",\"Blue Corn CafC3=A9 and Brewery\",\"Blue Mountain Barrel House\",\"Blue Mountain Barrel House and Organic Brewery\",\"Blue Pants Brewery\",\"Bluebird Brasserie\",\"Bob's House of Brews\",\"Bohannon Brewing Co.\",\"Bohemian Brewery\",\"Bombshell Beer Co.\",\"Bond Brothers Beer Co.\",\"Bonfire Brewing\",\"Bootstrap Brewing\",\"Boscos Little Rock Brewing Co.\",\"Boston Beer Works\",\"Bowigens Beer Co.\",\"Bradley's Restaurant\",\"Brasserie Monx Ltd\",\"Bravus Brewing Co.\",\"Breakside Brewery - Milwaukie Brewery\",\"Breakside Brewery - Pub Brewery\",\"Breakside Brewery + Beer Hall\",\"Brew Bus Brewing\",\"Brew Moon Enterprises Inc\",\"Brew Moon Restaurant &amp; Microbrewery\",\"Brew Moon South Shore Mall Ventures\",\"BrewDog Brewing Co.\",\"Brewer's Alley Restaurant &amp; Brewery\",\"Brewer's Alley Restaurant and Brewery\",\"Brewers Alley\",\"Brewery Rickoli\",\"Brewery Silvaticus\",\"Brewery Vivant\",\"Brewski Brewing Co.\",\"Brickstone Brewery\",\"Brickway Brewery &amp; Distillery\",\"Bridger Brewing\",\"Brimstone Brewing Co.\",\"Broad Ripple Brewing Co.\",\"Broadway Brewing\",\"Broken Compass Brewing\",\"Broken Plow Brewery\",\"Broken Tooth Brewing\",\"Bron Yr Aur Brewing Co.\",\"Brothers Craft Brewing\",\"BRU Handbuilt Ales &amp; Eats\",\"Bruery (The)\",\"Bruery Terreux\",\"Bruz Beers\",\"BTU Brasserie\",\"Buckhead Brewery &amp; Grill (The)\",\"Bull &amp;amp; Bush Brewery\",\"Bull Island Brewing Co.\",\"Bulldog Brewing Co.\",\"Buoy Beer Co.\",\"Burgeon Beer Co.\",\"Burke-Gilman Brewing Co.\",\"Burnside Brewing Co.\",\"Butcherknife Brewing Co.\",\"Butte Creek Brewing Co.\",\"Buzzards Bay Brewing\",\"C.B. &amp; Potts Restaurant &amp; Brewery - Westminster\",\"C.B. &amp; Potts Restaurant &amp;amp; Brewery - Fort Collins\",\"C.B. &amp; Potts Restaurant &amp;amp; Brewery - Westminster\",\"C.B. &amp; Potts/Big Horn Brewing\",\"C.B. Potts Restaurant &amp; Brewery (Fort Collins)\",\"Cabin Boys Brewery\",\"Caldera Brewing Co.\",\"Calhoun's Restaurant &amp; Brewing Co. of Harrisonburg, VA\",\"Cape May Brewing Co. - Rio Grande\",\"Capitol City Brewing Co. - Capitol Hill\",\"Captain Fatty's\",\"Carbondale Craft Beer\",\"Carolina Brewery - Chapel Hill\",\"Carter's Brewing\",\"Casa Agria Specialty Ales\",\"Cascade Lakes Brewing Co.\",\"CB &amp; Pott's Big Horn Brewery (Fort Collins)\",\"CB &amp; Potts Big Horn Brewery (Denver Tec)\",\"CB &amp; Potts Restaurant &amp; Brewery - Flatirons/Westminster\",\"CB &amp; Potts Restaurant &amp; Brewery - Fort Collins\",\"CB and Potts Restaurant and Brewery - Highlands Ranch\",\"Cedar Creek Brewery\",\"Cedar Springs Brewing Co.\",\"Cellar West Artisan Ales\",\"Cellar Works Brewing Co.\",\"Cerebral Brewing\",\"CervecerC3=ADa Colorado\",\"Cervecerias La Cruda\",\"Chainline Brewing Co.\",\"Champion Brewing Co.\",\"Charleville Vineyard &amp; Microbrewery\",\"Charlie And Jake's Brewery\",\"Cheluna Brewing Co.\",\"Cherryland Brewpub\",\"Chesapeake Bay Brewing Co.\",\"Chicago Brewing Co. - Las Vegas\",\"Chicago Brewing Co. - NV\",\"Chihuahua Cerveza\",\"Chilly Water Brewing Co.\",\"choc Beer Co.\",\"Choc Beer Co.\",\"ChopHouse and Brewery-Cleveland\",\"Christian Moerlein Brewing Co.\",\"Chuckanut - South Nut\",\"Chuckanut Brewery - South Nut\",\"Chula Vista Brewery\",\"Church Brew Works - Lawrenceville Brewery\",\"Cinder Block Brewery\",\"Circle Brewing Co.\",\"Cisco Brewers\",\"Cismontane Brewing Co.\",\"City Brewing Co.\",\"CJ's Brewery &amp; Grill\",\"Clandestine Brewing\",\"Cleveland Brewing Co.\",\"CO-Brew\",\"Coal Creek TAP\",\"Coast Brewing Co./Beau Rivage Resort\",\"Coast Range Brewing Co.\",\"Coda Brewing Co.\",\"CODA Brewing Co.\",\"Coeur D'Alene Brewing Co.\",\"Cogstone Brewing Co.\",\"Colorado Brewery &amp; Trading Co.\",\"Columbia Craft Brewing Co.\",\"Columbia River Brewing Co.\",\"Coors Archive Brewery\",\"Copper Club Brewing Co.\",\"Copperpoint Brewing Co.\",\"Coppertail Brewing\",\"Coronado Brewing Co.\",\"Coronado Brewing Company Brewpub\",\"Cowboy Restaurant &amp; Brewery (The)\",\"Coyote Springs Brewing Co.\",\"Crabtree Brewing Co.\",\"Craft Brew Alliance - Omission\",\"Craft Brew Alliance - Widmer\",\"Crank Arm Brewing Co.\",\"Cranker's Brewery\",\"Crested Butte Brewery\",\"Crooked Can Brewing Co.\",\"Crossbuck Brewing\",\"Currahee Brewing Co.\",\"Custom Brewcrafters Inc\",\"D. G. Yuengling &amp; Son Inc\",\"D9 Brewing Co.\",\"Dakota Brewing Co.\",\"Dale Bros Brewery\",\"Dale Bros. Brewery\",\"Dark Horse Brewing Co.\",\"Del Cielo Brewing Co.\",\"Delafield Brewhaus\",\"Dells Brewing Co.\",\"Denver Beer Co. - Canworks\",\"Deschutes Brewery Bend Public House\",\"Desperate Times Brewing Co.\",\"DESTIHL\",\"DESTIHL - Champaign\",\"Devil's Creek Brewery\",\"Devil's Logic Brewing\",\"Devils Backbone Brewing Co. - Outpost Production Facility\",\"Diamond Bear Brewing Co.\",\"Diebolt Brewing Co.\",\"Dillon Dam Brewery\",\"Dilworth Micro Brewery\",\"Divine Barrel Brewing\",\"Dixie Brewing Co. Inc\",\"Dock Street Brewing Co.\",\"DOG Brewing Co.\",\"Dogwood Brewing Co.\",\"Dornbusch Brewing Co.\",\"Dos Desperados Brewery\",\"Draught Works\",\"Dry Dock Brewing Co.- North Dock\",\"Dry Dock Brewing Co. - Production Facility\",\"Dueces Wild Brewery\",\"Earth - Bread + Brewery\",\"East Brother Beer Co.\",\"East Rock Brewing Co.\",\"Echo Brewing Cask and Barrel\",\"EdmundE2=80=99s Oast Brewing Co.\",\"Ei8ht Ball Brewing\",\"El Rancho Brewing\",\"Elevator Brewing Co.\",\"Elk Horn Brewery\",\"Elk Mountain Brewing Co.\",\"Elm City Brewing Co.\",\"Emmett's Brewing Co.\",\"Emmett's Brewing Co. - Wheaton\",\"Emmett's Tavern &amp; Brewing Co. - Palatine\",\"Enegren Brewing Co.\",\"Engine House #9 Restaurant &amp; Brewery\",\"Epic Brewing Co. LLC\",\"Epidemic Ales\",\"Equinox Brewing Co.\",\"Erie Brewing Co.\",\"Eris Brewery and Cider House\",\"Estes Park Brewery\",\"Etna Brewing Co.\",\"Eureka Heights Brew Co.\",\"Eureka Heights Brewing Co.\",\"Evasion Brewing - Production Facility\",\"Ex Novo Brewing Co.\",\"Excel Brewing Co.\",\"Exile Brewing\",\"Faction Brewing Co.\",\"Fair Winds Brewing Co.\",\"Family Business Beer Co.\",\"Fargo Brewing Co.\",\"Fat Head's Brewery - Portland\",\"Fat Head's Brewery &amp;amp; Saloon\",\"Fate Brewing Co.\",\"Fate Brewing Co. - Scottsdale, AZ\",\"Feather Falls Brewing Co.\",\"Ferment Brewing Co.\",\"Fifty West Brewing Co.\",\"FiftyFifty Brewing - Production Facility\",\"Figueroa Mountain Brewing - Buellton\",\"Figurehead Brewing Co.\",\"Finkel &amp; Garf Brewing Co.\",\"Firestone Walker Brewing Co. - The Propagator\",\"Fitger's Brewhouse\",\"Fitgers Brewhouse\",\"Flix Brewhouse\",\"Flix Brewhouse - Carmel\",\"Flying Aces Brewing Co.\",\"Folklore Brewing &amp; Meadery\",\"Former Future Brewing Co.\",\"Fort Collins Brewery\",\"Fort Collins Brewery (The)\",\"Fortside Brewing Co.\",\"Founders Restaurant &amp; Brewing Co.\",\"Four Day Ray Brewing\",\"Four Seasons Brewing Co.\",\"Fox River Brewing Co./Fratellos\",\"Free Will Brewing Co.\",\"Freetail Brewing Co. - Brewpub\",\"Fremont Brewing Co.\",\"Fretboard Brewing Co.\",\"Friends Brewing Co.\",\"Full Pint Brewing Co.\",\"Fulton Beer\",\"Funky Buddha Brewery\",\"GameCraft Brewing\",\"Garage Brewing Co.\",\"Garage Brewing Co. &amp; Pizzeria\",\"Gella's Diner &amp; Lb. Brewing Co.\",\"General Lafayette Inn &amp; Brewery\",\"Ghost River Brewing\",\"Ghostfish Brewing Company\",\"Gilbert Robinson Inc\",\"Gilded Otter Brewing Co.\",\"Glacier Brewhouse\",\"Glasscock Brewing Co.\",\"Gluek Brewing Co./Reflo Inc\",\"Golden Road Brewing\",\"Golden Road Brewing - Los Angeles\",\"Golden Valley Brewery and Pub\",\"Goldwater Brewing Co.\",\"Good River Beer\",\"Goose Island Brewpub\",\"Gordon Biersch Brewery Restaurant - Annapolis\",\"Gordon Biersch Brewery Restaurant - Navy Yard\",\"Gordon Biersch Brewery Restaurant - Rockville, MD\",\"Gordon Biersch Brewery Restaurant - Tysons Corner\",\"Gordon Biersch Brewing Co.\",\"Grand Teton Brewing\",\"Granite City Food &amp; Brewery\",\"Great American Restaurants - Sweetwater Tavern\",\"Great American Restaurants - Sweetwater Tavern Centreville\",\"Great Basin Brewing Co. - Production Facility\",\"Great Basin Brewing Co. - Reno\",\"Great Heights Brewing Co.\",\"Greenview Brewing\",\"Grist Brewing Co.\",\"Grumpy Troll Brewery, Restaurant &amp; Pizzeria (The)\",\"Gunnison Brewery\",\"Gunwhale Ales\",\"H.H. Hinder Brewing Co.\",\"Hale's Ales Brewery &amp; Pub\",\"Hale's Ales Brewery &amp;amp; Pub\",\"Half Acre Beer Co.\",\"Ham's Restaurant &amp; Brewhouse\",\"Ham's Restaurant &amp;amp; Brewhouse\",\"Hamm's Brewing Co.\",\"Hangar 24 Craft Brewery\",\"Harpoon Brewery\",\"Haymarket Pub &amp; Brewery\",\"Headlands Brewing Co.\",\"Heartland Brewery\",\"Heavy Seas Beer\",\"Heileman Brewing Co.\",\"Helltown Brewing\",\"Henderson Brewing Co.\",\"Henry Weinhard's Brewing\",\"Heritage Hill Brewhouse &amp; Kitchen\",\"Heroes Restaurant and Brewery\",\"Hi-Wire Brewing - Big Top Production Facility\",\"Hi-Wire Brewing - South Slope\",\"Hibernia Brewing Co.\",\"High Heel Brewing\",\"High Hops Brewery\",\"High Noon Saloon &amp; Brewery\",\"High Point Brewing Corp\",\"High Sierra Brewing Co.\",\"Highland Brewing Co.\",\"Highland Park Brewery\",\"HofbrauHaus Brewery &amp; Biergarten at Station Casino\",\"HofbrC3=A4uhaus Clevelan=d\",\"Holidaily Brewing Co.\",\"Holler Brewing Co.\",\"Hook &amp; Ladder Brewing Co.\",\"Hoppers Brooker Creek Grille &amp; Tap Room\",\"Hoppers Grill &amp;amp; Brewing Co.\",\"Hoppin' Frog Brewing\",\"Hopping Gnome Brewing Co.\",\"Hops Bistro &amp; Brewery\",\"HOPS! Bistro &amp; Brewery\",\"HopSaint Brewing Co.\",\"Horse Thief Hollow\",\"Horse Thief Hollow Brewery\",\"Horse Thief Hollow Brewing Co.\",\"Houston Brewery\",\"Hubcap Brewery &amp;amp; Kitchen - Dallas\",\"Humperdink's Restaurant and Brewery\",\"Humperdinks Big Horn Brewing\",\"Huss Brewing Co.\",\"Hutton &amp; Smith Brewing Co.\",\"Hutton &amp; Smith Brewing Co. - M. L. King\",\"Hyde Park Brewing Co.\",\"Idle Spur\",\"Ignite Brewing Co.\",\"IL Vicino Brewing Co.\",\"Indeed Brewing Co.\",\"Independent Brewing Co.\",\"Insight Brewing Co.\",\"Iowa Brewing Co.\",\"Irish Times Pub &amp; Brewery\",\"Iron Hill Brewery &amp; Restaurant - Phoenixville\",\"Iron Hill Brewery &amp; Restaurant - West Chester\",\"Iron Hill Brewery &amp; Restaurant - Wilmington\",\"Iron Hill Brewery &amp; Restaurant #2\",\"Iron Hill Brewery &amp;amp; Restaurant\",\"Iron Hill Brewery &amp;amp; Restaurant - Lancaster\",\"Iron Hill Restaurant and Brewery\",\"Iron Triangle Brewing Co.\",\"Ironworks Brewery &amp; Pub\",\"Ironworks Pub\",\"Irwin Brewing Co.\",\"Issaquah Brewhouse\",\"Issaquah Brewhouse - Rogue Ales\",\"J.J. Bitting Brewing Co.\",\"Jack's Abby Craft Lagers\",\"Jack Pine Brewery\",\"JAFB Wooster Brewery\",\"Jaxon's Restaurant &amp; Brewing\",\"Jekyll Brewing\",\"Jessup Farm Barrel House\",\"John Harvard's Brew House #2\",\"John Harvard=E2=80=99s Brew House\",\"John HarvardE2=80=99s Br=ew House\",\"John HarvardE2=80=99s Brew =House\",\"John HarvardE2=80=99s Brew Ho=use\",\"Jones Street Brewery\",\"Joyride Brewing Co.\",\"Jump Cafe\",\"Jupiter Brewpub\",\"Kane Brewing Co.\",\"Karbach Brewing Co.\",\"Karl Strauss Brewing Co. - Anaheim\",\"Karl Strauss Brewing Co. - Carlsbad\",\"Karl Strauss Brewing Co. - Costa Mesa\",\"Kern River Brewing\",\"KettleHouse Brewing Co.\",\"Kidders Brewpub\",\"Kiitos Brewing\",\"Kinetic Brewing Co.\",\"Kohola Brewery\",\"Kootenai River Brewing Co.\",\"Kulshan Brewing Co.\",\"La Conner Brewing Co.\",\"La Reforma\",\"LaConner Brewing Co.\",\"Lake Tahoe Brewing Co. Inc\",\"Lakes &amp;amp; Legends Brewing Co.\",\"Lamplighter Brewing Co.\",\"Lander Brewing Co.\",\"Latitude 42=C2=B0 Brewing Co.\",\"Latrobe Brewing Co.\",\"LauderAle\",\"Laughing Dog Brewing\",\"Launch Pad Brewery\",\"Lavery Brewing Co.\",\"Lawrenceville Brewing Co.\",\"Lawson's Finest Liquids\",\"Lazarus Brewing Co.\",\"LazyG Brewhouse\",\"Leavenworth Brewery\",\"Left Coast Brewing Co.\",\"Leinenkugel Brewing Co.\",\"Level Crossing Brewing Co.\",\"Lexington Avenue Brewery\",\"Lickinghole Creek Craft Brewery\",\"Light the Lamp Brewery\",\"Lind Brewing Co.\",\"Liquid Mechanics Brewing Co.\",\"Listermann Brewing Co.\",\"Little Brother Brewing\",\"Little City Brewing Co.\",\"Little Machine\",\"Live Oak Brewing Co.\",\"Living the Dream Brewing Co.\",\"Lock 27 Brewing\",\"Lockport Brewery\",\"Logsdon Organic Farm Brewery\",\"Lompoc Brewing - The 5th Quadrant\",\"Lone Pine Brewing Co.\",\"Lone Pine Brewing Co. - Gorham Tasting Room\",\"Lonetree Brewing Ltd\",\"Los Gatos Brewing Co.\",\"Lost Coast Brewery and CafC3=A9\",\"Louisiana Jack's\",\"Loveland Aleworks\",\"Low Tide Brewing\",\"LowDown Brewery + Kitchen\",\"Lucky Envelope Brewing\",\"Lucky Luke Brewing Co.\",\"Lynnwood Brewing Concern\",\"MacTarnahan's Brewing Co.\",\"MacTarnahan's Portland Brewing Co.\",\"MadeWest Brewing Co.\",\"Madison River Brewing Co.\",\"MadTree Brewing 2.0\",\"Magnolia Gastropub &amp; Brewery\",\"Main &amp; Six Brewing Co.\",\"Mankato Brewery\",\"MAP Brewing Co.\",\"Maplewood Brewery\",\"Marble Brewery - Mav Lab\",\"Marble Brewery - Production\",\"Market Garden Brewery - Production Brewery\",\"Martha's Exchange\",\"Mash House Restaurant &amp; Brewing Co. (The)\",\"Maui Brewing Co. - Brewpub\",\"Maui Brewing Co. - Production\",\"Maui Brewing Co./Fish &amp; Game Rotisserie\",\"Maui Brewing Co./Fish &amp;amp; Game Rotisserie\",\"Mayflower Brewing Co.\",\"Mazama Brewing Co.\",\"McCoy's Public House and Brewkitchen\",\"McFleshman's Brewing Co.\",\"McHale's Brewhouse\",\"Melvin Brewing - Thai Me Up\",\"Melvin Brewing Co.\",\"Metazoa Brewing Co. - Stringtown Production Facility\",\"Metazoa Brewing Co. - Taproom\",\"Midland Brewing Co.\",\"Midnight Pig Beer\",\"Midwest Coast Brewing Co.\",\"Migration Brewing Co.\",\"Migration Brewing Co. - Glisan\",\"Mile High Brewing Co.\",\"Mile Wide Beer Co.\",\"Minocqua Brewing Co.\",\"Mishawaka Brewing Co.\",\"Mispillion River Brewing\",\"Missoula Brewing Co.\",\"Moab Brewery\",\"Modist Brewing Co.\",\"Moksa Brewing Co.\",\"Monday Night Brewing\",\"Monday Night Brewing - Garage\",\"Monkey Paw Brewing\",\"Monkey Paw Brewing Co.\",\"Monkless Belgian Ales\",\"Montgomery Brewing Co.\",\"Moonraker Brewing Co. - Production Facility\",\"Morgan Street Brewery\",\"Mother's Brewing Co.\",\"Mother Earth Brew Co.\",\"Motorworks Brewing\",\"MotoSonora Brewing Co.\",\"Mountain Valley Brew Pub\",\"Moylan's Brewery &amp; Restaurant\",\"Mraz Brewing Co.\",\"Munkle Brewing Co.\",\"Mystery Brewing Co.\",\"Napa Smith Brewery\",\"Narragansett Brewing Co.\",\"Nashville Brewing Co.\",\"Native Brewing Co.\",\"Nebraska Brewing Co. - Papillion\",\"Nedloh Brewing Co.\",\"Neshaminy Creek Brewing\",\"Neuweiler Brewing Co. Inc\",\"Nevin's Brewing Co.\",\"New Bohemia Brewing Co.\",\"New English Brewing Co.\",\"New Glarus Brewing Co. - Hilltop\",\"New Magnolia Brewing Co.\",\"New Mexico Brewers Guild\",\"New Planet Beer Co.\",\"New Road Brew House\",\"New Trail Brewing Co.\",\"Night Shift Brewing\",\"Nine-Band Brewing Co.\",\"No-Li Brewhouse\",\"Noble Beast Brewing Co.\",\"NoDa Brewing Co. - Davidson\",\"Noon Whistle Brewing Co.\",\"Nor'wester Brewery\",\"North By Northwest Restaurant and Brewery - Slaughter\",\"North East Brewing Co. Inc\",\"North Park Beer Co.\",\"O'Connor Brewing Co.\",\"O'so Brewing\",\"O.H.S.O. Brewery - Gilbert\",\"O.H.S.O. Brewery + Distillery\",\"Oak Highlands Brewery\",\"Oasis, Texas Brewing Co.\",\"OB Brewery\",\"Ocelot Brewing\",\"Ocelot Brewing Co.\",\"Odd13 Brewing\",\"Off Color Brewing\",\"Offshore Ale Co.\",\"Oggi's Sports Brewhouse Pizza\",\"Ohana Brewing Co.\",\"Old Bust Head Brewing Co.\",\"Old Schoolhouse Brewery\",\"Olde Auburn Ale House\",\"Olde Peninsula Brewpub &amp; Restaurant\",\"Omission Brewing Co.\",\"On Tap Bistro &amp; Brewery\",\"On Tour Brewing Co.\",\"One Barrel Brewing Co.\",\"Oregon Ale And Beer Co.\",\"Oregon City Brewing Co.\",\"Ornery Beer Co.\",\"Orpheus Brewing\",\"Ortlieb's Brewery &amp; Grille\",\"Otter Creek Brewing Co.\",\"Otto Brothers Brewing Co.\",\"Our Mutual Friend Malt &amp; Brew\",\"Out of Bounds Brewing Co.\",\"Outer Banks Brewing Co.\",\"P.H. Woods\",\"P.H. Woods Restaurant &amp; Brewery\",\"Pacific Beach Brewhouse\",\"Paducah Beer Werks\",\"Pagosa Brewing Co.\",\"Panther Island Brewing\",\"Paradigm Shift Brewing\",\"Parish Brewing Co.\",\"Park Slope Brewing Co.\",\"Pedal Haus Brewery\",\"Pelican Brewing Co. - Tillamook\",\"Pelican Pub &amp;amp; Brewery\",\"Perrin Brewing Co.\",\"Perry Street Brewing\",\"Phantom Ales\",\"Philipsburg Brewing Co. - The Vault\",\"Pig's Eye Brewing Co.\",\"Pig's Eye Brewing Co. LLC\",\"Pinellas Ale Works\",\"Piney River Brewing Co.\",\"Pinthouse Pizza\",\"Pinthouse Pizza - South Lamar\",\"Pinthouse Pizza Craft Brewpub\",\"Pisgah Brewing Co.\",\"Pizza Port - Bressi Ranch\",\"Pizza Port Bressi Ranch\",\"Platform Beer Co.\",\"Platt Park Brewing Co.\",\"Pocock Brewing Co.\",\"Pond Farm Brewing Co.\",\"Precarious Beer Project - Precarious Beer Hall\",\"Precarious Beer Project E2=80=93 Beer Hall\",\"Primitive Beer\",\"Printer's Ale Manufacturing Co.\",\"Prison City Brewing\",\"Prodigal Brewery (The)\",\"Proper Brewing Co.\",\"Prost Brewing\",\"Prost Brewing Co.\",\"PT's Brewing Co.\",\"Public Coast Brewing Company\",\"Pug Ryan's Brewing Co.\",\"Pug Ryans Brewery\",\"Pump House Restaurant &amp; Brewery\",\"Pure Project\",\"Quincy Ships Brewing Co.\",\"Rabbit Hole Brewing\",\"Rahr &amp; Sons Brewing\",\"Raised Grain Brewing Co.\",\"Raleigh Brewing Co.\",\"RAM Restaurant &amp; Brewery - Schaumburg\",\"Ram Restaurant &amp; Brewery - Seattle\",\"RAM Restaurant &amp; Brewery - Seattle\",\"Ram Restaurant &amp; Brewery (2)\",\"Ram Restaurant and Brewery - Illinois\",\"Ram Restaurant and Brewery - Indianapolis\",\"RAM Restaurant and Brewery - Lakewood\",\"RAM/Big Horn Brewery - Seattle\",\"RAM/Big Horn Brewery - Wheeling\",\"Random Row Brewing Co.\",\"Ratio Beerworks\",\"Red Ass Brewing Co.\",\"Red Cypress Brewery\",\"Red Lodge Ales / H &amp; H Brewing Co.\",\"Red Rock Brewing Co. - Production\",\"Red Star Brewery &amp; Grille\",\"Redhook Ales - Portsmouth\",\"Redrock Brewery\",\"Refuge Brewery\",\"Renegade Brewing Co.\",\"Resident Brewing Co.\",\"Reuben's Brews - Production Brewery\",\"Revelation Craft Brewing Co.\",\"Revolver Brewing\",\"Rhinegeist - Innovation Brewery\",\"Rhinegeist Brewing\",\"Rhomberg Brewing Co.\",\"Rip Current Brewing\",\"River Bluff Brewing\",\"River Dog Brewing Co.\",\"River Horse Brewing Co.\",\"River Market Brewing Co.\",\"Rivertowne Pour House\",\"RJ Rockers Brewing Co.\",\"Roadhouse Brewing Co.\",\"Roak Brewing Co.\",\"Rochester Mills Beer Co.\",\"Rock Bottom Arlington\",\"Rock Bottom Brewery - Arlington\",\"Rock Bottom Brewery - Bellevue\",\"Rock Bottom Brewery - Campbell\",\"Rock Bottom Brewery - Campbell, CA\",\"Rock Bottom Brewery - Denver\",\"Rock Bottom Brewery - Des Moines\",\"Rock Bottom Brewery - La Jolla\",\"Rock Bottom Brewery - Milwaukee\",\"Rock Bottom Brewery - Orland Park\",\"Rock Bottom Brewery - Pittsburgh\",\"Rock Bottom Brewery - Scottsdale\",\"Rock Bottom Brewery - Seattle\",\"Rock Bottom King of Prussia\",\"Rockford Brewing Co. - Rockford, Michigan\",\"Rockwell Beer Co.\",\"Rocky River Brewing Co. - Tennessee\",\"Rogue Ales Issaquah Brewhouse\",\"Rohrbach Brewing Co.\",\"Roundhouse Brewery\",\"Royal Docks Brewhouse and Cannery\",\"Royal Oak Brewery (The)\",\"Rubicon Brewing Company Pub\",\"Russian River Brewing Co. - Production\",\"Russian River Brewing Co. Dry Creek Valley\",\"Sacramento Brewing Co.\",\"Sam Adams Brew House\",\"Samuel Adams - Cincinnati Brewery\",\"Samuel Adams Brewing Co.\",\"San Juan Island Brewing Co.\",\"Sanctum Brewing Co.\",\"SandLot\",\"SandLot Brewery at Coors Field\",\"Sanford Brewing Co.\",\"Sanitas Brewing Co.\",\"Santa Maria Brewing Co.\",\"Saranac/F.X. Matt Brewing Co.\",\"Sarasota Brewing Co.\",\"Schlafly Beer/The Saint Louis Brewery\",\"Scorched Earth Brewing Co.\",\"Scratch Brewing Co.\",\"Sea Dog Brewing Co. (No 2)\",\"Seagram Beverages\",\"Seedstock Brewery\",\"Seismic Brewing Co.\",\"Shades Brewing\",\"Shades of Pale Brewery\",\"Shine Brewing Co.\",\"Shmaltz Brewing Co.\",\"Side Project Brewing\",\"Silver Branch Brewing Co.\",\"Silver City Restaurant &amp; Brewery\",\"SingleSpeed Brewing\",\"Six Ten Brewing\",\"Slack Tide Brewing Co.\",\"Sleeping Giant Brewing Co.\",\"Sleeping Lady Brewing Co/Snow Goose Restaurant\",\"SLO Brew\",\"SLO Brewing Co. - Paso Robles\",\"Smartmouth Brewing Co.\",\"Smog City Brewing\",\"Smog City Brewing Co.\",\"Smog City Brewing Wood Cellar\",\"Snake River Brewing of Lander\",\"Snow Goose Restaurant and Sleeping Lady Brewing Co.\",\"Sockeye Brewing\",\"Solid Rock Brewing\",\"Sophisticated Otter Brewing Co.\",\"Sound Brewery\",\"South Park Brewing - CA\",\"Spangalang Brewery\",\"Speakeasy Ales &amp; Lagers\",\"Spearfish Brewing Co.\",\"Spencer Devon Brewing\",\"Spilled Grain Brewhouse\",\"SpindleTap Brewery\",\"Sports City CafC3=A9= &amp; Brewery\",\"Spring Street Brewing Co.\",\"Squatters and Wasatch Beers\",\"Squatters Beer\",\"Squatters Craft Beers\",\"St. Florian's Brewery\",\"Stadium Pizza Main St.\",\"Standard Deviant Brewing\",\"Stanislaus Area Association\",\"Stark Mill Brewery\",\"Starr Brothers Brewing Co.\",\"Starr Hill Pilot Brewery &amp;amp; Side Stage\",\"Station 26 Brewing Co.\",\"Steelhead Brewery - Irvine\",\"Steelhead Brewing Co. - Burlingame\",\"Stickman Brews\",\"StillFire Brewing\",\"Stillmank Brewing Co.\",\"StormBreaker Brewing\",\"Stoudts Brewing Co.\",\"Studio Brew\",\"Sullivan's Black Forest Brew Haus &amp; Grill\",\"Sun King Brewery\",\"Sun King Brewing\",\"Sun King Brewing - Fishers Small Batch\",\"SunUp Brewing Co.\",\"Susquehanna Brewing Co.\",\"Swamp Rabbit Brewery &amp; Taproom\",\"Swashbuckler Brewing Co.\",\"T-Bonz Homegrown Ales\",\"Taft's Ale House\",\"TaftE2=80=99s Brewing Co.\",\"Tampa Bay Brewing Co.\",\"Tampa Bay Brewing Co. - Ybor City\",\"Tap &amp;amp; Growler\",\"Tap It Brewing Co.\",\"Tapistry Brewing Co.\",\"TAPS Brewery &amp; Barrel Room\",\"TAPS Brewery &amp;amp; Barrel Room\",\"TAPS Fish House &amp;amp; Brewery\",\"TAPS Fish House and Brewery\",\"Taxman Brewing Co.\",\"Temblor Brewing Co.\",\"Ten Pin Brewing Co.\",\"Tenaya Creek\",\"Tenaya Creek Brewery\",\"Tequesta Brewing Co.\",\"Territorial Brewing Co.\",\"Texas Beer Co.\",\"The Beer Co.\",\"The Brew Kettle Taproom and Smokehouse\",\"The Chamber By Wooden Robot Brewery\",\"The Civil Life Brewing Co.\",\"The Northampton Brewery\",\"The Packinghouse Brewing Co.\",\"The Royal Oak Brewery\",\"The Sandlot\",\"The Sandlot Brewery at Coors Field\",\"The Sycamore Brewing Cannery\",\"The Tap Beer Co.\",\"The Tap Brewery\",\"The Vanguard Brewpub &amp; Distillery\",\"The Wrecking Bar Brewpub\",\"Thirsty Monk Pub Brewery\",\"Thirsty Planet Brewing\",\"Thomas Creek Brewery\",\"Thornapple Brewing Co.\",\"Thousand Oaks Brewing Co.\",\"Three Creeks Production\",\"Three Floyds Brewing Co. LLC\",\"Three Magnets Brewing\",\"Three Mile Brewing Co.\",\"Three Needs Brewery\",\"Three Notch'd Brewing Co.\",\"Thunderhawk Alements\",\"Thunderhead Brewing Co.\",\"Tied House Cafe &amp; Brewery - Mtn View\",\"Tin Roof Brewing Co.\",\"Toltec Brewing Co.\",\"Topa Topa Brewing Co.\",\"Torched Hop Brewing Co.\",\"Town Brewing Co.\",\"Track 7 Brewing Co. - Natomas\",\"Trap Rock Restaurant and Brewery\",\"TrC3=B6egs Brewi=ng Co.\",\"Tri-City Brewing Co.\",\"Tribus Beer Co.\",\"Tribute Brewing Co.\",\"Trim Tab Brewing\",\"Trinity Brewing\",\"Triple C Brewing Co.\",\"Triton Brewing Co.\",\"Triumph Brewing Co. of Philadelphia\",\"Triumph Brewing Co. of Princeton\",\"Trout Brook Brewing Co.\",\"Trout Creek Brewing Co.\",\"True Anomaly Brewing Co.\",\"True Vine Brewing Co.\",\"Trustworthy Brewing Co.\",\"Tumbleroot Brewery and Distillery\",\"Turtle Mountain Brewing Co.\",\"Twin Peaks Brewery\",\"Twin Sisters Brewing Co.\",\"Two Beers Brewing Co.\",\"Two Kilts Brewing\",\"Two Roads Brewing Co.\",\"Two Roots Brewing Co.\",\"Union Craft Brewing Co.\",\"Unique Beers\",\"Unlikely Cowboy Restaurant &amp; Brewery (The)\",\"Unsung Brewing Co.\",\"Urban Roots Brewing &amp;amp; Smokehouse\",\"Urban South Brewery - New Orleans\",\"URBN St. Brewing Co.\",\"Ursa Minor Brewing\",\"Utah Brewers Co-op\",\"Utepils Brewing Co.\",\"Vail Brewing Co. - Vail Village Pilot\",\"Val Blatz Brewery\",\"Vallensons' Brewing Co.\",\"Valley Brewing Co.\",\"Valley Forge Brewing Co.\",\"Verboten Brewing\",\"Vertigo Brewing\",\"Village Brewery\",\"Village Idiot Brewing Co.\",\"Vine Street Pub &amp; Brewery\",\"Vino's Pizza*Pub*Brewery\",\"Virginia Brewing Co.\",\"von Trapp Brewing\",\"Voodoo Brewery\",\"Wachusett Brewing Co.\",\"Waconia Brewing Co.\",\"Walking Man Brewing\",\"Wallenpaupack Brewing Co.\",\"Wasatch Brew Pub\",\"Watch City Brewing Co.\",\"Watson Brothers Brewhouse\",\"Weasel Boy Brewing Co.\",\"Wedge Brewing Co.\",\"Weeping Radish Restaurant\",\"Weinkeller Brewery\",\"Werk Force Brewing Co.\",\"West Bros Brewery\",\"West Kill Brewing\",\"Westbound &amp; Down Brewing Co.\",\"White Rock Alehouse &amp; Brewery\",\"Wicked Weed - Funk House\",\"Wicked Weed Brewing - Asheville\",\"Wicked Weed Brewing Funkatorium\",\"Widmer Brothers Brewing\",\"Wiens Brewing Co./Wiens Family Cellars\",\"Wild Barrel Brewing Co.\",\"Wild Boar Brewing Co.\",\"Wild Ride Brewing\",\"Wild Wolf Brewing Co.\",\"William S Newman Brewing Co.\",\"Wilmington Brewing Co.\",\"Wind River Brewing Co.\",\"Wiseacre Brewing Co.\",\"Wit's End Brewing Co.\",\"Wolf's Ridge Brewing\",\"Wolf's Ridge Brewing - Production Operations\",\"Wolf Tongue Brewery\",\"Wooden Robot\",\"Wormtown Brewery\",\"Wormtown Brewing Co.\",\"Worthy Brewing Co.\",\"Wynwood Brewing Co.\",\"Yak and Yeti Brewpub\",\"Yakima Brewing\",\"Yeast of Eden\",\"Yellow Springs Brewery\",\"Zele International\",\"Zipline Brewing Co.\",\"Zoiglhaus Brewing Co.\",\"ZwanzigZ Brewing\"],[60,56,54,39,32,32,32,28,26,26,25,25,24,23,22,21,21,21,20,19,19,18,17,17,17,17,17,17,16,16,15,15,15,15,15,15,15,14,14,14,14,14,14,14,13,13,13,13,13,13,13,13,13,13,12,12,12,12,12,12,11,11,11,11,11,11,11,11,11,11,11,10,10,10,10,10,10,10,10,10,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>brewery<\\/th>\\n      <th>n<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":2},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}\r\nbeer_awards %>% \r\n  count(category, sort = TRUE) %>% \r\n  DT::datatable()\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\",\"51\",\"52\",\"53\",\"54\",\"55\",\"56\",\"57\",\"58\",\"59\",\"60\",\"61\",\"62\",\"63\",\"64\",\"65\",\"66\",\"67\",\"68\",\"69\",\"70\",\"71\",\"72\",\"73\",\"74\",\"75\",\"76\",\"77\",\"78\",\"79\",\"80\",\"81\",\"82\",\"83\",\"84\",\"85\",\"86\",\"87\",\"88\",\"89\",\"90\",\"91\",\"92\",\"93\",\"94\",\"95\",\"96\",\"97\",\"98\",\"99\",\"100\",\"101\",\"102\",\"103\",\"104\",\"105\",\"106\",\"107\",\"108\",\"109\",\"110\",\"111\",\"112\",\"113\",\"114\",\"115\",\"116\",\"117\",\"118\",\"119\",\"120\",\"121\",\"122\",\"123\",\"124\",\"125\",\"126\",\"127\",\"128\",\"129\",\"130\",\"131\",\"132\",\"133\",\"134\",\"135\",\"136\",\"137\",\"138\",\"139\",\"140\",\"141\",\"142\",\"143\",\"144\",\"145\",\"146\",\"147\",\"148\",\"149\",\"150\",\"151\",\"152\",\"153\",\"154\",\"155\",\"156\",\"157\",\"158\",\"159\",\"160\",\"161\",\"162\",\"163\",\"164\",\"165\",\"166\",\"167\",\"168\",\"169\",\"170\",\"171\",\"172\",\"173\",\"174\",\"175\",\"176\",\"177\",\"178\",\"179\",\"180\",\"181\",\"182\",\"183\",\"184\",\"185\",\"186\",\"187\",\"188\",\"189\",\"190\",\"191\",\"192\",\"193\",\"194\",\"195\",\"196\",\"197\",\"198\",\"199\",\"200\",\"201\",\"202\",\"203\",\"204\",\"205\",\"206\",\"207\",\"208\",\"209\",\"210\",\"211\",\"212\",\"213\",\"214\",\"215\",\"216\",\"217\",\"218\",\"219\",\"220\",\"221\",\"222\",\"223\",\"224\",\"225\",\"226\",\"227\",\"228\",\"229\",\"230\",\"231\",\"232\",\"233\",\"234\",\"235\",\"236\",\"237\",\"238\",\"239\",\"240\",\"241\",\"242\",\"243\",\"244\",\"245\",\"246\",\"247\",\"248\",\"249\",\"250\",\"251\",\"252\",\"253\",\"254\",\"255\",\"256\",\"257\",\"258\",\"259\",\"260\",\"261\",\"262\",\"263\",\"264\",\"265\",\"266\",\"267\",\"268\",\"269\",\"270\",\"271\",\"272\",\"273\",\"274\",\"275\",\"276\",\"277\",\"278\",\"279\",\"280\",\"281\",\"282\",\"283\",\"284\",\"285\",\"286\",\"287\",\"288\",\"289\",\"290\",\"291\",\"292\",\"293\",\"294\",\"295\",\"296\",\"297\",\"298\",\"299\",\"300\",\"301\",\"302\",\"303\",\"304\",\"305\",\"306\",\"307\",\"308\",\"309\",\"310\",\"311\",\"312\",\"313\",\"314\",\"315\",\"316\",\"317\",\"318\",\"319\",\"320\",\"321\",\"322\",\"323\",\"324\",\"325\",\"326\",\"327\",\"328\",\"329\",\"330\",\"331\",\"332\",\"333\",\"334\",\"335\",\"336\",\"337\",\"338\",\"339\",\"340\",\"341\",\"342\",\"343\",\"344\",\"345\",\"346\",\"347\",\"348\",\"349\",\"350\",\"351\",\"352\",\"353\",\"354\",\"355\",\"356\",\"357\",\"358\",\"359\",\"360\",\"361\",\"362\",\"363\",\"364\",\"365\",\"366\",\"367\",\"368\",\"369\",\"370\",\"371\",\"372\",\"373\",\"374\",\"375\",\"376\",\"377\",\"378\",\"379\",\"380\",\"381\",\"382\",\"383\",\"384\",\"385\",\"386\",\"387\",\"388\",\"389\",\"390\",\"391\",\"392\",\"393\",\"394\",\"395\",\"396\",\"397\",\"398\",\"399\",\"400\",\"401\",\"402\",\"403\",\"404\",\"405\",\"406\",\"407\",\"408\",\"409\",\"410\",\"411\",\"412\",\"413\",\"414\",\"415\",\"416\",\"417\",\"418\",\"419\",\"420\",\"421\",\"422\",\"423\",\"424\",\"425\",\"426\",\"427\",\"428\",\"429\",\"430\",\"431\",\"432\",\"433\",\"434\",\"435\",\"436\",\"437\",\"438\",\"439\",\"440\",\"441\",\"442\",\"443\",\"444\",\"445\",\"446\",\"447\",\"448\",\"449\",\"450\",\"451\",\"452\",\"453\",\"454\",\"455\",\"456\",\"457\",\"458\",\"459\",\"460\",\"461\",\"462\",\"463\",\"464\",\"465\",\"466\",\"467\",\"468\",\"469\",\"470\",\"471\",\"472\",\"473\",\"474\",\"475\",\"476\",\"477\",\"478\",\"479\",\"480\",\"481\",\"482\",\"483\",\"484\",\"485\",\"486\",\"487\",\"488\",\"489\",\"490\",\"491\",\"492\",\"493\",\"494\",\"495\",\"496\",\"497\",\"498\",\"499\",\"500\",\"501\",\"502\",\"503\",\"504\",\"505\",\"506\",\"507\",\"508\",\"509\",\"510\",\"511\",\"512\",\"513\",\"514\",\"515\"],[\"Classic Irish-Style Dry Stout\",\"American-Style Pale Ale\",\"Bock\",\"Robust Porter\",\"Imperial Stout\",\"German-Style Pilsener\",\"German-Style Wheat Ale\",\"American-Style Amber Lager\",\"Brown Porter\",\"Irish-Style Red Ale\",\"American-Style Brown Ale\",\"Golden or Blonde Ale\",\"Vienna-Style Lager\",\"American-Style India Pale Ale\",\"Oatmeal Stout\",\"Barley Wine-Style Ale\",\"Rye Beer\",\"Specialty Beer\",\"Experimental Beer\",\"Scottish-Style Ale\",\"English-Style Summer Ale\",\"American-Style Wheat Beer\",\"English-Style Brown Ale\",\"American-Style Strong Pale Ale\",\"English-Style India Pale Ale\",\"American-Style Stout\",\"Herb and Spice Beer\",\"American-Style Amber/Red Ale\",\"Wood- and Barrel-Aged Beer\",\"American-Style Dark Lager\",\"American-Style Specialty Lager\",\"Belgian- and French-Style Ale\",\"Belgian-Style Abbey Ale\",\"Belgian-Style Witbier\",\"German-Style Schwarzbier\",\"Proam\",\"Sweet Stout\",\"Wood- and Barrel-Aged Strong Beer\",\"Baltic-Style Porter\",\"Old Ale or Strong Ale\",\"Belgian-Style Lambic or Sour Ale\",\"Belgian-Style Strong Specialty Ale\",\"Dortmunder or German-Style Oktoberfest\",\"Wood- and Barrel-Aged Sour Beer\",\"Aged Beer\",\"American-Style Sour Ale\",\"Bohemian Style Pilsener\",\"Munich-Style Helles\",\"Other Strong Beer\",\"American-Style Light Lager\",\"Bohemian-Style Pilsener\",\"Classic English Style Pale Ale\",\"Imperial Red Ale\",\"American-Style Lager\",\"Classic English-Style Pale Ale\",\"Ordinary or Special Bitter\",\"Scotch Ale\",\"Wood- and Barrel-Aged Strong Stout\",\"Imperial India Pale Ale\",\"South German-Style Hefeweizen\",\"Strong Scotch Ale\",\"Extra Special Bitter\",\"German-Style Altbier\",\"Chocolate Beer\",\"Coffee Beer\",\"Session Beer\",\"Smoke Beer\",\"American-Belgo-Style Ale\",\"American-Style Black Ale\",\"European-Style Pilsener\",\"Kellerbier or Zwickelbier\",\"Fruit Wheat Beer\",\"Gluten-Free Beer\",\"American-Style Premium Lager\",\"German-Style Doppelbock or Eisbock\",\"Specialty Honey Beer\",\"Coffee Flavored Beer\",\"English-Style Mild Ale\",\"Field Beer\",\"Fruit Beer\",\"German-Style Sour Ale\",\"Pro-Am Competition\",\"Smoke-Flavored Beer\",\"American-Style Fruit Beer\",\"American-Style Cream Ale\",\"Extra Special Bitter or Strong Bitter\",\"French- and Belgian-Style Saison\",\"Munchner-Style Helles\",\"American-Style or International-Style Pilsener\",\"American-Style Wheat Beer With Yeast\",\"Belgian-Style Sour Ale\",\"Bitter\",\"Foreign Style Stout\",\"German-Style Kolsch / Koln-Style Kolsch\",\"Honey Beer\",\"India Pale Ale\",\"Sweet Stout or Cream Stout\",\"Belgian-Style Blonde Ale or Pale Ale\",\"Belgian-Style Fruit Beer\",\"Belgian-Style Tripel\",\"Brett Beer\",\"German-Style Maerzen\",\"Historical Beer\",\"Other Belgian-Style Ale\",\"Other Strong Ale or Lager\",\"Session India Pale Ale\",\"Classic Saison\",\"Dark Lager\",\"European-Style Dark / Munchner Dunkel\",\"European-Style Dunkel\",\"American-Style Amber / Red Ale\",\"Imperial or Double India Pale Ale\",\"Experimental Beer (Lager or Ale)\",\"Export Stout\",\"Foreign-Style Stout\",\"German-Style Doppelbock\",\"Golden Ale / Canadian Style Ale\",\"International-Style Pilsener\",\"Stouts\",\"American-Style Hefeweizen\",\"American Lager\",\"Barley Wine\",\"Chili Beer\",\"Coffee Stout or Porter\",\"Fruited Wood- and Barrel-Aged Sour Beer\",\"German-Style Maerzen / Oktoberfest\",\"German-Style MC3=A4rzen\",\"Imperial or Double Red Ale\",\"Old Ale/Strong Ale\",\"Porters\",\"Specialty Saison\",\"Alts\",\"American Light Lager\",\"German-Style KC3=B6lsch\",\"German-Style Koelsch\",\"Gluten Free Beer\",\"Non-Alcoholic (Beer) Malt Beverage\",\"Smoke Flavored Beers\",\"Specialty\",\"American-Style Lager or Light Lager\",\"American Premium Lager\",\"British Stout\",\"Cellar or Unfiltered Beer\",\"European Pilsner\",\"Foreign (Export)-Style Stout\",\"Fruit And Vegetable Beer\",\"German-Style Brown Ale / Dusseldorf-Style Altbier\",\"German-Style Strong Bock\",\"International-Style Pale Ale\",\"Light Lager\",\"Mixed-Culture Brett Beer\",\"American-Style Cream Ale or Lager\",\"American Malt Liquor\",\"American Wheat Ale Or Lager\",\"Barley Wines\",\"Bocks\",\"Double Red Ale\",\"Fruited American-Style Sour Ale\",\"Marzen / Oktoberfeset\",\"Pale Ales\",\"Pumpkin/Squash Beer or Pumpkin Spice Beer\",\"Scottish Style Ale\",\"Strong Ales\",\"American-Style \\\"Light\\\" Amber Lager\",\"American-Style Specialty Lager or Cream Ale or Lager\",\"American Dark Lager\",\"American Lagers\",\"American Pale Ale\",\"English Style Brown Ale\",\"German Style Schwarzbier\",\"Herb and Spice or Chocolate Beer\",\"Juicy or Hazy Pale Ale\",\"Pumpkin Beer\",\"Raspberry Beers\",\"Smoke-Flavored Beers\",\"Specialty Honey Lager or Ale\",\"Strong Ale\",\"Vienna Style Lager\",\"Amber Ales\",\"Amber Lager\",\"American-Style Brett Ale\",\"American-Style Brett Beer\",\"American-Style Lager or Premium Lager\",\"American-Style Lager, Light Lager or Premium Lager\",\"American Amber Ale\",\"American Light Lagers\",\"Australian-Style Pale Ale\",\"Barley Wine Style Ale\",\"Belgian- &amp; French-Style Specialty Ales\",\"Belgian-Style Ales\",\"Blonde Ale\",\"Brown Ales\",\"Double Hoppy Red Ale\",\"English Brown Ale\",\"English Style Bitter\",\"European Style Pilsener\",\"Field Beer or Pumpkin Beer\",\"Fresh or Wet Hop Ale\",\"Fruit, Vegetable\",\"Fruit, Vegetables\",\"Herb / Spice Beers\",\"India Pale Ales\",\"Indigenous Beer\",\"Juicy or Hazy India Pale Ale\",\"Kellerbier/Zwickelbier\",\"Kolsch\",\"Munchener Helles\",\"South German-Style Hefeweizen/Hefeweissbier\",\"Specialty Stouts\",\"Wheat Beers\",\"(Extra Special) Strong Bitter\",\"Aged Beer (Ale or Lager)\",\"Amber/Viennas\",\"American-Style Wheat Ale or Lager\",\"American Brown Ale\",\"American Brown Ales\",\"American Lager/Ale or Cream Ale\",\"American Light Pilsners\",\"American Premium Lagers\",\"American Wheats\",\"Australian-Style or International-Style Pale Ale\",\"Belgian-Style White (or Wit) / Belgian-Style Wheat\",\"Belgian-Style White (or Wit)/Belgian-Style\",\"Belgian Style Ale\",\"Belgian Style Ales\",\"Belgian Style Specialty Ales\",\"Belgian Style Strong Specialty Ale\",\"Berliner-Style Weisse\",\"Bitter or Pale Mild Ale\",\"Blond/Golden Ales\",\"Collab\",\"Contemporary Gose\",\"Doppelbock\",\"Dry Stouts\",\"English Style (Extra Special) Strong Bitter\",\"French- and Belgian Style Saison\",\"Fresh Hop Ale\",\"Munchener Helles And Export\",\"Porter\",\"Scottish Ales\",\"Smoked Beer\",\"Specialty Beers\",\"Wood- and Barrel-aged Beer\",\"American-Style Amber Ale\",\"American-Style Wheat Ale Or Lager\",\"American-Style Wheat Beer with Yeast\",\"American Lager-Ales\",\"American Specialty Lager\",\"Belgian-and French-Style Ale\",\"Belgian-Style Dubbel or Quadrupel\",\"Belgian and French-Style Ale\",\"Cream Ales\",\"English-Style Bitter\",\"European-Style Dark/Muchner Dunkel\",\"Fresh Hop Beer\",\"German-Style Brown Ale/Dusseldorf-Style\",\"German-Style K=C3=B6lsch\",\"German-Style MC3=A4rzen/Oktoberfest\",\"German Style Wheat Ale\",\"Herb and Spice Beers\",\"Herb, Spice\",\"Juicy or Hazy Imperial India Pale Ale\",\"Juicy or Hazy Strong Pale Ale\",\"Maerzen/Oktoberfests\",\"Marzen/Oktoberfest\",\"Munchner Helles\",\"Other Strong Ales &amp; Lagers\",\"Specialty Honey Ales Or Lagers\",\"Traditional Bitter\",\"Traditional English Style Bitter\",\"Ale, American Brown Ale\",\"Ale, Barley Wine\",\"Ale, Blonde Ale\",\"Ale, Dry Stout\",\"Ale, India Pale Ale\",\"Ale, Porter\",\"Ale, Scottish Ale\",\"Amber Ale/American Pale Ales\",\"America-Style Light Lager\",\"American-Belgo Style Ale\",\"American-Style India Black Ale\",\"American-Style Lager or American-Style Malt Liquor\",\"American-Style Lager or American-Style Pilsener\",\"American-Style Lager or Ice Lager or Malt Liquor\",\"American-Style Lager or Malt Liquor\",\"American-Style Lager/Ale or Cream\",\"American-Style Lager/Ale or Cream Ale\",\"American-Style Lager/Ale Or Cream Ale\",\"American-Style Light Lager or German-Style Light Lager\",\"American-Style or German-Style Sour Ale\",\"American-Style Pilsener\",\"American-Style Pilsener or International-Style Pilsener\",\"American-Style Sour Ale or German-Style Sour Ale\",\"American Amber Lager\",\"American Cream Ale or Lager\",\"American Dry Lager\",\"American Dry Lagers\",\"American Lager-Ale/Cream Ale\",\"American Lager / Ale or Cream Ale\",\"American Lager / Ale Or Cream Ale\",\"American Lager/Ale Cream Ale\",\"American Pilsener\",\"American Pilseners\",\"American Pilsners\",\"American Premium Dark Pilseners\",\"Belgian- &amp; French-Style Ale\",\"Belgian-Style Ale\",\"Belgian-Style Dark Strong Ale or Belgian-Style Quadrupel\",\"Belgian-Style Dubbel or Quadruple\",\"Belgian-Style Pale Strong Ale\",\"Belgian-Style Specialty Ale\",\"Belgian and French-Style Specialty Ales\",\"Belgian Style Abbey Ale\",\"Blonde/Golden Ales\",\"Bock Beers\",\"Bocks/Dopplebocks\",\"Chocolate / Cocoa Flavored Beers\",\"Continental Pilsners\",\"Dortmunder / European Style Export\",\"Dry Beers\",\"Drys\",\"English-Style (Extra Special) Strong Bitter\",\"English-Style or International-Style Pale Ale\",\"English Ale\",\"English Mild or Bitter\",\"English Old Ale / English &amp; American Strong Ales\",\"English Old Ale/Strong Ale\",\"English Style Dark Mild Ale or English-Style Brown Ale\",\"English Style Strong Bitter\",\"European-Style Dark Lager/Munich-Style Dunkel\",\"European Classic Pilseners\",\"Foreign (Export) Style Stout\",\"French- Belgian-Style Saison\",\"French-and Belgian-Style Saison\",\"French-Belgian Style Saison\",\"Fruit Beer or Field Beer\",\"Fruit Beer or Vegetable Beer\",\"Fruit or Vegetable Beer\",\"Garden Beer (Fruit &amp; Vegetable)\",\"German-Style Brown / Dusseldorf-Style Altbier\",\"German-Style Hefeweizen\",\"German Style Doppelbock or Eisbock\",\"German Style M=C3=A4rzen\",\"German Style Pilsener\",\"German Wheat Ale\",\"German Wheats\",\"Golden Ale/Canadian Style Ale\",\"Gose\",\"Herb, Spices\",\"Herb/Spice Beers\",\"International-Style Dark Lager\",\"International Dark Lager\",\"International Pale Ale\",\"International Pilsener\",\"Lager, Amber Lager\",\"Lager, American Malt Liquor\",\"Lager, American Premium Lager\",\"Malt Liquor\",\"Malt Liquors\",\"Mixed, American Wheat\",\"Mixed, Dusseldorf Altbier\",\"Mixed, European Pilsener\",\"Mixed, German Wheat\",\"Mixed, Herb, Spice\",\"Munchner Helles &amp; Dortmunder X\",\"Munich-Style Dunkel or European-Style Dark Lager\",\"Munich Style Helles\",\"Non-Alcoholic Malt Beverage\",\"Nonalcoholic Malt Beverages\",\"Other Strong Ales\",\"Pumpkin Spice Beer\",\"Smoke Flavored\",\"South German Style Hefeweizen/Hefeweissbier\",\"Specialty Berliner-Style Weisse\",\"Specialty Berliner Weisse\",\"Specialty Honey Lagers or Ales\",\"Stout\",\"Vienna/Marzen/Octoberfest Beer\",\"Wood- and Barrel-aged Strong Beer\",\"Ale, American Pale/Amber Ale\",\"Ale, Classic English Pale Ale\",\"Ale, English Brown Ale\",\"Ale, Strong Ale\",\"Ales\",\"American-Style Amber Lager or Dark Lager\",\"American-Style Lager / Ale Or Cream Ale\",\"American Cream Ales\",\"American Lager / Ale / Cream Ale\",\"American Malt Liquors\",\"American Pale/Amber Ale\",\"American Premium Dark Lagers\",\"American Premium Dark Pilsners\",\"American Premium Pilseners\",\"American Premium Pilsners\",\"Belgian-Style Strong Specialty Ales\",\"Belgian &amp; French Style Specialty Ales\",\"Chocolate / Cocoa Flavored Beer\",\"Classic Pale Ales\",\"Contemporary American-Style Pilsener\",\"Continental Amber Lagers\",\"Doppelbocks\",\"Dry Stout\",\"Dusseldorf Style Altbier\",\"Dusseldorf Style Altbiers\",\"Emerging India Pale Ale\",\"English Old Ale / English Strong Ale\",\"English Style Mild Ale\",\"English Style Old Ale / Strong Ale\",\"European-Style Dark / Munchner\",\"European Ambers\",\"European Dark/Munchner Dunkels\",\"European Darks\",\"European Style Dark / Munchener Dunkel\",\"European Style Dark/Munchener Dunkel\",\"European Style Dunkel\",\"Experimental Beer (Lager Or Ale)\",\"Experimental India Pale Ale\",\"Export/Specials\",\"Fruit Beers (other than raspberry)\",\"German-Style Dark Lager\",\"German-Style K=C3=B6lsch/K=C3=B6ln-Style K=C3=B6lsch\",\"German-Style KC3==B6lsch\",\"German Dark Lager\",\"German Style Altbier\",\"German Style Brown / Dusseldorf Style Altbier\",\"German Style Brown Ale/Dusseldorf Style Alt\",\"German Style K=C3=B6lsch\",\"German Style MC3=A4rzen\",\"German Style Strong Bock\",\"German Wheat\",\"India Pale Lager or Malt Liquor\",\"Indigenous/Regional Beer\",\"Juicy or Hazy Imperial or Double India Pale Ale\",\"Lager, American Dry Lager\",\"Lager, American Lager\",\"Lager, American Light Lager\",\"Lager, Bock\",\"Lager, Dark Lager\",\"Lager, Munchner Helles &amp; Dortmunder Export\",\"Leipzig-Style Gose or Contemporary Gose\",\"Mixed, American Lager-Ale/Cream Ale\",\"Mixed, Fruit, Vegetable\",\"Mixed, Non-Alcoholic\",\"Mixed, Smoke Flavored\",\"Non-Alcohol Beer or Alcohol-Free Beer\",\"Non Alcoholic Malt Beverages\",\"Old Ale or Strong Ale or Barley Wine-Style Ale\",\"Other Low Strength Ale or Lager\",\"Pilsener\",\"Pro-Am\",\"Rauch\",\"Scotch Ales\",\"Session Beer or Non-Alcohol Beer\",\"South German Style Hefeweizen\",\"Strong Red Ale\",\"Traditional Bitters\",\"Vienna Lager\",\"Wood-and Barrel-Aged Beer\",\"Ale, Sweet Stout\",\"Ale, Traditional Bitter\",\"American-Style Black Ale or American-Style Stout\",\"American-Style Wheat Wine Ale\",\"American Wheat\",\"Beer With Yeast\",\"Belgian-Style Ale or French-Style Ale\",\"Belgian-Style Dubbel\",\"Belgian-Style Specialty Ales\",\"Belgian-Style White (or Wit)/Belgian-Style Wheat\",\"Classic English Pale Ale\",\"Dopplebock\",\"Dortmund/Export/Specials\",\"Dortmunder/European Style Export or German-Style Oktoberfest/Wiesen (Meadow)\",\"Dusseldorf Altbier\",\"English-Style Dark Mild Ale or Brown Ale\",\"English Syle Brown Ale\",\"European-Style Dark/M=C3=BCnchner Dunkel\",\"European-Style Dark/MC3=BCnchn=er Dunkel\",\"European-Style Dark/MC3=BCnchner Dunkel\",\"European Style Dark/M=C3=BCnchner Dunkel\",\"French &amp; Belgian-Style Saison\",\"German-Style KC3=B6lsch/K=C3=B6ln-=Style K=C3=B6lsch\",\"German-Style KC3=B6lsch/K=C3=B6ln-Style K=C3=B6l=sch\",\"German-Style M=C3=A4rzen/Oktoberfest\",\"German-Style MC3==A4rzen\",\"German-Style MC3=A4=rzen/Oktoberfest\",\"German-Style MC3=A4r=zen\",\"German-Style MC3=A4rzen/Oktoberfes=t\",\"German-Style MC3=AFrzen / Oktoberfest\",\"German-Style MC3=AFrzen /= Oktoberfest\",\"German Style Brown Ale/D=C3=BCsseldorf Style Altbier\",\"German Style Brown Ale/DC3=BCsseldorf Style Altbier\",\"German Style Brown/Dusseldorf Style Alt\",\"German Style KC3=B6lsch/K==C3=B6ln Style K=C3=B6lsch\",\"German Style KC3=B6lsch/K=C3=B6ln Style K=C3=B6lsch\",\"German Style KC3=B6lsch/K=C3=B6ln Style K=C3=B6lsch=\",\"M=C3=BCnchner (Munich) Style Helles\",\"MC3=BCnchner (Munich) Style Hell=es\",\"Mixed, Specialty\",\"Muenchers\",\"Munchner Helles And Export\",\"Old Ale / Strong Ale\",\"Other Strong Ales &amp;amp; Lagers\",\"Out of Category =E2=80=93 Traditionally Brewed Beer\",\"Out of Category E2=80=93 Traditionally B=rewed Beer\",\"Out of Category E2=80=93 Traditionally Bre=wed Beer\",\"Out of Category E2=80=93 Traditionally Brewed B=eer\",\"Out of Category E2=80=93 Traditionally Brewed Beer&lt;=/\",\"Pumpkin/Squash Beer\",\"Scottish-Style Ales\",\"Scottish Ale\",\"Specialty Ales\",\"Specialty Honey Ales Or Lager\",\"Vienna\",\"Vienna Style Lagers\",\"Weizen\"],[62,61,61,61,60,59,56,55,55,53,51,49,49,48,48,47,47,47,45,45,44,43,43,42,41,36,36,35,35,34,34,34,34,34,34,34,33,33,32,32,31,31,31,31,30,30,30,30,30,29,29,29,29,28,28,28,28,28,27,27,27,26,26,25,25,25,25,24,24,24,24,23,23,22,22,22,21,21,21,21,21,21,21,20,19,19,18,18,17,17,17,16,16,16,16,16,16,15,15,15,15,15,15,15,15,15,14,14,14,14,13,13,12,12,12,12,12,12,12,11,11,11,11,11,11,11,11,11,11,11,11,10,10,10,10,10,10,10,10,9,9,9,9,9,9,9,9,9,9,9,9,8,8,8,8,8,8,8,8,8,8,8,8,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>category<\\/th>\\n      <th>n<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":2},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}\r\nbeer_awards %>% \r\n  count(city, sort = TRUE) %>% \r\n  DT::datatable()\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\",\"51\",\"52\",\"53\",\"54\",\"55\",\"56\",\"57\",\"58\",\"59\",\"60\",\"61\",\"62\",\"63\",\"64\",\"65\",\"66\",\"67\",\"68\",\"69\",\"70\",\"71\",\"72\",\"73\",\"74\",\"75\",\"76\",\"77\",\"78\",\"79\",\"80\",\"81\",\"82\",\"83\",\"84\",\"85\",\"86\",\"87\",\"88\",\"89\",\"90\",\"91\",\"92\",\"93\",\"94\",\"95\",\"96\",\"97\",\"98\",\"99\",\"100\",\"101\",\"102\",\"103\",\"104\",\"105\",\"106\",\"107\",\"108\",\"109\",\"110\",\"111\",\"112\",\"113\",\"114\",\"115\",\"116\",\"117\",\"118\",\"119\",\"120\",\"121\",\"122\",\"123\",\"124\",\"125\",\"126\",\"127\",\"128\",\"129\",\"130\",\"131\",\"132\",\"133\",\"134\",\"135\",\"136\",\"137\",\"138\",\"139\",\"140\",\"141\",\"142\",\"143\",\"144\",\"145\",\"146\",\"147\",\"148\",\"149\",\"150\",\"151\",\"152\",\"153\",\"154\",\"155\",\"156\",\"157\",\"158\",\"159\",\"160\",\"161\",\"162\",\"163\",\"164\",\"165\",\"166\",\"167\",\"168\",\"169\",\"170\",\"171\",\"172\",\"173\",\"174\",\"175\",\"176\",\"177\",\"178\",\"179\",\"180\",\"181\",\"182\",\"183\",\"184\",\"185\",\"186\",\"187\",\"188\",\"189\",\"190\",\"191\",\"192\",\"193\",\"194\",\"195\",\"196\",\"197\",\"198\",\"199\",\"200\",\"201\",\"202\",\"203\",\"204\",\"205\",\"206\",\"207\",\"208\",\"209\",\"210\",\"211\",\"212\",\"213\",\"214\",\"215\",\"216\",\"217\",\"218\",\"219\",\"220\",\"221\",\"222\",\"223\",\"224\",\"225\",\"226\",\"227\",\"228\",\"229\",\"230\",\"231\",\"232\",\"233\",\"234\",\"235\",\"236\",\"237\",\"238\",\"239\",\"240\",\"241\",\"242\",\"243\",\"244\",\"245\",\"246\",\"247\",\"248\",\"249\",\"250\",\"251\",\"252\",\"253\",\"254\",\"255\",\"256\",\"257\",\"258\",\"259\",\"260\",\"261\",\"262\",\"263\",\"264\",\"265\",\"266\",\"267\",\"268\",\"269\",\"270\",\"271\",\"272\",\"273\",\"274\",\"275\",\"276\",\"277\",\"278\",\"279\",\"280\",\"281\",\"282\",\"283\",\"284\",\"285\",\"286\",\"287\",\"288\",\"289\",\"290\",\"291\",\"292\",\"293\",\"294\",\"295\",\"296\",\"297\",\"298\",\"299\",\"300\",\"301\",\"302\",\"303\",\"304\",\"305\",\"306\",\"307\",\"308\",\"309\",\"310\",\"311\",\"312\",\"313\",\"314\",\"315\",\"316\",\"317\",\"318\",\"319\",\"320\",\"321\",\"322\",\"323\",\"324\",\"325\",\"326\",\"327\",\"328\",\"329\",\"330\",\"331\",\"332\",\"333\",\"334\",\"335\",\"336\",\"337\",\"338\",\"339\",\"340\",\"341\",\"342\",\"343\",\"344\",\"345\",\"346\",\"347\",\"348\",\"349\",\"350\",\"351\",\"352\",\"353\",\"354\",\"355\",\"356\",\"357\",\"358\",\"359\",\"360\",\"361\",\"362\",\"363\",\"364\",\"365\",\"366\",\"367\",\"368\",\"369\",\"370\",\"371\",\"372\",\"373\",\"374\",\"375\",\"376\",\"377\",\"378\",\"379\",\"380\",\"381\",\"382\",\"383\",\"384\",\"385\",\"386\",\"387\",\"388\",\"389\",\"390\",\"391\",\"392\",\"393\",\"394\",\"395\",\"396\",\"397\",\"398\",\"399\",\"400\",\"401\",\"402\",\"403\",\"404\",\"405\",\"406\",\"407\",\"408\",\"409\",\"410\",\"411\",\"412\",\"413\",\"414\",\"415\",\"416\",\"417\",\"418\",\"419\",\"420\",\"421\",\"422\",\"423\",\"424\",\"425\",\"426\",\"427\",\"428\",\"429\",\"430\",\"431\",\"432\",\"433\",\"434\",\"435\",\"436\",\"437\",\"438\",\"439\",\"440\",\"441\",\"442\",\"443\",\"444\",\"445\",\"446\",\"447\",\"448\",\"449\",\"450\",\"451\",\"452\",\"453\",\"454\",\"455\",\"456\",\"457\",\"458\",\"459\",\"460\",\"461\",\"462\",\"463\",\"464\",\"465\",\"466\",\"467\",\"468\",\"469\",\"470\",\"471\",\"472\",\"473\",\"474\",\"475\",\"476\",\"477\",\"478\",\"479\",\"480\",\"481\",\"482\",\"483\",\"484\",\"485\",\"486\",\"487\",\"488\",\"489\",\"490\",\"491\",\"492\",\"493\",\"494\",\"495\",\"496\",\"497\",\"498\",\"499\",\"500\",\"501\",\"502\",\"503\",\"504\",\"505\",\"506\",\"507\",\"508\",\"509\",\"510\",\"511\",\"512\",\"513\",\"514\",\"515\",\"516\",\"517\",\"518\",\"519\",\"520\",\"521\",\"522\",\"523\",\"524\",\"525\",\"526\",\"527\",\"528\",\"529\",\"530\",\"531\",\"532\",\"533\",\"534\",\"535\",\"536\",\"537\",\"538\",\"539\",\"540\",\"541\",\"542\",\"543\",\"544\",\"545\",\"546\",\"547\",\"548\",\"549\",\"550\",\"551\",\"552\",\"553\",\"554\",\"555\",\"556\",\"557\",\"558\",\"559\",\"560\",\"561\",\"562\",\"563\",\"564\",\"565\",\"566\",\"567\",\"568\",\"569\",\"570\",\"571\",\"572\",\"573\",\"574\",\"575\",\"576\",\"577\",\"578\",\"579\",\"580\",\"581\",\"582\",\"583\",\"584\",\"585\",\"586\",\"587\",\"588\",\"589\",\"590\",\"591\",\"592\",\"593\",\"594\",\"595\",\"596\",\"597\",\"598\",\"599\",\"600\",\"601\",\"602\",\"603\",\"604\",\"605\",\"606\",\"607\",\"608\",\"609\",\"610\",\"611\",\"612\",\"613\",\"614\",\"615\",\"616\",\"617\",\"618\",\"619\",\"620\",\"621\",\"622\",\"623\",\"624\",\"625\",\"626\",\"627\",\"628\",\"629\",\"630\",\"631\",\"632\",\"633\",\"634\",\"635\",\"636\",\"637\",\"638\",\"639\",\"640\",\"641\",\"642\",\"643\",\"644\",\"645\",\"646\",\"647\",\"648\",\"649\",\"650\",\"651\",\"652\",\"653\",\"654\",\"655\",\"656\",\"657\",\"658\",\"659\",\"660\",\"661\",\"662\",\"663\",\"664\",\"665\",\"666\",\"667\",\"668\",\"669\",\"670\",\"671\",\"672\",\"673\",\"674\",\"675\",\"676\",\"677\",\"678\",\"679\",\"680\",\"681\",\"682\",\"683\",\"684\",\"685\",\"686\",\"687\",\"688\",\"689\",\"690\",\"691\",\"692\",\"693\",\"694\",\"695\",\"696\",\"697\",\"698\",\"699\",\"700\",\"701\",\"702\",\"703\",\"704\",\"705\",\"706\",\"707\",\"708\",\"709\",\"710\",\"711\",\"712\",\"713\",\"714\",\"715\",\"716\",\"717\",\"718\",\"719\",\"720\",\"721\",\"722\",\"723\",\"724\",\"725\",\"726\",\"727\",\"728\",\"729\",\"730\",\"731\",\"732\",\"733\",\"734\",\"735\",\"736\",\"737\",\"738\",\"739\",\"740\",\"741\",\"742\",\"743\",\"744\",\"745\",\"746\",\"747\",\"748\",\"749\",\"750\",\"751\",\"752\",\"753\",\"754\",\"755\",\"756\",\"757\",\"758\",\"759\",\"760\",\"761\",\"762\",\"763\",\"764\",\"765\",\"766\",\"767\",\"768\",\"769\",\"770\",\"771\",\"772\",\"773\",\"774\",\"775\",\"776\",\"777\",\"778\",\"779\",\"780\",\"781\",\"782\",\"783\",\"784\",\"785\",\"786\",\"787\",\"788\",\"789\",\"790\",\"791\",\"792\",\"793\",\"794\",\"795\",\"796\",\"797\",\"798\",\"799\",\"800\",\"801\",\"802\",\"803\"],[\"Denver\",\"Portland\",\"Milwaukee\",\"San Diego\",\"Seattle\",\"Chicago\",\"Fort Collins\",\"San Antonio\",\"Golden\",\"Salt Lake City\",\"Bend\",\"Boulder\",\"Saint Louis\",\"Austin\",\"Albuquerque\",\"Juneau\",\"Carlsbad\",\"Indianapolis\",\"Paso Robles\",\"Boston\",\"San Francisco\",\"Cleveland\",\"Longmont\",\"Jackson\",\"Durango\",\"Houston\",\"Bellingham\",\"Dallas\",\"Kansas City\",\"Pacific City\",\"Pittsburgh\",\"Santa Rosa\",\"Eugene\",\"Las Vegas\",\"New Glarus\",\"Larkspur\",\"Minneapolis\",\"Madison\",\"Colorado Springs\",\"Santa Cruz\",\"Atlanta\",\"Baker City\",\"Louisville\",\"Solana Beach\",\"Adamstown\",\"Aurora\",\"Philadelphia\",\"San Marcos\",\"Billings\",\"Charlotte\",\"Chico\",\"Los Angeles\",\"Roseland\",\"Auburn\",\"Baltimore\",\"Frederick\",\"Rochester\",\"Wilmington\",\"Healdsburg\",\"Hood River\",\"Long Beach\",\"Newport\",\"Anchorage\",\"Cincinnati\",\"Fogelsville\",\"Santa Fe\",\"Berkeley\",\"Middleton\",\"Tampa\",\"Brea\",\"Broomfield\",\"Buellton\",\"Chattanooga\",\"Nashville\",\"New York\",\"Sacramento\",\"San Clemente\",\"Springfield\",\"Tempe\",\"St. Louis\",\"Chippewa Falls\",\"Fort Worth\",\"Ft. Bragg\",\"Huntington Beach\",\"North Olmsted\",\"Santa Barbara\",\"Scottsdale\",\"Woodridge\",\"Arlington\",\"Asheville\",\"Cambridge\",\"Davis\",\"Idaho Springs\",\"Lexington\",\"Media\",\"Raleigh\",\"Tucson\",\"Ashburn\",\"Boonville\",\"Centreville\",\"Charlottesville\",\"Dillon\",\"Grand Rapids\",\"Greeley\",\"Loveland\",\"Oakland\",\"Prescott\",\"Topeka\",\"Alexandria\",\"Anaheim\",\"Brooklyn\",\"Castle Rock\",\"Corona\",\"Detroit\",\"Flagstaff\",\"Flossmoor\",\"Glenwood Springs\",\"Harrisburg\",\"Saint Paul\",\"Southampton\",\"Temecula\",\"Akron\",\"Antioch\",\"Blanco\",\"Blue Lake\",\"Columbia\",\"Elk Grove\",\"Farmville\",\"Fredericksburg\",\"Lafayette\",\"Milton\",\"New Ulm\",\"Phoenix\",\"Royal Oak\",\"Sparks\",\"Stevens Point\",\"Westminster\",\"Amana\",\"Bear\",\"Boise\",\"Corvallis\",\"Fortuna\",\"Helena\",\"Kernville\",\"La Jolla\",\"Lakewood\",\"Laramie\",\"Memphis\",\"Placentia\",\"Portsmouth\",\"Richmond\",\"Rocky River\",\"San Luis Obispo\",\"Sunnyvale\",\"Winston-Salem\",\"Woodinville\",\"Allentown\",\"Appleton\",\"Arcata\",\"Columbus\",\"Crozet\",\"Flint\",\"Framingham\",\"Fresno\",\"Holland\",\"Lake Placid\",\"Lawrence\",\"Middleburg Heights\",\"Novato\",\"Reno\",\"Silverdale\",\"Somerdale\",\"Telluride\",\"Truckee\",\"Tustin\",\"Warrenville\",\"Alpine\",\"Bay Shore\",\"Bethesda\",\"Birmingham\",\"Bloomington\",\"Bremerton\",\"Chandler\",\"Charleston\",\"Concord\",\"Cooperstown\",\"Greenville\",\"Hailey\",\"Kalamazoo\",\"Lahaina\",\"Lake Havasu City\",\"Lake Oswego\",\"Long Valley\",\"Lubbock\",\"Missoula\",\"Monroe\",\"Oceanside\",\"Omaha\",\"Pottstown\",\"Riverside\",\"San Leandro\",\"Sheridan\",\"Smithton\",\"Tacoma\",\"Torrance\",\"Vista\",\"Wilkes-Barre\",\"Woodbridge\",\"Afton\",\"Albany\",\"Amherst\",\"Athens\",\"Burlington\",\"Canton\",\"Claremont\",\"Cloverdale\",\"Duluth\",\"Easton\",\"Evanston\",\"Frisco\",\"Galesburg\",\"Glen Mills\",\"Glendale\",\"Green Bay\",\"Hays\",\"Henderson\",\"Hershey\",\"Kailua-Kona\",\"Libertyville\",\"Little Rock\",\"Milford\",\"Milwaukie\",\"Monterey\",\"Morgan Hill\",\"Myrtle Beach\",\"New Hope\",\"Newark\",\"Orlando\",\"Patchogue\",\"Phoenixville\",\"Rancho Cucamonga\",\"Red Lodge\",\"Redmond\",\"Ridgway\",\"Savannah\",\"Shiner\",\"St. Louis Park\",\"Utica\",\"Victor\",\"Warren\",\"Washington\",\"Wheeling\",\"Arvada\",\"Aston\",\"Boca Raton\",\"Boone\",\"Bridgewater Corners\",\"Brooklyn Center\",\"Burlingame\",\"Campbell\",\"Carson City\",\"Cedar Rapids\",\"Costa Mesa\",\"Culver City\",\"Dexter\",\"Elmsford\",\"Erie\",\"Evansville\",\"Frankenmuth\",\"Goleta\",\"Goodyear\",\"Guerneville\",\"Harrisonburg\",\"High Point\",\"Highlands Ranch\",\"Lancaster\",\"Lodi\",\"Marble Falls\",\"Midvale\",\"Moriarty\",\"Munster\",\"Niwot\",\"North Syracuse\",\"O'Fallon\",\"Olathe\",\"Olympia\",\"Park City\",\"Philipsburg\",\"Pleasantville\",\"Royersford\",\"Salinas\",\"San Jose\",\"San Rafael\",\"Santee\",\"Sebastopol\",\"Sioux Falls\",\"St. Paul\",\"Tracy\",\"Tumwater\",\"Ventura\",\"Waltham\",\"Waterbury\",\"Webberville\",\"Whitefish\",\"Wichita\",\"Ann Arbor\",\"Bellaire\",\"Berthoud\",\"Bethlehem\",\"Biloxi\",\"Braintree\",\"Calmar\",\"Camas\",\"Carpinteria\",\"Central City\",\"Coral Gables\",\"Croydon\",\"Downingtown\",\"Durango/Bayfield\",\"Edmonds\",\"Englewood\",\"Falls Church\",\"Fishers\",\"Floosmoor\",\"Fullerton\",\"Greensboro\",\"Greenwood\",\"Hickory\",\"Hollister\",\"Iowa City\",\"Irvine\",\"Issaquah\",\"King of Prussia\",\"Lakeland\",\"Lemont\",\"Littleton\",\"Lone Tree\",\"Melbourne\",\"Middlebury\",\"Mount Holly\",\"Mountain View\",\"New Orleans\",\"Newport Beach\",\"Newton\",\"Norfolk\",\"Oak Harbor\",\"Ocean Beach\",\"Pagosa Springs\",\"Papillion\",\"Pinedale\",\"Plainfield\",\"Pleasanton\",\"Providence\",\"Redlands\",\"Rockford\",\"Salem\",\"Salida\",\"Sarasota\",\"Sisters\",\"Steamboat Springs\",\"Sterling\",\"Strongsville\",\"Sunnyside\",\"Superior\",\"Tillamook\",\"Tinley Park\",\"Ukiah\",\"Vail\",\"Wayne\",\"West Chester\",\"West Dundee\",\"Williamsport\",\"Willoughby\",\"Wisconsin Dells\",\"(Corona, CA) Brea\",\"Addison\",\"Arrington\",\"Arroyo Grande\",\"Bel Air\",\"Bellevue\",\"Bemidji\",\"Bloomfield\",\"Bloomsburg\",\"Bozeman\",\"Branford\",\"Brattleboro\",\"Bronx\",\"Buffalo\",\"Calistoga\",\"Camarillo\",\"Cannon Beach\",\"Carmel\",\"Cherry Hill\",\"Coronado\",\"Covington\",\"Crested Butte\",\"Dana Point\",\"Danville\",\"Denton\",\"Dover\",\"El Segundo\",\"Elk Rapids\",\"Emsworth\",\"Escondido\",\"Fort Lauderdale\",\"Fort Mitchell\",\"Fort Wayne\",\"Geneva\",\"Granby\",\"Grand Haven\",\"Grants Pass\",\"Grapevine\",\"Hampton\",\"Hartville\",\"Haverhill\",\"Honolulu\",\"Inglewood\",\"Ithaca\",\"Jacksonville\",\"Janesville\",\"Kinston\",\"Krebs\",\"LaConner\",\"Lafayette Hill\",\"Lander\",\"Latrobe\",\"Leavenworth\",\"Lincoln\",\"Mammoth\",\"Mammoth Lakes\",\"Massillon\",\"McKinleyville\",\"McMinnville\",\"Medford\",\"Medina\",\"Memphis/Nashville\",\"Millersburg\",\"Moreno Valley\",\"Morganton\",\"Moultonborough\",\"Noblesville\",\"Norwood\",\"Novi\",\"Orange\",\"Palmetto\",\"Petaluma\",\"Pittsboro\",\"Port Charlotte\",\"Port Townsend\",\"Red Bank\",\"Rocklin\",\"Saint Joseph\",\"San Gabriel\",\"San Juan Capistrano\",\"Saratoga Springs\",\"Sedona\",\"Sevierville\",\"Sidney\",\"Soquel\",\"Spokane\",\"Staunton\",\"Stockton\",\"Sunriver\",\"Traverse City\",\"Tukwila\",\"Turlock\",\"Upland\",\"Vero Beach\",\"Watsonville\",\"Wausau\",\"Wells\",\"West Okoboji\",\"West Ossipee\",\"West Yellowstone\",\"Westlake Village\",\"Whitestown\",\"Williamsburg\",\"Windsor\",\"Worcester\",\"(Bethesda, MD) Louisville\",\"(Brea, CA) Brea\",\"(College Park - Indianapolis, IN) Louisville\",\"(Disney Boardwalk, FL) Chattanooga\",\"(King of Prussia, PA) Louisville\",\"(La Jolla, CA) Louisville\",\"(Rockville, MD) Chattanooga\",\"(San Diego, CA) Louisville\",\"(Westminster, CO) Louisville\",\"Abita Springs\",\"Aiken\",\"Akron/Canton\",\"Alameda\",\"Algoma\",\"Algonquin\",\"Allen\",\"Alpharetta\",\"Amesbury\",\"Annandale\",\"Annapolis\",\"Arden\",\"Ashland\",\"Aspen\",\"Astoria\",\"Atascadero\",\"Ava\",\"Avon\",\"Bakersfield\",\"Bangor\",\"Barberton\",\"Bargersville\",\"Baton Rouge\",\"Battle Creek\",\"Battle Ground\",\"Baxter\",\"Bay City\",\"Bedford\",\"Bedford Park\",\"Belgrade\",\"Berekely Heights\",\"Big Rapids\",\"Black Mountain\",\"Blacksburg\",\"Blue Ash\",\"Bluemont\",\"Bluffton\",\"Bolivar\",\"Bonners Ferry\",\"Boulder/Chandler/Clear Lake\",\"Bourbonnais\",\"Boynton Beach\",\"Bradenton\",\"Brainerd\",\"Breckenridge\",\"Breese\",\"Bridgeport\",\"Bridgman\",\"Bristol\",\"Brookline\",\"Broussard\",\"Bucyrus\",\"Burbank\",\"Canal Winchester\",\"Canon Beach\",\"Cape May\",\"Cape May Court House\",\"Carbondale\",\"Carlisle\",\"Carmel-By-The-Sea\",\"Carpenteria\",\"Carrollton\",\"Cary\",\"Casselberry\",\"Cave Creek\",\"Cedar Springs\",\"Centerville\",\"Champaign\",\"Chandler/Boulder\",\"Chapel Hill\",\"Chesapeake\",\"Cheyenne\",\"Chula Vista\",\"Cibolo\",\"CincinnatiE2=80=8E\",\"Clearlake\",\"Clive\",\"Cody\",\"Coeur D'Alene\",\"Cold Spring\",\"Collegeville\",\"Collingswood\",\"Comstock\",\"Comstock Park\",\"Coral Springs\",\"Cornelius\",\"Covina\",\"Credted Butte\",\"Crystal Bay\",\"Danbury\",\"Delafield\",\"Denali National Park\",\"Des Moines\",\"Desert Ridge\",\"Dothan\",\"Dripping Springs\",\"Dubuque\",\"Dulles\",\"Eagle\",\"Eagle River\",\"Eau Claire\",\"Edgewater\",\"Edinburg\",\"Effingham\",\"El Cajon\",\"El Dorado Hills\",\"El Granada\",\"El Paso\",\"Eldersburg\",\"Estes Park\",\"Etna\",\"Eureka\",\"Everett\",\"Evergreen\",\"Ewing\",\"Export\",\"Fairfield\",\"Fargo\",\"Farmingdale\",\"Fayetteville\",\"Fort Meyers\",\"Franklin\",\"Fremont\",\"Friday Harbor\",\"Fruita\",\"Ft. Wayne\",\"Gaylord\",\"Gilbert\",\"Gilroy\",\"Gold Beach\",\"Goochland\",\"Gorham\",\"Granbury\",\"Grand Forks\",\"Grayslake\",\"Greensburg\",\"Gunnison\",\"Half Moon Bay\",\"Hartford\",\"Hawley\",\"Hermosa Beach\",\"Hillsboro\",\"Hillsborough\",\"Holly Springs\",\"Honeoye Falls\",\"Hyde Park\",\"Independence\",\"Ipswich\",\"Irving\",\"Jantzen Beach/Lloyd Center/Clear Lake\",\"Johns Island\",\"Johnson City\",\"Junction City\",\"Justin\",\"Kailua Kona\",\"Kamuela\",\"Kearney\",\"Keene\",\"Kennesaw\",\"Kent\",\"Kihei\",\"Kill Devil Hills\",\"King City\",\"Kirkland\",\"La Vista\",\"LaCrosse\",\"Laguna Hills\",\"Lake Elsinore\",\"Lake George\",\"Largo\",\"Lawrenceville\",\"Lombard\",\"Long Island City\",\"Lorton\",\"Los Gatos\",\"Lyons\",\"Malvern\",\"Manchester\",\"Manheim\",\"Mankato\",\"Manteo\",\"Maplewood\",\"Marina del Rey\",\"Marshall\",\"Martinez\",\"Maui\",\"Meadville\",\"Miami\",\"Midland\",\"Mill Valley\",\"Minocqua\",\"Mishawaka\",\"Moab\",\"Modesto\",\"Moline\",\"Monroeville\",\"Montgomery\",\"Moorpark\",\"Moses Lake\",\"Mount Horeb\",\"N. Canton\",\"Naches\",\"Nantucket\",\"Napa\",\"Nashua\",\"Nederland\",\"Nellysford\",\"New Haven\",\"New Paltz\",\"Normal\",\"North Charleston\",\"North Kansas City\",\"North Versailles\",\"Northamapton\",\"Oak Bluffs\",\"Ocean\",\"Oregon City\",\"Orland Park\",\"Oroville\",\"Oshkosh\",\"Oxnard\",\"Pacific Beach\",\"Paducah\",\"Palatine\",\"Palm Beach\",\"Palm Harbor\",\"Palmdale\",\"Parker\",\"Pearland\",\"Perkasie\",\"Pittsburg\",\"Pittston\",\"Plover\",\"Plymouth\",\"Pomona\",\"Pompey\",\"Ponderay\",\"Portage\",\"Poulsbo\",\"Princeton\",\"Quincy\",\"Rancho Mirage\",\"Rehoboth Beach\",\"Rio Rancho\",\"Roanoke\",\"Rosedale\",\"Rowlett\",\"Saint Albans\",\"Saint Cloud\",\"Saint Petersburg\",\"Sainte Genevieve\",\"Sanford\",\"Santa Ana\",\"Santa Clarita\",\"Sarver\",\"Schaumburg\",\"Scotia\",\"Seven Points\",\"Sherman Oaks\",\"Sherwood\",\"Silver Spring\",\"Somerville\",\"South Denver\",\"South Salt Lake\",\"Spartanburg\",\"Spearfish\",\"Spicewood\",\"St Paul\",\"St. Joseph\",\"Stafford\",\"Stamford\",\"Stevenson\",\"Stockbridge\",\"Stowe\",\"Stratford\",\"Sturgeon Bay\",\"Suffern\",\"Suwanee\",\"Syracuse\",\"Taylor\",\"Temple\",\"Tequesta\",\"Torrington\",\"Travelers Rest\",\"Tulsa\",\"Tyler\",\"Vancouver\",\"Vint Hill\",\"Waconia\",\"Walla Walla\",\"Walland\",\"Washougal\",\"Waterloo\",\"Watertown\",\"Waukesha\",\"Waupaca\",\"West Des Moines\",\"West Kill\",\"West Palm Beach\",\"Westland\",\"Westmont\",\"Westport\",\"Wheat Ridge\",\"Wheaton\",\"Wilson\",\"Winston - Salem\",\"Winter Garden\",\"Winter Springs\",\"Winthrop\",\"Woodbury\",\"Woodland Hills\",\"Wooster\",\"Yakima\",\"Yellow Springs\",\"Zanesville\"],[145,119,96,86,86,74,72,71,69,68,66,60,56,48,47,45,44,44,43,41,39,37,36,35,33,33,31,30,30,29,29,29,28,27,27,26,26,25,24,24,23,23,23,23,22,22,22,22,21,20,20,20,20,19,19,19,19,19,18,18,18,18,17,17,17,17,16,16,16,15,15,15,15,15,15,15,15,15,15,14,13,13,13,13,13,13,13,13,12,12,12,12,12,12,12,12,12,11,11,11,11,11,11,11,11,11,11,11,10,10,10,10,10,10,10,10,10,10,10,10,10,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>city<\\/th>\\n      <th>n<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":2},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}\r\nfct_other()\r\nWe can also collapse levels by grouping together some levels into Other using fct_other().\r\nIn fct_other() we can either:\r\n- specify which categories we want to __keep__, where all the rest will be bucketed into the `Other` category.\r\n- specify which categories we want to __drop__ - i.e. which categories do we want to be bucketed into the `Other` category.\r\n\r\nLet’s say that we’re only interested in the Pilseners in the category variable.\r\nWe can keep these Pilseners, and combine all others into a Non-Pilseners category using fct_other() with the keep argument.\r\n\r\n\r\nbeer_awards %>% \r\n   mutate(category = as_factor(category)) %>% \r\n   mutate(category = fct_other(category,\r\n             # which levels do you want to keep?\r\n             keep = c('German-Style Pilsener',\r\n             'Bohemian Style Pilsener',\r\n             'Bohemian-Style Pilsener',\r\n             'European-Style Pilsener',\r\n             'American-Style or International-Style Pilsener',\r\n             'International-Style Pilsener',\r\n             'European Pilsner',\r\n             'European Style Pilsener',\r\n             'American Light Pilsners',\r\n             'American-Style Lager or American-Style Pilsener',\r\n             'American-Style Pilsener',\r\n             'American-Style Pilsener or International-Style Pilsener',\r\n             'American Pilsener',\r\n             'American Pilseners',\r\n             'American Pilsners',\r\n             'American Premium Dark Pilseners',\r\n             'Continental Pilsners',\r\n             'European Classic Pilseners',\r\n             'German Style Pilsener',\r\n             'International Pilsener',\r\n             'Mixed, European Pilsener',\r\n             'American Premium Dark Pilsners',\r\n             'American Premium Pilseners',\r\n             'American Premium Pilsners',\r\n             'Contemporary American-Style Pilsener',\r\n             'Pilsener'),\r\n             # relabel the 'Other' level\r\n             other_level = \"Non-Pilseners\"\r\n         )) %>% \r\n   pull(category) %>% \r\n   levels()\r\n \r\n\r\n [1] \"American Pilsener\"                                      \r\n [2] \"Bohemian-Style Pilsener\"                                \r\n [3] \"German-Style Pilsener\"                                  \r\n [4] \"International Pilsener\"                                 \r\n [5] \"American-Style Lager or American-Style Pilsener\"        \r\n [6] \"Contemporary American-Style Pilsener\"                   \r\n [7] \"International-Style Pilsener\"                           \r\n [8] \"American-Style Pilsener\"                                \r\n [9] \"American-Style Pilsener or International-Style Pilsener\"\r\n[10] \"American-Style or International-Style Pilsener\"         \r\n[11] \"Bohemian Style Pilsener\"                                \r\n[12] \"European-Style Pilsener\"                                \r\n[13] \"European Style Pilsener\"                                \r\n[14] \"German Style Pilsener\"                                  \r\n[15] \"Pilsener\"                                               \r\n[16] \"European Pilsner\"                                       \r\n[17] \"Mixed, European Pilsener\"                               \r\n[18] \"European Classic Pilseners\"                             \r\n[19] \"American Light Pilsners\"                                \r\n[20] \"American Pilsners\"                                      \r\n[21] \"American Premium Dark Pilsners\"                         \r\n[22] \"American Premium Pilsners\"                              \r\n[23] \"American Pilseners\"                                     \r\n[24] \"American Premium Dark Pilseners\"                        \r\n[25] \"American Premium Pilseners\"                             \r\n[26] \"Continental Pilsners\"                                   \r\n[27] \"Non-Pilseners\"                                          \r\n\r\nWe have successfully kept all Pilseners, and all others have been grouped into the “Non-Pilseners” category.\r\nWhat if we want to keep everything else, and group all Pilseners into a separate category? We can instead use the drop argument.\r\n\r\n\r\n    beer_awards %>% \r\n       mutate(category = as_factor(category)) %>% \r\n       mutate(category = fct_other(category,\r\n                 # which levels do you want to drop?\r\n                 drop = c('German-Style Pilsener',\r\n                 'Bohemian Style Pilsener',\r\n                 'Bohemian-Style Pilsener',\r\n                 'European-Style Pilsener',\r\n                 'American-Style or International-Style Pilsener',\r\n                 'International-Style Pilsener',\r\n                 'European Pilsner',\r\n                 'European Style Pilsener',\r\n                 'American Light Pilsners',\r\n                 'American-Style Lager or American-Style Pilsener',\r\n                 'American-Style Pilsener',\r\n                 'American-Style Pilsener or International-Style Pilsener',\r\n                 'American Pilsener',\r\n                 'American Pilseners',\r\n                 'American Pilsners',\r\n                 'American Premium Dark Pilseners',\r\n                 'Continental Pilsners',\r\n                 'European Classic Pilseners',\r\n                 'German Style Pilsener',\r\n                 'International Pilsener',\r\n                 'Mixed, European Pilsener',\r\n                 'American Premium Dark Pilsners',\r\n                 'American Premium Pilseners',\r\n                 'American Premium Pilsners',\r\n                 'Contemporary American-Style Pilsener',\r\n                 'Pilsener'),\r\n                 # relabel the 'Other' level\r\n                 other_level = \"Pilseners\"\r\n             )) %>% \r\n       pull(category) %>% \r\n       levels() %>% \r\n       as_tibble() %>% \r\n       DT::datatable()\r\n \r\n\r\n\r\n{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\",\"51\",\"52\",\"53\",\"54\",\"55\",\"56\",\"57\",\"58\",\"59\",\"60\",\"61\",\"62\",\"63\",\"64\",\"65\",\"66\",\"67\",\"68\",\"69\",\"70\",\"71\",\"72\",\"73\",\"74\",\"75\",\"76\",\"77\",\"78\",\"79\",\"80\",\"81\",\"82\",\"83\",\"84\",\"85\",\"86\",\"87\",\"88\",\"89\",\"90\",\"91\",\"92\",\"93\",\"94\",\"95\",\"96\",\"97\",\"98\",\"99\",\"100\",\"101\",\"102\",\"103\",\"104\",\"105\",\"106\",\"107\",\"108\",\"109\",\"110\",\"111\",\"112\",\"113\",\"114\",\"115\",\"116\",\"117\",\"118\",\"119\",\"120\",\"121\",\"122\",\"123\",\"124\",\"125\",\"126\",\"127\",\"128\",\"129\",\"130\",\"131\",\"132\",\"133\",\"134\",\"135\",\"136\",\"137\",\"138\",\"139\",\"140\",\"141\",\"142\",\"143\",\"144\",\"145\",\"146\",\"147\",\"148\",\"149\",\"150\",\"151\",\"152\",\"153\",\"154\",\"155\",\"156\",\"157\",\"158\",\"159\",\"160\",\"161\",\"162\",\"163\",\"164\",\"165\",\"166\",\"167\",\"168\",\"169\",\"170\",\"171\",\"172\",\"173\",\"174\",\"175\",\"176\",\"177\",\"178\",\"179\",\"180\",\"181\",\"182\",\"183\",\"184\",\"185\",\"186\",\"187\",\"188\",\"189\",\"190\",\"191\",\"192\",\"193\",\"194\",\"195\",\"196\",\"197\",\"198\",\"199\",\"200\",\"201\",\"202\",\"203\",\"204\",\"205\",\"206\",\"207\",\"208\",\"209\",\"210\",\"211\",\"212\",\"213\",\"214\",\"215\",\"216\",\"217\",\"218\",\"219\",\"220\",\"221\",\"222\",\"223\",\"224\",\"225\",\"226\",\"227\",\"228\",\"229\",\"230\",\"231\",\"232\",\"233\",\"234\",\"235\",\"236\",\"237\",\"238\",\"239\",\"240\",\"241\",\"242\",\"243\",\"244\",\"245\",\"246\",\"247\",\"248\",\"249\",\"250\",\"251\",\"252\",\"253\",\"254\",\"255\",\"256\",\"257\",\"258\",\"259\",\"260\",\"261\",\"262\",\"263\",\"264\",\"265\",\"266\",\"267\",\"268\",\"269\",\"270\",\"271\",\"272\",\"273\",\"274\",\"275\",\"276\",\"277\",\"278\",\"279\",\"280\",\"281\",\"282\",\"283\",\"284\",\"285\",\"286\",\"287\",\"288\",\"289\",\"290\",\"291\",\"292\",\"293\",\"294\",\"295\",\"296\",\"297\",\"298\",\"299\",\"300\",\"301\",\"302\",\"303\",\"304\",\"305\",\"306\",\"307\",\"308\",\"309\",\"310\",\"311\",\"312\",\"313\",\"314\",\"315\",\"316\",\"317\",\"318\",\"319\",\"320\",\"321\",\"322\",\"323\",\"324\",\"325\",\"326\",\"327\",\"328\",\"329\",\"330\",\"331\",\"332\",\"333\",\"334\",\"335\",\"336\",\"337\",\"338\",\"339\",\"340\",\"341\",\"342\",\"343\",\"344\",\"345\",\"346\",\"347\",\"348\",\"349\",\"350\",\"351\",\"352\",\"353\",\"354\",\"355\",\"356\",\"357\",\"358\",\"359\",\"360\",\"361\",\"362\",\"363\",\"364\",\"365\",\"366\",\"367\",\"368\",\"369\",\"370\",\"371\",\"372\",\"373\",\"374\",\"375\",\"376\",\"377\",\"378\",\"379\",\"380\",\"381\",\"382\",\"383\",\"384\",\"385\",\"386\",\"387\",\"388\",\"389\",\"390\",\"391\",\"392\",\"393\",\"394\",\"395\",\"396\",\"397\",\"398\",\"399\",\"400\",\"401\",\"402\",\"403\",\"404\",\"405\",\"406\",\"407\",\"408\",\"409\",\"410\",\"411\",\"412\",\"413\",\"414\",\"415\",\"416\",\"417\",\"418\",\"419\",\"420\",\"421\",\"422\",\"423\",\"424\",\"425\",\"426\",\"427\",\"428\",\"429\",\"430\",\"431\",\"432\",\"433\",\"434\",\"435\",\"436\",\"437\",\"438\",\"439\",\"440\",\"441\",\"442\",\"443\",\"444\",\"445\",\"446\",\"447\",\"448\",\"449\",\"450\",\"451\",\"452\",\"453\",\"454\",\"455\",\"456\",\"457\",\"458\",\"459\",\"460\",\"461\",\"462\",\"463\",\"464\",\"465\",\"466\",\"467\",\"468\",\"469\",\"470\",\"471\",\"472\",\"473\",\"474\",\"475\",\"476\",\"477\",\"478\",\"479\",\"480\",\"481\",\"482\",\"483\",\"484\",\"485\",\"486\",\"487\",\"488\",\"489\",\"490\"],[\"American Amber Lager\",\"American Lager\",\"American-Belgo-Style Ale\",\"American-Style Amber/Red Ale\",\"American-Style Black Ale or American-Style Stout\",\"American-Style Brown Ale\",\"American-Style Cream Ale\",\"American-Style Fruit Beer\",\"American-Style India Pale Ale\",\"American-Style Pale Ale\",\"American-Style Sour Ale\",\"American-Style Strong Pale Ale\",\"American-Style Wheat Beer\",\"Belgian-Style Abbey Ale\",\"Belgian-Style Ale or French-Style Ale\",\"Belgian-Style Lambic or Sour Ale\",\"Belgian-Style Specialty Ale\",\"Belgian-Style Strong Specialty Ale\",\"Belgian-Style Witbier\",\"Bock\",\"Brett Beer\",\"Brown Porter\",\"Chili Beer\",\"Chocolate Beer\",\"Classic Saison\",\"Coffee Beer\",\"Coffee Stout or Porter\",\"Contemporary Gose\",\"Dortmunder or German-Style Oktoberfest\",\"English Ale\",\"English Mild or Bitter\",\"English-Style Brown Ale\",\"Experimental Beer\",\"Experimental India Pale Ale\",\"Extra Special Bitter\",\"Field Beer\",\"Fresh Hop Beer\",\"Fruit Wheat Beer\",\"Fruited American-Style Sour Ale\",\"Fruited Wood- and Barrel-Aged Sour Beer\",\"German Dark Lager\",\"German-Style Altbier\",\"German-Style Doppelbock or Eisbock\",\"German-Style Koelsch\",\"German-Style Maerzen\",\"German-Style Wheat Ale\",\"Gluten-Free Beer\",\"Golden or Blonde Ale\",\"Herb and Spice Beer\",\"Historical Beer\",\"Honey Beer\",\"Imperial India Pale Ale\",\"Imperial Stout\",\"International Dark Lager\",\"International Pale Ale\",\"Irish-Style Red Ale\",\"Juicy or Hazy Imperial India Pale Ale\",\"Juicy or Hazy India Pale Ale\",\"Juicy or Hazy Pale Ale\",\"Juicy or Hazy Strong Pale Ale\",\"Kellerbier or Zwickelbier\",\"Light Lager\",\"Mixed-Culture Brett Beer\",\"Munich-Style Helles\",\"Oatmeal Stout\",\"Old Ale or Strong Ale or Barley Wine-Style Ale\",\"Other Strong Beer\",\"Pumpkin Beer\",\"Robust Porter\",\"Rye Beer\",\"Scotch Ale\",\"Scottish-Style Ale\",\"Session Beer or Non-Alcohol Beer\",\"Session India Pale Ale\",\"Smoke Beer\",\"Specialty Beer\",\"Specialty Berliner-Style Weisse\",\"Specialty Saison\",\"Stout\",\"Strong Red Ale\",\"Sweet Stout or Cream Stout\",\"Vienna-Style Lager\",\"Wood- and Barrel-Aged Beer\",\"Wood- and Barrel-Aged Sour Beer\",\"Wood- and Barrel-Aged Strong Beer\",\"Wood- and Barrel-Aged Strong Stout\",\"Aged Beer\",\"American-Style Amber Lager\",\"American-Style Black Ale\",\"American-Style Stout\",\"Australian-Style Pale Ale\",\"Baltic-Style Porter\",\"Barley Wine-Style Ale\",\"Belgian- and French-Style Ale\",\"Belgian-Style Blonde Ale or Pale Ale\",\"Belgian-Style Dark Strong Ale or Belgian-Style Quadrupel\",\"Belgian-Style Dubbel\",\"Belgian-Style Fruit Beer\",\"Belgian-Style Pale Strong Ale\",\"Belgian-Style Tripel\",\"Classic Irish-Style Dry Stout\",\"Collab\",\"Double Hoppy Red Ale\",\"Emerging India Pale Ale\",\"English-Style India Pale Ale\",\"English-Style Mild Ale\",\"English-Style or International-Style Pale Ale\",\"English-Style Summer Ale\",\"Export Stout\",\"German-Style Dark Lager\",\"German-Style Sour Ale\",\"Imperial Red Ale\",\"India Pale Lager or Malt Liquor\",\"International-Style Dark Lager\",\"Non-Alcohol Beer or Alcohol-Free Beer\",\"Old Ale or Strong Ale\",\"Ordinary or Special Bitter\",\"Other Belgian-Style Ale\",\"Proam\",\"Pumpkin/Squash Beer or Pumpkin Spice Beer\",\"Session Beer\",\"South German-Style Hefeweizen\",\"Specialty Berliner Weisse\",\"American-Style Lager or American-Style Malt Liquor\",\"American-Style Wheat Beer with Yeast\",\"Belgian-Style Dubbel or Quadrupel\",\"Berliner-Style Weisse\",\"Classic English-Style Pale Ale\",\"Dark Lager\",\"Gose\",\"International-Style Pale Ale\",\"Juicy or Hazy Imperial or Double India Pale Ale\",\"Munich-Style Dunkel or European-Style Dark Lager\",\"American-Style Lager or Malt Liquor\",\"American-Style Wheat Beer With Yeast\",\"Australian-Style or International-Style Pale Ale\",\"Double Red Ale\",\"Fresh or Wet Hop Ale\",\"Leipzig-Style Gose or Contemporary Gose\",\"Pro-Am\",\"American-Style Amber Lager or Dark Lager\",\"American-Style Lager or Ice Lager or Malt Liquor\",\"American-Style Light Lager or German-Style Light Lager\",\"European-Style Dark Lager/Munich-Style Dunkel\",\"German-Style Schwarzbier\",\"Pumpkin Spice Beer\",\"Pumpkin/Squash Beer\",\"American-Style Dark Lager\",\"American-Style Lager or Light Lager\",\"Belgian-Style Dubbel or Quadruple\",\"European-Style Dark/MC3=BCnchner Dunkel\",\"European-Style Dark/MC3=BCnchn=er Dunkel\",\"European-Style Dark/M=C3=BCnchner Dunkel\",\"French- and Belgian-Style Saison\",\"German-Style KC3=B6lsch\",\"German-Style MC3=A4rzen\",\"German-Style MC3==A4rzen\",\"American-Style Brett Beer\",\"European-Style Dunkel\",\"Foreign-Style Stout\",\"Indigenous/Regional Beer\",\"Specialty Honey Beer\",\"Field Beer or Pumpkin Beer\",\"French &amp; Belgian-Style Saison\",\"Fresh Hop Ale\",\"Fruit Beer\",\"German-Style K=C3=B6lsch\",\"Indigenous Beer\",\"Pro-Am Competition\",\"American-Style Brett Ale\",\"American-Style Lager, Light Lager or Premium Lager\",\"American-Style Specialty Lager or Cream Ale or Lager\",\"German-Style MC3=A4r=zen\",\"Sweet Stout\",\"American-Style India Black Ale\",\"Coffee Flavored Beer\",\"Extra Special Bitter or Strong Bitter\",\"German-Style KC3==B6lsch\",\"Gluten Free Beer\",\"Herb and Spice or Chocolate Beer\",\"Kellerbier/Zwickelbier\",\"Out of Category E2=80=93 Traditionally Brewed B=eer\",\"Out of Category =E2=80=93 Traditionally Brewed Beer\",\"Out of Category E2=80=93 Traditionally Brewed Beer&lt;=/\",\"Smoked Beer\",\"American-Style Cream Ale or Lager\",\"American-Style Lager or Premium Lager\",\"American-Style Light Lager\",\"American-Style Specialty Lager\",\"Barley Wine Style Ale\",\"Belgian and French-Style Ale\",\"Belgian Style Strong Specialty Ale\",\"Classic English Style Pale Ale\",\"English Style Brown Ale\",\"English Style Mild Ale\",\"European Style Dunkel\",\"Foreign Style Stout\",\"French- and Belgian Style Saison\",\"Fruit Beer or Field Beer\",\"German Style Altbier\",\"German Style Doppelbock or Eisbock\",\"German Style K=C3=B6lsch\",\"German Style M=C3=A4rzen\",\"German Style Schwarzbier\",\"Munich Style Helles\",\"Out of Category E2=80=93 Traditionally B=rewed Beer\",\"Out of Category E2=80=93 Traditionally Bre=wed Beer\",\"Scottish Style Ale\",\"South German Style Hefeweizen\",\"Vienna Style Lager\",\"America-Style Light Lager\",\"American-Belgo Style Ale\",\"American-Style Hefeweizen\",\"American-Style or German-Style Sour Ale\",\"Bitter or Pale Mild Ale\",\"English-Style Dark Mild Ale or Brown Ale\",\"Fruit or Vegetable Beer\",\"German-Style Strong Bock\",\"Imperial or Double Red Ale\",\"Smoke-Flavored Beer\",\"Strong Scotch Ale\",\"Aged Beer (Ale or Lager)\",\"American-Style Lager\",\"American-Style Sour Ale or German-Style Sour Ale\",\"American-Style Wheat Wine Ale\",\"Belgian Style Abbey Ale\",\"Belgian-Style Sour Ale\",\"Belgian-Style White (or Wit)/Belgian-Style Wheat\",\"Cellar or Unfiltered Beer\",\"Dortmunder/European Style Export or German-Style Oktoberfest/Wiesen (Meadow)\",\"English Style Dark Mild Ale or English-Style Brown Ale\",\"European Style Dark/M=C3=BCnchner Dunkel\",\"Experimental Beer (Lager or Ale)\",\"Foreign (Export) Style Stout\",\"Fruit Beer or Vegetable Beer\",\"German Style Brown Ale/D=C3=BCsseldorf Style Altbier\",\"German Style Brown Ale/DC3=BCsseldorf Style Altbier\",\"German Style KC3=B6lsch/K==C3=B6ln Style K=C3=B6lsch\",\"German Style KC3=B6lsch/K=C3=B6ln Style K=C3=B6lsch=\",\"German Style KC3=B6lsch/K=C3=B6ln Style K=C3=B6lsch\",\"German Style MC3=A4rzen\",\"German Style Strong Bock\",\"Imperial or Double India Pale Ale\",\"M=C3=BCnchner (Munich) Style Helles\",\"MC3=BCnchner (Munich) Style Hell=es\",\"Other Low Strength Ale or Lager\",\"Other Strong Ale or Lager\",\"South German Style Hefeweizen/Hefeweissbier\",\"Specialty Honey Lager or Ale\",\"American Cream Ale or Lager\",\"American-Style Amber / Red Ale\",\"Belgian-and French-Style Ale\",\"Belgian-Style White (or Wit) / Belgian-Style Wheat\",\"Bitter\",\"European-Style Dark / Munchner Dunkel\",\"Foreign (Export)-Style Stout\",\"French- Belgian-Style Saison\",\"Fruit And Vegetable Beer\",\"German-Style Brown Ale / Dusseldorf-Style Altbier\",\"German-Style Kolsch / Koln-Style Kolsch\",\"German-Style Maerzen / Oktoberfest\",\"Munchner-Style Helles\",\"Old Ale/Strong Ale\",\"South German-Style Hefeweizen/Hefeweissbier\",\"Wood- and Barrel-aged Beer\",\"Wood- and Barrel-aged Strong Beer\",\"American-Style \\\"Light\\\" Amber Lager\",\"American-Style Premium Lager\",\"British Stout\",\"French-Belgian Style Saison\",\"Non-Alcoholic (Beer) Malt Beverage\",\"American Lager/Ale or Cream Ale\",\"Beer With Yeast\",\"Belgian-Style White (or Wit)/Belgian-Style\",\"European-Style Dark/Muchner Dunkel\",\"German-Style Brown Ale/Dusseldorf-Style\",\"German-Style K=C3=B6lsch/K=C3=B6ln-Style K=C3=B6lsch\",\"German-Style KC3=B6lsch/K=C3=B6ln-=Style K=C3=B6lsch\",\"German-Style MC3=A4rzen/Oktoberfest\",\"American Dark Lager\",\"French-and Belgian-Style Saison\",\"Garden Beer (Fruit &amp; Vegetable)\",\"German-Style Doppelbock\",\"German-Style Hefeweizen\",\"German-Style KC3=B6lsch/K=C3=B6ln-Style K=C3=B6l=sch\",\"German-Style MC3=A4=rzen/Oktoberfest\",\"German-Style M=C3=A4rzen/Oktoberfest\",\"Wood-and Barrel-Aged Beer\",\"(Extra Special) Strong Bitter\",\"American-Style Lager/Ale or Cream\",\"Belgian- &amp; French-Style Ale\",\"Belgian-Style Strong Specialty Ales\",\"German-Style MC3=A4rzen/Oktoberfes=t\",\"Old Ale / Strong Ale\",\"American-Style Lager/Ale or Cream Ale\",\"American-Style Wheat Ale or Lager\",\"Belgian- &amp; French-Style Specialty Ales\",\"Belgian-Style Ale\",\"Chocolate / Cocoa Flavored Beer\",\"American Lager / Ale or Cream Ale\",\"Belgian-Style Ales\",\"Chocolate / Cocoa Flavored Beers\",\"English Old Ale / English &amp; American Strong Ales\",\"English Style (Extra Special) Strong Bitter\",\"English-Style Bitter\",\"European-Style Dark / Munchner\",\"Fruit Beers (other than raspberry)\",\"Golden Ale / Canadian Style Ale\",\"Herb and Spice Beers\",\"Other Strong Ales &amp; Lagers\",\"Raspberry Beers\",\"Smoke-Flavored Beers\",\"Specialty Beers\",\"Specialty Honey Lagers or Ales\",\"Belgian and French-Style Specialty Ales\",\"English Old Ale / English Strong Ale\",\"English-Style (Extra Special) Strong Bitter\",\"German-Style MC3=AFrzen /= Oktoberfest\",\"German-Style MC3=AFrzen / Oktoberfest\",\"India Pale Ale\",\"Other Strong Ales &amp;amp; Lagers\",\"American-Style Amber Ale\",\"American-Style Lager/Ale Or Cream Ale\",\"American-Style Wheat Ale Or Lager\",\"Barley Wine\",\"Belgian &amp; French Style Specialty Ales\",\"Belgian Style Ales\",\"Doppelbock\",\"English Old Ale/Strong Ale\",\"English Style Bitter\",\"European Style Dark/Munchener Dunkel\",\"Experimental Beer (Lager Or Ale)\",\"German Style Brown Ale/Dusseldorf Style Alt\",\"German Style Brown/Dusseldorf Style Alt\",\"German Style Wheat Ale\",\"Golden Ale/Canadian Style Ale\",\"Herb/Spice Beers\",\"Kolsch\",\"Marzen/Oktoberfest\",\"Munchener Helles\",\"Nonalcoholic Malt Beverages\",\"Other Strong Ales\",\"Smoke Flavored Beers\",\"Specialty\",\"Specialty Honey Ales Or Lagers\",\"American-Style Lager / Ale Or Cream Ale\",\"Belgian Style Specialty Ales\",\"Dopplebock\",\"Dortmunder / European Style Export\",\"English Style Old Ale / Strong Ale\",\"English Style Strong Bitter\",\"European Style Dark / Munchener Dunkel\",\"German Style Brown / Dusseldorf Style Altbier\",\"Herb / Spice Beers\",\"Marzen / Oktoberfeset\",\"Specialty Honey Ales Or Lager\",\"Amber Lager\",\"American Amber Ale\",\"American Brown Ale\",\"American Lager / Ale / Cream Ale\",\"American Light Lager\",\"American Pale Ale\",\"American Specialty Lager\",\"American Wheat Ale Or Lager\",\"Belgian Style Ale\",\"Dry Stouts\",\"English Syle Brown Ale\",\"Munchener Helles And Export\",\"Munchner Helles And Export\",\"Non Alcoholic Malt Beverages\",\"Specialty Stouts\",\"Strong Ale\",\"Traditional English Style Bitter\",\"American Lager / Ale Or Cream Ale\",\"American Malt Liquor\",\"American Premium Lager\",\"Belgian-Style Specialty Ales\",\"Blonde Ale\",\"German-Style Brown / Dusseldorf-Style Altbier\",\"Non-Alcoholic Malt Beverage\",\"Scottish-Style Ales\",\"Vienna Lager\",\"American Dry Lager\",\"American Lager/Ale Cream Ale\",\"Classic English Pale Ale\",\"Dusseldorf Style Altbier\",\"English Brown Ale\",\"Fruit, Vegetable\",\"German Wheat Ale\",\"Herb, Spice\",\"Porter\",\"Scottish Ales\",\"Traditional Bitter\",\"Ale, American Brown Ale\",\"Ale, American Pale/Amber Ale\",\"Ale, Barley Wine\",\"Ale, Blonde Ale\",\"Ale, Classic English Pale Ale\",\"Ale, Dry Stout\",\"Ale, English Brown Ale\",\"Ale, India Pale Ale\",\"Ale, Porter\",\"Ale, Scottish Ale\",\"Ale, Strong Ale\",\"Ale, Sweet Stout\",\"Ale, Traditional Bitter\",\"Lager, Amber Lager\",\"Lager, American Dry Lager\",\"Lager, American Lager\",\"Lager, American Light Lager\",\"Lager, American Malt Liquor\",\"Lager, American Premium Lager\",\"Lager, Bock\",\"Lager, Dark Lager\",\"Lager, Munchner Helles &amp; Dortmunder Export\",\"Mixed, American Lager-Ale/Cream Ale\",\"Mixed, American Wheat\",\"Mixed, Dusseldorf Altbier\",\"Mixed, Fruit, Vegetable\",\"Mixed, German Wheat\",\"Mixed, Herb, Spice\",\"Mixed, Non-Alcoholic\",\"Mixed, Smoke Flavored\",\"Mixed, Specialty\",\"American Brown Ales\",\"American Lager-Ale/Cream Ale\",\"American Pale/Amber Ale\",\"American Wheat\",\"Dry Stout\",\"Dusseldorf Altbier\",\"German Wheat\",\"Munchner Helles &amp; Dortmunder X\",\"Scottish Ale\",\"Smoke Flavored\",\"Vienna\",\"Amber Ale/American Pale Ales\",\"Amber/Viennas\",\"American Dry Lagers\",\"American Lager-Ales\",\"American Lagers\",\"American Light Lagers\",\"American Malt Liquors\",\"American Premium Lagers\",\"American Wheats\",\"Barley Wines\",\"Blonde/Golden Ales\",\"Bocks\",\"Classic Pale Ales\",\"Dortmund/Export/Specials\",\"Dusseldorf Style Altbiers\",\"Fruit, Vegetables\",\"German Wheats\",\"Herb, Spices\",\"India Pale Ales\",\"Maerzen/Oktoberfests\",\"Munchner Helles\",\"Porters\",\"Scotch Ales\",\"Specialty Ales\",\"Stouts\",\"Strong Ales\",\"Traditional Bitters\",\"Alts\",\"Amber Ales\",\"American Premium Dark Lagers\",\"Blond/Golden Ales\",\"Brown Ales\",\"Doppelbocks\",\"Drys\",\"European Dark/Munchner Dunkels\",\"Export/Specials\",\"Malt Liquors\",\"Pale Ales\",\"Rauch\",\"Weizen\",\"Bock Beers\",\"Cream Ales\",\"Dry Beers\",\"European Ambers\",\"Malt Liquor\",\"Muenchers\",\"Vienna/Marzen/Octoberfest Beer\",\"Wheat Beers\",\"European Darks\",\"Ales\",\"American Cream Ales\",\"Bocks/Dopplebocks\",\"Continental Amber Lagers\",\"Vienna Style Lagers\",\"Pilseners\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>value<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"columnDefs\":[{\"orderable\":false,\"targets\":0}]}},\"evals\":[],\"jsHooks\":[]}\r\nThere are no individual “Pilsener” observations now, instead all Pilseners have been grouped into the “Other” category which we renamed to be “Pilseners”.\r\nfct_lump()\r\nIn the beer_awards$city variable we have 803 cities. Say we’re only interested in the top 10 cities represented in the awards.\r\nWe can do this using fct_lump() along with the argument n.\r\n\r\n\r\nbeer_awards %>% \r\n    mutate(city = as_factor(city)) %>% \r\n    # keep the top 10 cities with the most observations\r\n    # and collapse all other cities into an `Other` category\r\n    mutate(city = fct_lump(city, n = 10)) %>% \r\n    pull(city) %>% \r\n    levels()\r\n  \r\n\r\n [1] \"San Antonio\"    \"Portland\"       \"Denver\"        \r\n [4] \"Golden\"         \"Chicago\"        \"San Diego\"     \r\n [7] \"Salt Lake City\" \"Seattle\"        \"Milwaukee\"     \r\n[10] \"Fort Collins\"   \"Other\"         \r\n\r\nWe can also keep categories with some percentage of the observations using fct_lump() along with the argument prop.\r\n\r\n\r\nbeer_awards %>% \r\n    mutate(city = as_factor(city)) %>% \r\n    # keep the cities with at least 1.5% of the observations\r\n    # and collapse all other cities into an `Other` category\r\n    mutate(city = fct_lump(city, prop = 0.015,\r\n                           # we can again relabel the 'Other' category\r\n                           other_level = \"Rest of the Cities\")) %>% \r\n    pull(city) %>% \r\n    levels()\r\n  \r\n\r\n[1] \"Portland\"           \"Denver\"             \"San Diego\"         \r\n[4] \"Seattle\"            \"Milwaukee\"          \"Rest of the Cities\"\r\n\r\nRe-labeling levels\r\nSometimes your factor categories will have long names. You many want to shorten these for graphs etc.\r\nbrewing_materials$type\r\n\r\n\r\nbrewing_materials %>% \r\n  count(type, sort = TRUE)\r\n\r\n\r\n# A tibble: 12 x 2\r\n   type                           n\r\n   <chr>                      <int>\r\n 1 Barley and barley products   120\r\n 2 Corn and corn products       120\r\n 3 Hops (dry)                   120\r\n 4 Hops (used as extracts)      120\r\n 5 Malt and malt products       120\r\n 6 Other                        120\r\n 7 Rice and rice products       120\r\n 8 Sugar and syrups             120\r\n 9 Total Grain products         120\r\n10 Total Non-Grain products     120\r\n11 Total Used                   120\r\n12 Wheat and wheat products     120\r\n\r\nfct_recode()\r\nThe brewing_materials$type variable has some long names. Let’s use fct_recode() to rename these.\r\n\r\n\r\nbrewing_materials %>% \r\n  mutate(type = as_factor(type)) %>% \r\n  mutate(type = fct_recode(type,\r\n          # \"new_name\" = \"old_name\"                 \r\n          \"Barley\"     = \"Barley and barley products\",\r\n          \"Malt\"       = \"Malt and malt products\",\r\n          \"Rice\"       = \"Rice and rice products\",\r\n          \"Corn\"       = \"Corn and corn products\",\r\n          \"Wheat\"      = \"Wheat and wheat products\",\r\n          # Notice here I am kinda doing the equivalent of fct_collapse()\r\n          # by assigning 2 categories to new \"Hops\" category\r\n          \"Hops\"       = \"Hops (dry)\",\r\n          \"Hops\"       = \"Hops (used as extracts)\"\r\n          )) %>% \r\n  count(type, sort = TRUE)\r\n\r\n\r\n# A tibble: 11 x 2\r\n   type                         n\r\n   <fct>                    <int>\r\n 1 Hops                       240\r\n 2 Malt                       120\r\n 3 Corn                       120\r\n 4 Rice                       120\r\n 5 Barley                     120\r\n 6 Wheat                      120\r\n 7 Total Grain products       120\r\n 8 Sugar and syrups           120\r\n 9 Other                      120\r\n10 Total Non-Grain products   120\r\n11 Total Used                 120\r\n\r\nReorder levels\r\nWhen visualising data we often want to reorder the levels of our factors. We can use fct_reorder(), fct_reorder2(), fct_infreq() and fct_rev() for ordering our factors for visuals.\r\nfct_infreq() and fct_rev()\r\nfct_infreq() orders by the frequency of each category.\r\nLet’s say we were interested in which breweries did the best over time in terms of winning gold medals.\r\n\r\n\r\ntheme_set(theme_light())\r\n\r\nbeer_awards %>% \r\n  # I only care about Gold medals\r\n  filter(medal == \"Gold\") %>% \r\n  # I am only interested in top 10 most successful breweries\r\n  mutate(brewery = fct_lump(brewery, n = 10,\r\n                            # if there are ties in 10th and 11th position, keep the first one\r\n                            ties.method = \"first\")) %>% \r\n  # add a count variable which will be named `n`\r\n  add_count(brewery, medal) %>% \r\n  # remove the Other category since it overwhelms the plot\r\n  filter(brewery != \"Other\") %>% \r\n  # order the brewery by the frequency in each brewery\r\n  ggplot(aes(y = fct_infreq(brewery))) +\r\n  geom_bar(fill = \"#f4e4e7\") +\r\n  geom_text(aes(label = as.character(n),\r\n                x = n + .06), hjust = \"center\",\r\n            colour = \"#5196b4\") +\r\n  labs(x = \"\",\r\n       y = \"\",\r\n       title = \"Breweries that won the most gold medals over time\") +\r\n  theme(axis.text.x = element_blank(),\r\n        axis.ticks.x = element_blank())\r\n\r\n\r\n\r\n\r\nThe fct_infreq() orders it from most frequent (which is shown at bottom of plot, because ggplot plots the levels from the bottom going up) to least frequent (shown at top of plot). Visually we see the least frequent at top of the plot, and most frequent at the bottom of the plot.\r\nTo see what fct_infreq() does let’s look at the levels.\r\n\r\n\r\nbeer_awards %>% \r\n  filter(medal == \"Gold\") %>% \r\n  mutate(brewery = fct_lump(brewery, n = 10,\r\n                            ties.method = \"first\")) %>%\r\n  filter(brewery != \"Other\") %>%\r\n  mutate(brewery = fct_infreq(brewery)) %>% \r\n  pull(brewery) %>% \r\n  levels()\r\n\r\n\r\n [1] \"Pabst Brewing Co.\"               \r\n [2] \"Firestone Walker Brewing Co.\"    \r\n [3] \"Boston Beer Co.\"                 \r\n [4] \"Miller Brewing Co.\"              \r\n [5] \"Anheuser-Busch, Inc\"             \r\n [6] \"New Belgium Brewing Co.\"         \r\n [7] \"Alaskan Brewing and Bottling Co.\"\r\n [8] \"Marin Brewing Co.\"               \r\n [9] \"Pelican Pub & Brewery\"           \r\n[10] \"New Glarus Brewing Co.\"          \r\n[11] \"Other\"                           \r\n\r\nIt is sometimes better to see bar plots in descending order on the visual (i.e. we want to see the most frequent at top of plot, and least frequent at the bottom). This can be accomplished by combining fct_rev() with fct_infreq().\r\n\r\n\r\nbeer_awards %>% \r\n  filter(medal == \"Gold\") %>% \r\n  mutate(brewery = fct_lump(brewery, n = 10,\r\n                            ties.method = \"first\")) %>% \r\n  add_count(brewery, medal) %>% \r\n  filter(brewery != \"Other\") %>%\r\n  # show in decreasing order of winners on plot\r\n  ggplot(aes(y = fct_rev(fct_infreq(brewery)))) +\r\n  geom_bar(fill = \"#f4e4e7\") +\r\n  geom_text(aes(label = as.character(n),\r\n                x = n + .06), hjust = 1.2,\r\n            colour = \"#5196b4\",\r\n            size = 4.5,\r\n            position = position_dodge(width = 1)) +\r\n  labs(x = \"\",\r\n       y = \"\",\r\n       title = \"Breweries that won the most gold medals over time\") +\r\n  theme(axis.text.x = element_blank(),\r\n        axis.ticks.x = element_blank())\r\n\r\n\r\n\r\n\r\n\r\n\r\nbeer_awards %>% \r\n  mutate(brewery = fct_lump(brewery, n = 10)) %>% \r\n  add_count(brewery, medal) %>% \r\n  filter(brewery != \"Other\") %>% \r\n  ggplot(aes(y = fct_rev(fct_infreq(brewery)))) +\r\n  geom_bar(fill = \"#f4e4e7\") +\r\n  geom_text(aes(label = as.character(n),\r\n                x = n + .06), hjust = 1.2,\r\n            colour = \"#5196b4\",\r\n            size = 4.2,\r\n            position = position_dodge(width = 1)) +\r\n  facet_wrap(~ fct_inorder(medal)) +\r\n  labs(x = \"\",\r\n       y = \"\",\r\n       title = \"Most successful breweries over time\",\r\n       subtitle = \"In all medal categories\") +\r\n  theme(axis.text.x = element_blank(),\r\n        axis.ticks.x = element_blank())\r\n\r\n\r\n\r\n\r\nfct_reorder()\r\nOn occasion you may want to reorder to make your visuals easier to read. You can do this using fct_reorder().\r\nfct_reorder(var, some_other_var, some_func) where:\r\nvar: the variable you want to reorder (below this is the brewery variable)\r\nsome_other_var: what should determine the order that var will be put into? Below we’re going to reorder brewery by the count of medals the brewery received.\r\nsome_func: Is there some summary function that must be applied? For example, should we sum up some_other_var, or take the median of some_other_var for the order of var to be determined by. Below since we have Bronze, Silver and Gold medals we’re going to sum up the counts in each medal category and use that to determine which order brewery should be in.\r\nUltimately we want to plot the most successful breweries from most successful to least successful in the top 10.\r\n\r\n\r\nbeer_awards %>% \r\n  # keep top 10 breweries, lump all the rest into Other\r\n  mutate(brewery = fct_lump(brewery, n = 10)) %>% \r\n  add_count(brewery, medal) %>% \r\n  select(brewery, medal, n) %>% \r\n  distinct() %>% \r\n  # remove the \"Other\" category because it makes it hard\r\n  # to see all the rest\r\n  filter(brewery != \"Other\") %>% \r\n  # reorder the brewery by the sum of the number of all\r\n  # medals such that brewery with most medals are at top\r\n  mutate(brewery = fct_reorder(brewery, n, sum)) %>% \r\n  mutate(medal = fct_relevel(medal,\r\n                                \"Bronze\",\r\n                                \"Silver\",\r\n                                \"Gold\")) %>% \r\n  ggplot(aes(n, brewery, \r\n             fill = medal)) +\r\n  geom_col() +\r\n  geom_text(aes(label = n, fontface = \"bold\"), \r\n            position = position_stack(vjust = 0.5),\r\n            colour = \"white\") +\r\n  scale_fill_viridis_d() +\r\n  labs(x = \"\",\r\n       y = \"\",\r\n       title = \"Breweries with the most medals\",\r\n       fill = \"Medal\") +\r\n  theme(axis.text.x = element_blank(),\r\n        axis.ticks.x = element_blank()) +\r\n  guides(fill = guide_legend(reverse = TRUE))\r\n\r\n\r\n\r\n\r\nCode\r\nYou will find the RMarkdown replica of this post here.\r\nSession Info\r\n\r\n\r\nShow code\r\n\r\nsessionInfo()\r\n\r\n\r\nR version 4.1.1 (2021-08-10)\r\nPlatform: x86_64-w64-mingw32/x64 (64-bit)\r\nRunning under: Windows 10 x64 (build 19043)\r\n\r\nMatrix products: default\r\n\r\nlocale:\r\n[1] LC_COLLATE=English_South Africa.1252 \r\n[2] LC_CTYPE=English_South Africa.1252   \r\n[3] LC_MONETARY=English_South Africa.1252\r\n[4] LC_NUMERIC=C                         \r\n[5] LC_TIME=English_South Africa.1252    \r\n\r\nattached base packages:\r\n[1] stats     graphics  grDevices utils     datasets  methods  \r\n[7] base     \r\n\r\nother attached packages:\r\n [1] forcats_0.5.1   stringr_1.4.0   dplyr_1.0.7     purrr_0.3.4    \r\n [5] readr_2.0.1     tidyr_1.1.3     tibble_3.1.5    ggplot2_3.3.5  \r\n [9] tidyverse_1.3.1 formatR_1.11   \r\n\r\nloaded via a namespace (and not attached):\r\n [1] httr_1.4.2        sass_0.4.0        viridisLite_0.4.0\r\n [4] bit64_4.0.5       vroom_1.5.5       jsonlite_1.7.2   \r\n [7] modelr_0.1.8      bslib_0.3.0       assertthat_0.2.1 \r\n[10] highr_0.9         cellranger_1.1.0  yaml_2.2.1       \r\n[13] pillar_1.6.4      backports_1.2.1   glue_1.4.2       \r\n[16] digest_0.6.28     rvest_1.0.2       colorspace_2.0-2 \r\n[19] htmltools_0.5.2   pkgconfig_2.0.3   broom_0.7.9      \r\n[22] haven_2.4.3       scales_1.1.1      distill_1.3      \r\n[25] tzdb_0.1.2        downlit_0.2.1     generics_0.1.1   \r\n[28] farver_2.1.0      ellipsis_0.3.2    DT_0.19          \r\n[31] withr_2.4.2       cli_3.0.1         magrittr_2.0.1   \r\n[34] crayon_1.4.2      readxl_1.3.1      evaluate_0.14    \r\n[37] fs_1.5.0          fansi_0.5.0       xml2_1.3.2       \r\n[40] tools_4.1.1       hms_1.1.0         lifecycle_1.0.1  \r\n[43] emoji_0.2.0       munsell_0.5.0     reprex_2.0.1     \r\n[46] compiler_4.1.1    jquerylib_0.1.4   rlang_0.4.12     \r\n[49] grid_4.1.1        rstudioapi_0.13   htmlwidgets_1.5.4\r\n[52] crosstalk_1.1.1   labeling_0.4.2    rmarkdown_2.11   \r\n[55] gtable_0.3.0      codetools_0.2-18  DBI_1.1.1        \r\n[58] curl_4.3.2        R6_2.5.1          lubridate_1.7.10 \r\n[61] knitr_1.36        fastmap_1.1.0     bit_4.0.4        \r\n[64] utf8_1.2.2        stringi_1.7.5     parallel_4.1.1   \r\n[67] Rcpp_1.0.7        vctrs_0.3.8       dbplyr_2.1.1     \r\n[70] tidyselect_1.1.1  xfun_0.27        \r\n\r\nFurther Resources\r\nChapter on Factors in R for Data Science.\r\n{forcats} Tidyverse Page.\r\nVignette on {forcats} by Emily Robinson.\r\nDavid Robinson’s TidyTuesday screencasts often include much factor wrangling.\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-01-30-control-your-factors-with-forcats/preview.jpg",
    "last_modified": "2021-11-27T14:08:00+02:00",
    "input_file": {}
  },
  {
    "path": "posts/2020-12-31-using-tidyverse-with-dbs-partiii/",
    "title": "Using the tidyverse with Databases - Part III",
    "description": "Setting up, and connecting to a Star Wars MySQL Database",
    "author": [
      {
        "name": "Vebash Naidoo",
        "url": "https://twitter.com/Sciencificity"
      }
    ],
    "date": "2020-12-31",
    "categories": [
      "SQL",
      "databases",
      "tidyverse",
      "dbplyr",
      "MySQL",
      "MariaDB"
    ],
    "contents": "\r\n\r\nContents\r\nRecap\r\nPart I\r\nPart II\r\n\r\nWhat are we tackling in Part III?\r\nSetup a MySQL DB\r\nCreate a local MySQL instance\r\nOur data\r\nCreate some tables\r\n\r\nConnections Pane\r\nMake a connection\r\nODBC\r\nAppropriate DBI-compliant package\r\n\r\nWriting to a MySQL Database from RStudio\r\n\r\nCommunicate with our MySQL Database\r\nConnect\r\nTake a look around\r\nExplore data\r\nDone? Remember to disconnect!\r\nFin\r\n\r\nAcknowledgements\r\nMore resources\r\n\r\n\r\n\r\n\r\nblockquote {\r\n  background: #f9f9f9;\r\n  border-left: 10px solid #ccc;\r\n  margin: 1.5em 10px;\r\n  padding: 0.5em 10px;\r\n  quotes: \"\\201C\"\"\\201D\"\"\\2018\"\"\\2019\";\r\n}\r\nblockquote:before {\r\n  color: #ccc;\r\n  content: open-quote;\r\n  font-size: 4em;\r\n  line-height: 0.1em;\r\n  margin-right: 0.25em;\r\n  vertical-align: -0.4em;\r\n}\r\n# blockquote:after {\r\n#   color: #ccc;\r\n#   content:\"\\201D\";\r\n#   font-size: 4em;\r\n#   line-height: 0.1em;\r\n#   margin-right: 0.25em;\r\n#   vertical-align: -0.4em;\r\n# }\r\nblockquote p {\r\n  display: inline;\r\n}\r\n\r\nblockquote {\r\n  background: #f9f9f9;\r\n  border-left: 10px solid #ccc;\r\n  margin: 1.5em 10px;\r\n  padding: 0.5em 10px;\r\n  quotes: \"\\201C\"\"\\201D\"\"\\2018\"\"\\2019\";\r\n}\r\nblockquote:before {\r\n  color: #ccc;\r\n  content: open-quote;\r\n  font-size: 4em;\r\n  line-height: 0.1em;\r\n  margin-right: 0.25em;\r\n  vertical-align: -0.4em;\r\n}\r\n# blockquote:after {\r\n#   color: #ccc;\r\n#   content:\"\\201D\";\r\n#   font-size: 4em;\r\n#   line-height: 0.1em;\r\n#   margin-right: 0.25em;\r\n#   vertical-align: -0.4em;\r\n# }\r\nblockquote p {\r\n  display: inline;\r\n}\r\n\r\n\r\nWhen gone am I, the last of the Jedi will you be. The Force runs strong in your family. Pass on what you have learned.\r\n\r\n\r\n— Yoda\r\n\r\nPhoto by Marija Zaric on Unsplash\r\nRecap\r\nPart I\r\nIn Part I we made a connection to a SQLite Database (DB).\r\nPart II\r\nIn Part II we progressed a bit further, with more in-depth {dplyr} workflows, and we also brought the data into R after doing most of the computation on the database itself.\r\nWhat are we tackling in Part III?\r\nWe’re going to:\r\nDo a quick run through of setting up a MySQL database.\r\nConnect to the database using the Connections Pane in RStudio, which is essentially a connection using an ODBC Driver.\r\nLeverage the MySQL DBMS to do the computation of the query on the database, instead of in R, bringing the aggregated data into R when needed. We will collect() (i.e. bring data into R when we’re using functions that need the full dataset, not the “lazy result”).\r\nFor visualisations using ggplot.\r\nSome functions only work on data in a dataframe like structure, and can’t work with the “lazy query” result. We will need to collect() the data in this case to proceed with our data pipeline e.g. pivot_longer() as we will see later.\r\n\r\ncollecting data is when we bring the data into R. If you recall in the Part II post we pulled data into R when we had our aggregated data computed via a query we ran in the DBMS itself.\r\nThe project on GitHub, has the code to setup the tables in the MySQL DB from R.\r\nSetup a MySQL DB\r\nWe’re going to set-up a local MySQL DB.\r\nWe’re going to use {dplyr}’s starwars dataset.\r\nWe’ll supplement this with survey data from a TidyTuesday dataset back in 2018, as well as some information on the franchise revenue also from TidyTuesday.\r\nCreate a local MySQL instance\r\nGo to the MySQL page to download the appropriate server for you. I am on a Windows machine so I used the MySQL Installer for Windows.\r\nRun through the setup.\r\nFollow the setup steps - I installed a “Full version”.\r\nIf you did not create your “root” user during the setup process (this happened to me), open the MySQL Installer from your machine’s Startup Menu.\r\nClick Reconfigure next to MySQL Server.\r\n\r\nCheck Show Advanced and Logging Options.\r\nClick Next > to navigate the setup, which will ask you to setup a password for root.\r\n\r\n\r\nI opened MySQL Workbench and setup a user named admin, after connecting to the local host. It is good practise to keep your root user aside for security reasons, therefore creating other profiles to access the DB is advised.\r\nI created a “schema” by clicking on the little Database icon in MySQL Workbench\r\nLink is “Create a new schema in the connected server”.\r\n\r\nAlternately in the MySQL Command Line Client run:\r\nCREATE DATABASE starwars CHARACTER SET utf8 COLLATE utf8_unicode_ci;\r\nThat’s it for the MySQL DBMS itself, the rest of the work for setting up our DB will be done in R.\r\nOur data\r\nIn the {dplyr} 📦 we have a dataset starwars which has information for the characters.\r\n\r\n\r\n# need to figure out what data is included\r\n# in a package? \r\n# Call data(package = \"pkg_name\")\r\n# which gives you a nice list of included datasets\r\ndata(package = \"dplyr\")\r\n\r\n\r\n\r\n\r\nLet’s have a squizz at the starwars dataset.\r\n\r\n\r\nstarwars\r\n\r\n\r\n# A tibble: 87 x 14\r\n   name  height  mass hair_color skin_color eye_color birth_year sex  \r\n   <chr>  <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr>\r\n 1 Luke~    172    77 blond      fair       blue            19   male \r\n 2 C-3PO    167    75 <NA>       gold       yellow         112   none \r\n 3 R2-D2     96    32 <NA>       white, bl~ red             33   none \r\n 4 Dart~    202   136 none       white      yellow          41.9 male \r\n 5 Leia~    150    49 brown      light      brown           19   fema~\r\n 6 Owen~    178   120 brown, gr~ light      blue            52   male \r\n 7 Beru~    165    75 brown      light      blue            47   fema~\r\n 8 R5-D4     97    32 <NA>       white, red red             NA   none \r\n 9 Bigg~    183    84 black      light      brown           24   male \r\n10 Obi-~    182    77 auburn, w~ fair       blue-gray       57   male \r\n# ... with 77 more rows, and 6 more variables: gender <chr>,\r\n#   homeworld <chr>, species <chr>, films <list>, vehicles <list>,\r\n#   starships <list>\r\n\r\nI broke this dataset apart to create different tables containing subsets of the information so we can practise on:\r\nfilms: contains information on the movies.\r\nvehicles: contains a listing on the vehicles in the movies.\r\nstarships: contains a listing for the starships in the movies.\r\nappearances: which has a listing of each character against the film they appeared in.\r\nvehicles_piloted: has a listing of each character against the vehicle they drove.\r\nstarships_piloted: has a listing of each character against the starship they piloted.\r\ncharacters: has information on each character for example their height, mass etc.\r\nsurvey: contains information from a survey run on the popularity of the Star Wars movies, characters etc.\r\nsurvey_levels: contains an id per character level rating e.g. Very unfavorably was coded as 1.\r\nfranchise: contains the revenue of the franchise across different media - e.g. how much revenue comes from movies, merchandise etc.\r\n\r\n\r\n\r\nhtml {\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\r\n}\r\n\r\n#qhvctsjjpf .gt_table {\r\n  display: table;\r\n  border-collapse: collapse;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  color: #333333;\r\n  font-size: 16px;\r\n  font-weight: normal;\r\n  font-style: normal;\r\n  background-color: #FFFFFF;\r\n  width: auto;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #A8A8A8;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #A8A8A8;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n}\r\n\r\n#qhvctsjjpf .gt_heading {\r\n  background-color: #FFFFFF;\r\n  text-align: center;\r\n  border-bottom-color: #FFFFFF;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#qhvctsjjpf .gt_title {\r\n  color: #333333;\r\n  font-size: 125%;\r\n  font-weight: initial;\r\n  padding-top: 4px;\r\n  padding-bottom: 4px;\r\n  border-bottom-color: #FFFFFF;\r\n  border-bottom-width: 0;\r\n}\r\n\r\n#qhvctsjjpf .gt_subtitle {\r\n  color: #333333;\r\n  font-size: 85%;\r\n  font-weight: initial;\r\n  padding-top: 0;\r\n  padding-bottom: 6px;\r\n  border-top-color: #FFFFFF;\r\n  border-top-width: 0;\r\n}\r\n\r\n#qhvctsjjpf .gt_bottom_border {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#qhvctsjjpf .gt_col_headings {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#qhvctsjjpf .gt_col_heading {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: normal;\r\n  text-transform: inherit;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 6px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#qhvctsjjpf .gt_column_spanner_outer {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: normal;\r\n  text-transform: inherit;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  padding-left: 4px;\r\n  padding-right: 4px;\r\n}\r\n\r\n#qhvctsjjpf .gt_column_spanner_outer:first-child {\r\n  padding-left: 0;\r\n}\r\n\r\n#qhvctsjjpf .gt_column_spanner_outer:last-child {\r\n  padding-right: 0;\r\n}\r\n\r\n#qhvctsjjpf .gt_column_spanner {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 5px;\r\n  overflow-x: hidden;\r\n  display: inline-block;\r\n  width: 100%;\r\n}\r\n\r\n#qhvctsjjpf .gt_group_heading {\r\n  padding: 8px;\r\n  color: #333333;\r\n  background-color: #ADEFD1;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  text-transform: inherit;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#qhvctsjjpf .gt_empty_group_heading {\r\n  padding: 0.5px;\r\n  color: #333333;\r\n  background-color: #ADEFD1;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#qhvctsjjpf .gt_from_md > :first-child {\r\n  margin-top: 0;\r\n}\r\n\r\n#qhvctsjjpf .gt_from_md > :last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n#qhvctsjjpf .gt_row {\r\n  padding-top: 3px;\r\n  padding-bottom: 3px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  margin: 10px;\r\n  border-top-style: solid;\r\n  border-top-width: 1px;\r\n  border-top-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#qhvctsjjpf .gt_stub {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  text-transform: inherit;\r\n  border-right-style: solid;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  padding-left: 12px;\r\n}\r\n\r\n#qhvctsjjpf .gt_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#qhvctsjjpf .gt_first_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#qhvctsjjpf .gt_grand_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#qhvctsjjpf .gt_first_grand_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: double;\r\n  border-top-width: 6px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#qhvctsjjpf .gt_striped {\r\n  background-color: rgba(128, 128, 128, 0.05);\r\n}\r\n\r\n#qhvctsjjpf .gt_table_body {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#qhvctsjjpf .gt_footnotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#qhvctsjjpf .gt_footnote {\r\n  margin: 0px;\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#qhvctsjjpf .gt_sourcenotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#qhvctsjjpf .gt_sourcenote {\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#qhvctsjjpf .gt_left {\r\n  text-align: left;\r\n}\r\n\r\n#qhvctsjjpf .gt_center {\r\n  text-align: center;\r\n}\r\n\r\n#qhvctsjjpf .gt_right {\r\n  text-align: right;\r\n  font-variant-numeric: tabular-nums;\r\n}\r\n\r\n#qhvctsjjpf .gt_font_normal {\r\n  font-weight: normal;\r\n}\r\n\r\n#qhvctsjjpf .gt_font_bold {\r\n  font-weight: bold;\r\n}\r\n\r\n#qhvctsjjpf .gt_font_italic {\r\n  font-style: italic;\r\n}\r\n\r\n#qhvctsjjpf .gt_super {\r\n  font-size: 65%;\r\n}\r\n\r\n#qhvctsjjpf .gt_footnote_marks {\r\n  font-style: italic;\r\n  font-weight: normal;\r\n  font-size: 65%;\r\n}\r\nData Dictionary for the Star Wars Database\r\n    \r\n      Field Type\r\n      Notes\r\n    films\r\n    id\r\ninteger\r\nIdentification field for the film e.g. 5films\r\nstring\r\nMovie Name e.g. \"The Empire Strikes Back\"year\r\ndouble\r\nYear movie was released e.g. 1980vehicles\r\n    id\r\ninteger\r\nIdentification field for the vehicle e.g. 3vehicles\r\nstring\r\nName of vehicle e.g. \"Tribubble bongo\"starships\r\n    id\r\ninteger\r\nIdentification field for the starship e.g. 10starships\r\nstring\r\nName of starship e.g. \"Millennium Falcon\"characters\r\n    name\r\nstring\r\nCharacter Name e.g. Leia Organaheight\r\ninteger\r\nHeight of charactermass\r\ndouble\r\nMass of characterhair_color\r\nstring\r\nHair Color of characterskin_color\r\nstring\r\nSkin Color of charactereye_color\r\nstring\r\nEye Color of characterbirth_year\r\ndouble\r\nBirth Year of charactersex\r\nstring\r\nSex of charactergender\r\nstring\r\nGender of characterhomeworld\r\nstring\r\nHomeworld of characterspecies\r\nstring\r\nSpecies of characterappearances\r\n    film_id\r\ninteger\r\nLink into the films table, e.g. 4 (denoting character appeared in \"A New Hope\")name\r\nstring\r\nCharacter Name e.g. Leia Organavehicles_piloted\r\n    vehicle_id\r\ninteger\r\nLink into the vehicles table, e.g. 3 (denoting character drove a \"Tribubble bongo\")name\r\nstring\r\nCharacter Name e.g. Obi-Wan Kenobistarships_piloted\r\n    starship_id\r\ninteger\r\nLink into the starships table, e.g. 10 (denoting character piloted a \"Millennium Falcon\")name\r\nstring\r\nCharacter Name e.g. Chewbaccasurvey_levels\r\n    id\r\ninteger\r\nIdentification for the survey response e.g. 1level\r\nstring\r\nThe survey response e.g. \"Very unfavorably\"survey\r\n    respondent_id\r\ninteger\r\nIdentification for the survey respondent e.g. 3292879998any_of_6\r\nstring\r\nDid respondent watch any of the 6 movies? (Original 6 before reboot) - e.g. Yes, Nostar_wars_fan\r\nstring\r\nIs the respondent a star wars fan? - e.g. Yes, Nowatched_The Phantom Menace\r\nstring\r\nDid the respondent watch said movie? - e.g. Yes, Nowatched_A New Hope\r\nstring\r\nDid the respondent watch said movie? - e.g. Yes, Nowatched_Attack of the Clones\r\nstring\r\nDid the respondent watch said movie? - e.g. Yes, Nowatched_Return of the Jedi\r\nstring\r\nDid the respondent watch said movie? - e.g. Yes, Nowatched_Revenge of the Sith\r\nstring\r\nDid the respondent watch said movie? - e.g. Yes, Nowatched_The Empire Strikes Back\r\nstring\r\nDid the respondent watch said movie? - e.g. Yes, Norank_A New Hope\r\ndouble\r\nHow does the respondent rank the movie? 1=Best, 6 =Worstrank_Attack of the Clones\r\ndouble\r\nHow does the respondent rank the movie? 1=Best, 6 =Worstrank_Return of the Jedi\r\ndouble\r\nHow does the respondent rank the movie? 1=Best, 6 =Worstrank_Revenge of the Sith\r\ndouble\r\nHow does the respondent rank the movie? 1=Best, 6 =Worstrank_The Empire Strikes Back\r\ndouble\r\nHow does the respondent rank the movie? 1=Best, 6 =Worstrank_The Phantom Menace\r\ndouble\r\nHow does the respondent rank the movie? 1=Best, 6 =Worst`Han Solo`\r\ninteger\r\nLink into survey_levels table where 5 = Very favorably`Luke Skywalker`\r\ninteger\r\nLink into survey_levels table where 5 = Very favorably`Leia Organa`\r\ninteger\r\nLink into survey_levels table where 5 = Very favorably`Anakin Skywalker`\r\ninteger\r\nLink into survey_levels table where 5 = Very favorably`Obi-Wan Kenobi`\r\ninteger\r\nLink into survey_levels table where 5 = Very favorably`Palpatine`\r\ninteger\r\nLink into survey_levels table where 5 = Very favorably`Darth Vader`\r\ninteger\r\nLink into survey_levels table where 5 = Very favorably`Lando Calrissian`\r\ninteger\r\nLink into survey_levels table where 5 = Very favorably`Boba Fett`\r\ninteger\r\nLink into survey_levels table where 5 = Very favorably`C-3P0`\r\ninteger\r\nLink into survey_levels table where 5 = Very favorably`R2-D2`\r\ninteger\r\nLink into survey_levels table where 5 = Very favorably`Jar Jar Binks`\r\ninteger\r\nLink into survey_levels table where 5 = Very favorably`Padme Amidala`\r\ninteger\r\nLink into survey_levels table where 5 = Very favorably`Yoda`\r\ninteger\r\nLink into survey_levels table where 5 = Very favorablywho_shot_first\r\nstring\r\nHan, Greedo, or \"I don't understand the question\"know_expanded_universe\r\nstring\r\nDoes respondent know the expanded universe? Yes / Nofan_expanded_universe\r\nstring\r\nDoes respondent like the expanded universe? Yes / Notrekkie\r\nstring\r\nIs respondent a Star Trek fan? Yes / NoGender\r\nstring\r\nGender e.g. MaleAge\r\nstring\r\nAge range e.g. 30-44Household Income\r\nstring\r\nIncome range e.g. $50,000 - $99,999Education\r\nstring\r\nEducation level e.g. Some college or Associate degreeLocation (Census Region)\r\nstring\r\nLocation of respondent e.g. East South Centralfranchise\r\n    franchise\r\nstring\r\nStar Warsrevenue_category\r\nstring\r\nCategory of revenue generation e.g. Book salesrevenue_billion_dollars\r\ndouble\r\nRevenue earned from category, in billions of dollarsyear_created\r\ndouble\r\nYear the franchise was createdoriginal_media\r\nstring\r\nOriginal media the franchise was released on e.g. Book, Filmcreators\r\nstring\r\nWho created the franchiseowners\r\nstring\r\nThe owners of the franchise\r\n\r\nCreate some tables\r\nHere’s an example of how I created the films, and the associated appearances tables.\r\n\r\n\r\n(films <- starwars %>%  \r\n  # get the films column which contains lists of values\r\n  select(films) %>% \r\n  # flatten the films list - this will create multiple rows for\r\n  # each film in the list\r\n  unnest(films) %>% \r\n  # get rid of duplicates\r\n  distinct() )\r\n\r\n\r\n# A tibble: 7 x 1\r\n  films                  \r\n  <chr>                  \r\n1 The Empire Strikes Back\r\n2 Revenge of the Sith    \r\n3 Return of the Jedi     \r\n4 A New Hope             \r\n5 The Force Awakens      \r\n6 Attack of the Clones   \r\n7 The Phantom Menace     \r\n\r\nfilm_years <- tribble(~name,      ~year,\r\n        #------------------------#------\r\n        \"The Empire Strikes Back\", 1980,\r\n        \"Revenge of the Sith\"    , 2005,\r\n        \"Return of the Jedi\"     , 1983,\r\n        \"A New Hope\"             , 1977,\r\n        \"The Force Awakens\"      , 2015,\r\n        \"Attack of the Clones\"   , 2002,\r\n        \"The Phantom Menace\"     , 1999)\r\n\r\nfilms <- films %>% \r\n  # Join the tables to tag on the `year` column\r\n  inner_join(film_years,\r\n             # left table column = films, right table column = name\r\n             by = c(\"films\" = \"name\"))\r\n\r\n# Order of films in terms of episodes, not release date\r\n# We're going to use this to create a factor\r\nfilm_levels <- c(\"The Phantom Menace\", \"Attack of the Clones\", \"Revenge of the Sith\",\r\n                 \"A New Hope\", \"The Empire Strikes Back\", \"Return of the Jedi\",\r\n                 \"The Force Awakens\")\r\n(films <- films %>% \r\n  # make \"films\" a factor using the film_levels we created above\r\n  # this will ensure the id = 4 is associated to 'A New Hope'\r\n  mutate(films = factor(films, film_levels),) %>% \r\n  # create an id column - we will use this later\r\n  # the .before just says I want the id column to come before the films column\r\n  mutate(id = as.integer(films), .before = \"films\") %>% \r\n  arrange(id))\r\n\r\n\r\n# A tibble: 7 x 3\r\n     id films                    year\r\n  <int> <fct>                   <dbl>\r\n1     1 The Phantom Menace       1999\r\n2     2 Attack of the Clones     2002\r\n3     3 Revenge of the Sith      2005\r\n4     4 A New Hope               1977\r\n5     5 The Empire Strikes Back  1980\r\n6     6 Return of the Jedi       1983\r\n7     7 The Force Awakens        2015\r\n\r\n(appearances <- starwars %>% \r\n  # let's save the characters appearances in the movies\r\n  select(name, films) %>% \r\n  # we end up with {character_name, film} for every film the character appears in\r\n  unnest(films) %>%\r\n  # join it with our new films table\r\n  inner_join(films) %>% \r\n  # select the id which we rename to film_id, and then the name of the character\r\n  select(film_id = id, name))\r\n\r\n\r\n# A tibble: 173 x 2\r\n   film_id name          \r\n     <int> <chr>         \r\n 1       5 Luke Skywalker\r\n 2       3 Luke Skywalker\r\n 3       6 Luke Skywalker\r\n 4       4 Luke Skywalker\r\n 5       7 Luke Skywalker\r\n 6       5 C-3PO         \r\n 7       2 C-3PO         \r\n 8       1 C-3PO         \r\n 9       3 C-3PO         \r\n10       6 C-3PO         \r\n# ... with 163 more rows\r\n\r\nIf you’d like to follow along the RMarkdown file with all the code is here.\r\nConnections Pane\r\nIn RStudio there is a Connections Pane.\r\nCreate a New Connection.\r\nChoose an appropriate driver (e.g. I chose MySQL ODBC 8.0 Unicode Driver).\r\nIf you struggle to figure out the parameters needed in the Popup window provided, the connectionstrings website is a great help.\r\nChoose the DBMS you’re working with - in this case MySQL.\r\nCopy the connection string - in this case I used the TCP Port string.\r\n\r\nCopy the connection string as per the connection strings website and paste it in the Parameters field. Amend the parameters such as user name, password etc. as per your instance. If you’re using a corporate database, you need to use the IP Address provided by your Database Administrator as Server, same for your credentials etc.\r\nTest the connection.\r\nCopy the full string into the console / script you’re working in.\r\n\r\nMake a connection\r\nODBC\r\nWe use the connection string generated via the Connections Pane to connect to our MySQL DB, and write our data frames into database tables.\r\n\r\n\r\n# Load libraries\r\nlibrary(DBI)\r\n# Make a connection\r\ncon <- dbConnect(odbc::odbc(), \r\n  .connection_string = \"Driver={MySQL ODBC 8.0 Unicode Driver};\r\n      Server=localhost;\r\n      Port=3306;\r\n      Database=starwars;\r\n      Uid=admin;\r\n      Pwd=Luke1@my0urf@ther;\", \r\n    timeout = 10)\r\n\r\n\r\n\r\nAppropriate DBI-compliant package\r\nWe may alternatively use the appropriate DBI compliant package. (RMariaDB::MariaDB()).\r\n\r\nDBI is the DataBase Interface 📦 for R. Instead of using an ODBC driver we may use one of the DBI compliant packages created by the R community to make a connection. In the case of MySQL we use RMariaDB 📦\r\n\r\n\r\n# Make a connection\r\ncon <- dbConnect(drv = RMariaDB::MariaDB(), \r\n                 host = \"localhost\", \r\n                 port = \"3306\",\r\n                 user = \"admin\", \r\n                 password = \"Luke1@my0urf@ther\",\r\n                 dbname = \"starwars\")\r\n# Good housekeeping means disconnect\r\ndbDisconnect(con)\r\n\r\n\r\n\r\nWriting to a MySQL Database from RStudio\r\nOnce we have connected to the database, we’re ready to write our data frames into tables in the DBMS.\r\n\r\n\r\n# Write data frames we created to actual tables in the database\r\nDBI::dbWriteTable(conn = con, \r\n                  \"films\", # name of table in database\r\n                  films,   # the data frame\r\n                  overwrite = TRUE) # if table exists overwrite it with this data\r\nDBI::dbWriteTable(conn = con, \"appearances\",\r\n                  appearances, overwrite = TRUE)\r\n# Good housekeeping means disconnect\r\ndbDisconnect(con)\r\n\r\n\r\n\r\nCommunicate with our MySQL Database\r\nAlright, we’re all set now. We can now start to query our database tables in our MySQL DBMS.\r\nConnect\r\nAs before the first step is connecting.\r\n\r\n\r\n# Load libraries\r\nlibrary(DBI)\r\n# Make a connection\r\ncon <- dbConnect(odbc::odbc(), \r\n  .connection_string = \"Driver={MySQL ODBC 8.0 Unicode Driver};\r\n      Server=localhost;\r\n      Port=3306;\r\n      Database=starwars;\r\n      Uid=admin;\r\n      Pwd=Luke1@my0urf@ther;\", \r\n    timeout = 10)\r\ndbListTables(con)\r\n\r\n\r\n [1] \"appearances\"       \"characters\"        \"films\"            \r\n [4] \"franchise\"         \"starships\"         \"starships_piloted\"\r\n [7] \"survey\"            \"survey_levels\"     \"vehicles\"         \r\n[10] \"vehicles_piloted\" \r\n\r\ndbListFields(con, \"characters\")\r\n\r\n\r\n [1] \"name\"       \"height\"     \"mass\"       \"hair_color\" \"skin_color\"\r\n [6] \"eye_color\"  \"birth_year\" \"sex\"        \"gender\"     \"homeworld\" \r\n[11] \"species\"   \r\n\r\nTake a look around\r\nLet’s get familiar with our data.\r\n\r\n\r\ntbl(con, \"characters\")\r\n\r\n\r\n# Source:   table<characters> [?? x 11]\r\n# Database: mysql [admin@:/starwars]\r\n   name  height  mass hair_color skin_color eye_color birth_year sex  \r\n   <chr>  <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr>\r\n 1 Luke~    172    77 blond      fair       blue            19   male \r\n 2 C-3PO    167    75 <NA>       gold       yellow         112   none \r\n 3 R2-D2     96    32 <NA>       white, bl~ red             33   none \r\n 4 Dart~    202   136 none       white      yellow          41.9 male \r\n 5 Leia~    150    49 brown      light      brown           19   fema~\r\n 6 Owen~    178   120 brown, gr~ light      blue            52   male \r\n 7 Beru~    165    75 brown      light      blue            47   fema~\r\n 8 R5-D4     97    32 <NA>       white, red red             NA   none \r\n 9 Bigg~    183    84 black      light      brown           24   male \r\n10 Obi-~    182    77 auburn, w~ fair       blue-gray       57   male \r\n# ... with more rows, and 3 more variables: gender <chr>,\r\n#   homeworld <chr>, species <chr>\r\n\r\ntbl(con, \"films\")\r\n\r\n\r\n# Source:   table<films> [?? x 3]\r\n# Database: mysql [admin@:/starwars]\r\n     id films                    year\r\n  <int> <chr>                   <dbl>\r\n1     1 The Phantom Menace       1999\r\n2     2 Attack of the Clones     2002\r\n3     3 Revenge of the Sith      2005\r\n4     4 A New Hope               1977\r\n5     5 The Empire Strikes Back  1980\r\n6     6 Return of the Jedi       1983\r\n7     7 The Force Awakens        2015\r\n\r\ntbl(con, \"appearances\")\r\n\r\n\r\n# Source:   table<appearances> [?? x 2]\r\n# Database: mysql [admin@:/starwars]\r\n   film_id name          \r\n     <int> <chr>         \r\n 1       5 Luke Skywalker\r\n 2       3 Luke Skywalker\r\n 3       6 Luke Skywalker\r\n 4       4 Luke Skywalker\r\n 5       7 Luke Skywalker\r\n 6       5 C-3PO         \r\n 7       2 C-3PO         \r\n 8       1 C-3PO         \r\n 9       3 C-3PO         \r\n10       6 C-3PO         \r\n# ... with more rows\r\n\r\nConnecting via the Connections Pane has some additional perks, in that you can have a look at your tables as though you’re in the DBMS itself. You may also preview the first 1000 rows.\r\n\r\nExplore data\r\nLet’s see if we can have a look at the popularity of the characters as per the survey dataset.\r\nThe TidyTuesday Star Wars survey dataset we used, was based on this FiveThirtyEight article.\r\n\r\n\r\n(svy_levels <- tbl(con, \"survey_levels\") %>% \r\n  collect())\r\n\r\n\r\n# A tibble: 6 x 2\r\n     id level                                      \r\n  <int> <chr>                                      \r\n1     5 Very favorably                             \r\n2     4 Somewhat favorably                         \r\n3     3 Neither favorably nor unfavorably (neutral)\r\n4     2 Somewhat unfavorably                       \r\n5     6 Unfamiliar (N/A)                           \r\n6     1 Very unfavorably                           \r\n\r\n(character_survey <- tbl(con, \"survey\") %>% \r\n  # Let's subset the rows to only those who claim they are fans of\r\n  # the franchise\r\n  filter(any_of_6 == \"Yes\", star_wars_fan == \"Yes\") %>% \r\n  # Let's only consider some columns\r\n  select(`Han Solo`:`Yoda`, respondent_id,\r\n         age = Age, respondent_gender = Gender) %>% \r\n  # we have to collect the data since the pivot_longer is\r\n  # not set up to work on DB Table data\r\n  collect() %>% \r\n  # Put each character name which is currently the name of a column\r\n  # in a column as a value\r\n  pivot_longer(cols = c(`Han Solo`:`Yoda`), names_to = \"name\",\r\n               values_to = \"survey_id\") %>% \r\n  # Get the actual text of the response - e.g. Very Favorable\r\n  inner_join(svy_levels,\r\n             by = c(\"survey_id\" = \"id\")))\r\n\r\n\r\n# A tibble: 7,657 x 6\r\n   respondent_id age   respondent_gender name      survey_id level    \r\n           <dbl> <chr> <chr>             <chr>         <int> <chr>    \r\n 1    3292879998 18-29 Male              Han Solo          5 Very fav~\r\n 2    3292879998 18-29 Male              Luke Sky~         5 Very fav~\r\n 3    3292879998 18-29 Male              Leia Org~         5 Very fav~\r\n 4    3292879998 18-29 Male              Anakin S~         5 Very fav~\r\n 5    3292879998 18-29 Male              Obi-Wan ~         5 Very fav~\r\n 6    3292879998 18-29 Male              Palpatine         5 Very fav~\r\n 7    3292879998 18-29 Male              Darth Va~         5 Very fav~\r\n 8    3292879998 18-29 Male              Lando Ca~         6 Unfamili~\r\n 9    3292879998 18-29 Male              Boba Fett         6 Unfamili~\r\n10    3292879998 18-29 Male              C-3P0             5 Very fav~\r\n# ... with 7,647 more rows\r\n\r\n# We want to only get the character info for the characters in the survey\r\n# So we want to basically say `WHERE name IN (...)`\r\n# This code is setting that up\r\ncharacters <- character_survey %>% \r\n  select(name) %>% \r\n  distinct() %>% \r\n  mutate(name = str_glue(\"'{name}'\")) %>% \r\n  as_tibble()\r\ncolnames(characters) <-  NULL\r\ncharacters <- characters %>% as.list() %>% unlist()\r\ncharacters <- characters %>%  paste(collapse =  \", \")\r\n# Creating the WHERE name IN `(...)` part\r\n(sql_code <- str_glue(\"({characters})\"))\r\n\r\n\r\n('Han Solo', 'Luke Skywalker', 'Leia Organa', 'Anakin Skywalker', 'Obi-Wan Kenobi', 'Palpatine', 'Darth Vader', 'Lando Calrissian', 'Boba Fett', 'C-3P0', 'R2-D2', 'Jar Jar Binks', 'Padme Amidala', 'Yoda')\r\n\r\nchar_query <- tbl(con, \"characters\") %>% \r\n  inner_join(tbl(con, \"appearances\")) %>% \r\n  inner_join(tbl(con, \"films\"),\r\n             by = c(\"film_id\" = \"id\")) %>% \r\n  select(name, gender, homeworld, species, films, year) %>% \r\n  # Note here I use the special function `sql()` to directly \r\n  # insert a bit of SQL code in my pipeline\r\n  filter(name %in% sql(sql_code)) \r\n\r\nchar_query %>% \r\n  show_query()\r\n\r\n\r\n<SQL>\r\nSELECT *\r\nFROM (SELECT `name`, `gender`, `homeworld`, `species`, `films`, `year`\r\nFROM (SELECT `name`, `height`, `mass`, `hair_color`, `skin_color`, `eye_color`, `birth_year`, `sex`, `gender`, `homeworld`, `species`, `film_id`, `films`, `year`\r\nFROM (SELECT `LHS`.`name` AS `name`, `height`, `mass`, `hair_color`, `skin_color`, `eye_color`, `birth_year`, `sex`, `gender`, `homeworld`, `species`, `film_id`\r\nFROM `characters` AS `LHS`\r\nINNER JOIN `appearances` AS `RHS`\r\nON (`LHS`.`name` = `RHS`.`name`)\r\n) `LHS`\r\nINNER JOIN `films` AS `RHS`\r\nON (`LHS`.`film_id` = `RHS`.`id`)\r\n) `q01`) `q02`\r\nWHERE (`name` IN ('Han Solo', 'Luke Skywalker', 'Leia Organa', 'Anakin Skywalker', 'Obi-Wan Kenobi', 'Palpatine', 'Darth Vader', 'Lando Calrissian', 'Boba Fett', 'C-3P0', 'R2-D2', 'Jar Jar Binks', 'Padme Amidala', 'Yoda'))\r\n\r\n(character_info <- character_survey %>%\r\n  # we only want info for the characters that formed part of the survey\r\n  left_join(char_query %>% \r\n              collect())) \r\n\r\n\r\n# A tibble: 29,012 x 11\r\n   respondent_id age   respondent_gender name   survey_id level gender\r\n           <dbl> <chr> <chr>             <chr>      <int> <chr> <chr> \r\n 1    3292879998 18-29 Male              Han S~         5 Very~ mascu~\r\n 2    3292879998 18-29 Male              Han S~         5 Very~ mascu~\r\n 3    3292879998 18-29 Male              Han S~         5 Very~ mascu~\r\n 4    3292879998 18-29 Male              Han S~         5 Very~ mascu~\r\n 5    3292879998 18-29 Male              Luke ~         5 Very~ mascu~\r\n 6    3292879998 18-29 Male              Luke ~         5 Very~ mascu~\r\n 7    3292879998 18-29 Male              Luke ~         5 Very~ mascu~\r\n 8    3292879998 18-29 Male              Luke ~         5 Very~ mascu~\r\n 9    3292879998 18-29 Male              Luke ~         5 Very~ mascu~\r\n10    3292879998 18-29 Male              Leia ~         5 Very~ femin~\r\n# ... with 29,002 more rows, and 4 more variables: homeworld <chr>,\r\n#   species <chr>, films <chr>, year <dbl>\r\n\r\ncharacter_info <- character_info %>% \r\n  mutate(name = as.factor(name)) %>% \r\n  # Let's create aggregated survey levels by combining\r\n  # Somewhat favorable and Very favourable into the Favourable category\r\n  # We're essentially trimming down the categories as per the FiveThirtyEight\r\n  # article\r\n  mutate(sub_level = case_when(\r\n   str_detect(level, \"Neither favorably nor unfavorably\")  ~  \"Neutral\",\r\n   (str_detect(level, \" unfavorably\") |\r\n      str_detect(level, \"Somewhat unfavorably\"))           ~  \"Unfavourable\",\r\n   (str_detect(level, \"Very favorably\") |\r\n      str_detect(level, \"Somewhat favorably\"))             ~ \"Favourable\",\r\n   str_detect(level, \"Unfamiliar\")                         ~ \"Unfamiliar\",\r\n   TRUE                                                    ~ \"None\"\r\n   )) %>% \r\n  mutate(sub_level = factor(sub_level, levels = c(\"Favourable\", \r\n                                                  \"Neutral\", \"Unfavourable\", \r\n                                                  \"Unfamiliar\"))) \r\n\r\n# Processing to setup the waffle plot\r\n# We want to understand each character's popularity\r\ncharacter_info <- character_info %>% \r\n  select(respondent_id, name, sub_level) %>% \r\n  distinct() %>% \r\n  group_by(name) %>% \r\n  mutate(n = n()) %>% \r\n  ungroup() %>% \r\n  group_by(name, sub_level) %>% \r\n  mutate(\r\n    nn = n(),\r\n    perc = nn / n * 100.0) %>% \r\n  ungroup() %>% \r\n  select(name, sub_level, n, nn, perc) %>% \r\n  distinct() %>% \r\n  inner_join(character_info) %>% \r\n  select(respondent_id:respondent_gender, name, \r\n         survey_id, level, sub_level:perc, gender:year)\r\n\r\n\r\n\r\nWe’ll create a waffle plot to have a look at how popular the characters are. In a few cases the overall percentage is slightly less than 100%. This is due to rounding quirks.\r\n\r\n\r\n# remotes::install_github(\"hrbrmstr/waffle\")\r\nlibrary(waffle)\r\n\r\ncharacter_info %>% \r\n  select(name, sub_level, perc) %>% \r\n  distinct() %>% \r\n  ggplot(aes(fill = sub_level, values = perc %>% round())) +\r\n  geom_waffle(colour = \"white\", n_rows = 10, size = 0.33,\r\n              pad = 1, flip = FALSE,\r\n              make_proportional = TRUE) +\r\n  facet_wrap(~ name) +\r\n  labs(title = \"Popularity of Star Wars Characters\",\r\n       subtitle = \"Among US respondents who consider themselves Star Wars Fans\",\r\n       x = \"1 square = 1%\",\r\n       fill = \"\")  +\r\n  theme(legend.position=\"bottom\", \r\n        panel.spacing = unit(1, \"lines\"),\r\n        strip.background = element_blank(),\r\n        axis.text.x = element_blank(),\r\n        axis.text.y = element_blank(),\r\n        axis.ticks = element_blank())\r\n\r\n\r\n\r\n# Check: \r\n# rounding causing waffle to not be fully filled\r\ncharacter_info %>% \r\n  select(name, sub_level, perc) %>% \r\n  distinct() %>% \r\n  filter(name == \"Lando Calrissian\")\r\n\r\n\r\n# A tibble: 4 x 3\r\n  name             sub_level     perc\r\n  <fct>            <fct>        <dbl>\r\n1 Lando Calrissian Unfamiliar    8.61\r\n2 Lando Calrissian Favourable   54.9 \r\n3 Lando Calrissian Neutral      28.8 \r\n4 Lando Calrissian Unfavourable  7.69\r\n\r\nDone? Remember to disconnect!\r\n\r\n\r\n# Good housekeeping means disconnect\r\ndbDisconnect(con)\r\n\r\n\r\n\r\nFin\r\nThat’s it for this series of working with databases. I hope it was useful, if you have any comments or feedback please let me know on Twitter.\r\nAcknowledgements\r\nEdgar Ruiz’s database work, and teachings.\r\nMore resources\r\nMy RStudio Certification GitHub Project\r\nRStudio DB Resources\r\nA murder mystery SQLite DB\r\n\r\n\r\n\r\n",
    "preview": "posts/2020-12-31-using-tidyverse-with-dbs-partiii/jens-johnsson-OFpzBycm3u0-unsplash.jpg",
    "last_modified": "2021-11-27T14:08:00+02:00",
    "input_file": {}
  },
  {
    "path": "posts/2020-12-20-using-the-tidyverse-with-dbs-partii/",
    "title": "Using the tidyverse with Databases - Part II",
    "description": "I was serious, you don't need to be a SQL expert to work with Databases through R",
    "author": [
      {
        "name": "Vebash Naidoo",
        "url": "https://twitter.com/Sciencificity"
      }
    ],
    "date": "2020-12-20",
    "categories": [
      "SQL",
      "databases",
      "tidyverse",
      "dbplyr"
    ],
    "contents": "\r\n\r\nContents\r\nPart I\r\nWhat are we tackling in Part II?\r\nConnect, and remind ourselves what we’re working with\r\nMake a connection\r\nLet’s get familiar with our data\r\nresults\r\nbaker_results\r\n\r\n\r\nWhat are we interested in?\r\nJoining data\r\nRemember the tbl(con, \"tbl_name\") always\r\n\r\nCollect\r\nWhat does the query look like?\r\nBring it into R\r\nVisualise Data\r\n\r\nDone? Remember to disconnect!\r\n\r\nStill to come\r\nAcknowledgements\r\n\r\n\r\n\r\n\r\n\r\n.main-container {\r\n    max-width: 600px !important;\r\n}\r\n\r\npre {\r\n  max-height: 800px !important;\r\n  max-width: 600px !important;\r\n  overflow-y: auto !important;\r\n  overflow-x: scroll !important;\r\n}\r\n\r\npre[class] {\r\n  max-height: 100px;\r\n}\r\n\r\n\r\n\r\n\r\nPart I\r\nIn Part I we made a connection to a SQLite DB.\r\nWhat are we tackling in Part II?\r\nWe’ll do more advanced dplyr 📦 workflows.\r\nWe’ll collect the data from the query.\r\ncollecting data is when we bring the data into R. If you recall in the Part I post, all computation was happening on the DB itself, and not pulled into R.\r\nThe project on GitHub, has the example SQLite database, the slides, and some code files.\r\nConnect, and remind ourselves what we’re working with\r\nMake a connection\r\nAs always, our first step is to connect to the database.\r\n\r\n\r\nlibrary(DBI) # main DB interface\r\nlibrary(dplyr) \r\nlibrary(dbplyr) # dplyr back-end for DBs\r\n\r\ncon <- dbConnect(drv = RSQLite::SQLite(), # give me a SQLite connection\r\n        dbname = \"data/great_brit_bakeoff.db\") # To what? The DB named great_brit_bakeoff.db\r\n\r\ndbListTables(con) # List me the tables at the connection\r\n\r\n\r\n [1] \"baker_results\"     \"bakers\"            \"bakes\"            \r\n [4] \"challenge_results\" \"challenges\"        \"episode_results\"  \r\n [7] \"episodes\"          \"ratings\"           \"ratings_seasons\"  \r\n[10] \"results\"           \"seasons\"           \"series\"           \r\n\r\nLet’s get familiar with our data\r\nIn the dataset we have:\r\nresults which tells us how each baker did in the episode - IN, OUT, WINNER etc.\r\nbaker_results which tells us a bit more about the baker’s performance over the entire series - how many times did they win STAR BAKER, how many times they placed in the top 3 etc.\r\nLet’s get an idea of what is in each table.\r\nresults\r\n\r\n\r\ntbl(con, \"results\") %>% # Reach into my connection, and \"talk\" to results table\r\n  head(10) %>%          # get me a subset of the data\r\n  # sometimes if there are many columns, some columns are hidden, \r\n  # this option prints all columns for us\r\n  print(width = Inf)    \r\n\r\n\r\n# Source:   lazy query [?? x 4]\r\n# Database: sqlite 3.36.0 [C:\\Users\\Vebashini\\OneDrive -\r\n#   Rain\\Documents\\Main-Documents\\Personal\\Blog_Vebash\\_posts\\2020-12-20-using-the-tidyverse-with-dbs-partii\\data\\great_brit_bakeoff.db]\r\n   series episode baker   result\r\n    <int>   <int> <chr>   <chr> \r\n 1      1       1 Annetha IN    \r\n 2      1       2 Annetha OUT   \r\n 3      1       3 Annetha <NA>  \r\n 4      1       4 Annetha <NA>  \r\n 5      1       5 Annetha <NA>  \r\n 6      1       6 Annetha <NA>  \r\n 7      1       1 David   IN    \r\n 8      1       2 David   IN    \r\n 9      1       3 David   IN    \r\n10      1       4 David   OUT   \r\n\r\n\r\n\r\ntbl(con, \"results\") %>% \r\n  count(result, sort = TRUE) # what categories of \"result\" are there?\r\n\r\n\r\n# Source:     lazy query [?? x 2]\r\n# Database:   sqlite 3.36.0 [C:\\Users\\Vebashini\\OneDrive -\r\n#   Rain\\Documents\\Main-Documents\\Personal\\Blog_Vebash\\_posts\\2020-12-20-using-the-tidyverse-with-dbs-partii\\data\\great_brit_bakeoff.db]\r\n# Ordered by: desc(n)\r\n  result         n\r\n  <chr>      <int>\r\n1 IN           452\r\n2 <NA>         376\r\n3 OUT           79\r\n4 STAR BAKER    70\r\n5 RUNNER-UP     18\r\n6 WINNER         9\r\n7 [a]            1\r\n8 WD             1\r\n\r\nbaker_results\r\n\r\n\r\ntbl(con, \"baker_results\") %>% # Reach in and \"talk\" to baker_results\r\n  head() %>%                  # get a glimpse of data\r\n  collect() %>%               # bring that glimpsed data into R \r\n  DT::datatable(options = list(scrollX = TRUE)) # force DT horizontal scrollbar\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\"],[1,1,1,1,1,1],[\"Annetha Mills\",\"David Chambers\",\"Edward \\\"Edd\\\" Kimber\",\"Jasminder Randhawa\",\"Jonathan Shepherd\",\"Lea Harris\"],[\"Annetha\",\"David\",\"Edd\",\"Jasminder\",\"Jonathan\",\"Lea\"],[30,31,24,45,25,51],[\"Single mother\",\"Entrepreneur\",\"Debt collector for Yorkshire Bank\",\"Assistant Credit Control Manager\",\"Research Analyst\",\"Retired\"],[\"Essex\",\"Milton Keynes\",\"Bradford\",\"Birmingham\",\"St Albans\",\"Midlothian, Scotland\"],[\"Mills\",\"Chambers\",\"Kimber\",\"Randhawa\",\"Shepherd\",\"Harris\"],[\"Annetha\",\"David\",\"Edward\",\"Jasminder\",\"Jonathan\",\"Lea\"],[0,0,0,0,0,0],[0,0,2,0,1,0],[1,1,4,2,1,0],[1,3,1,2,2,1],[2,3,1,2,1,10],[7,8,6,5,9,10],[4.5,4.5,2,3,6,10],[0,0,1,0,0,0],[0,0,0,0,0,0],[2,4,6,5,3,1],[14838,14838,14838,14838,14838,14838],[14845,14859,14873,14866,14852,14838],[null,null,null,null,null,null],[null,null,null,null,null,null],[33.3333333333333,66.6666666666667,100,83.3333333333333,50,16.6666666666667],[50,25,66.6666666666667,40,33.3333333333333,0]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>series<\\/th>\\n      <th>baker_full<\\/th>\\n      <th>baker<\\/th>\\n      <th>age<\\/th>\\n      <th>occupation<\\/th>\\n      <th>hometown<\\/th>\\n      <th>baker_last<\\/th>\\n      <th>baker_first<\\/th>\\n      <th>star_baker<\\/th>\\n      <th>technical_winner<\\/th>\\n      <th>technical_top3<\\/th>\\n      <th>technical_bottom<\\/th>\\n      <th>technical_highest<\\/th>\\n      <th>technical_lowest<\\/th>\\n      <th>technical_median<\\/th>\\n      <th>series_winner<\\/th>\\n      <th>series_runner_up<\\/th>\\n      <th>total_episodes_appeared<\\/th>\\n      <th>first_date_appeared<\\/th>\\n      <th>last_date_appeared<\\/th>\\n      <th>first_date_us<\\/th>\\n      <th>last_date_us<\\/th>\\n      <th>percent_episodes_appeared<\\/th>\\n      <th>percent_technical_top3<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"scrollX\":true,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[1,4,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}\r\nNotice the use of the collect() function in the code above. I wanted us to be able to get a full glimpse of the data in a nice table, and hence I brought the first few rows of data into R by using the collect() function. This allowed me to then use datatable to display the results a bit better, than the print(width = Inf) alternative.\r\nWhat are we interested in?\r\nLet’s say we want to see how the WINNER and RUNNER-UP(s) did in the series they appeared in.\r\nTo do that we need to get all the baker_results for the WINNER and RUNNER-UP.\r\nJoining data\r\nWhen doing joins we want to find the common columns across the two tables that we can join on.\r\nIn results we have series and baker.\r\nIn baker_results we have series and baker.\r\n❓ 🤔 Why didn’t I also choose the episode column of results as a join column?  ✅ Yes, that column is not in baker_results, since baker_results contains data about how the baker did overall in the series they appeared, that is, one row per baker. The results data however, contains info per baker, per episode, for the series they appeared in - i.e. if they flopped (were OUT 😉), in the second episode of a series that contained 10 episodes, their name would appear 10 times in the results table, but their “result” value will be NA from episode 3 onwards.\r\nRemember the tbl(con, \"tbl_name\") always\r\nI’d like to bring to your attention the use of tbl(con, \"table_1\") and tbl(con, \"table_2\") in the join function.\r\nWe must always keep this in mind, because baker_results and results don’t exist in R yet. We’re talking to those tables in our relational database management system (RDBMS), so we always have to do so through our connection.\r\n\r\n\r\nset.seed(42)\r\ntbl(con, \"baker_results\") %>% # use connection to \"talk\" to baker_results\r\n  inner_join(tbl(con, \"results\"), # use connection to \"talk\" to results and join both tables \r\n        by = c('baker' = 'baker',\r\n               'series' = 'series')) %>% # join criteria \r\n  collect() %>% # get it into R\r\n  sample_n(size = 3) %>% # take a random sample\r\n  print(width = Inf) # print all columns\r\n\r\n\r\n# A tibble: 3 x 26\r\n  series baker_full     baker     age occupation                 \r\n   <dbl> <chr>          <chr>   <dbl> <chr>                      \r\n1      6 Ian Cumming    Ian        41 Travel photographer        \r\n2      4 Frances Quinn  Frances    31 Children's Clothes Designer\r\n3      2 Yasmin Limbert Yasmin     43 Childminder                \r\n  hometown                          baker_last baker_first star_baker\r\n  <chr>                             <chr>      <chr>            <int>\r\n1 Great Wilbraham, Cambridgeshire   Cumming    Ian                  3\r\n2 Market Harborough, Leicestershire Quinn      Frances              1\r\n3 West Kirby, The Wirral            Limbert    Yasmin               1\r\n  technical_winner technical_top3 technical_bottom technical_highest\r\n             <int>          <int>            <int>             <dbl>\r\n1                1              6                4                 1\r\n2                1              7                3                 1\r\n3                0              2                4                 2\r\n  technical_lowest technical_median series_winner series_runner_up\r\n             <dbl>            <dbl>         <int>            <int>\r\n1                8                3             0                1\r\n2                8                3             1                0\r\n3                6                5             0                0\r\n  total_episodes_appeared first_date_appeared last_date_appeared\r\n                    <dbl>               <dbl>              <dbl>\r\n1                      10               16652              16715\r\n2                      10               15937              16000\r\n3                       6               15202              15237\r\n  first_date_us last_date_us percent_episodes_appeared\r\n          <dbl>        <dbl>                     <dbl>\r\n1         16983        17025                       100\r\n2         16432        16495                       100\r\n3            NA           NA                        75\r\n  percent_technical_top3 episode result\r\n                   <dbl>   <int> <chr> \r\n1                   60         5 IN    \r\n2                   70         5 IN    \r\n3                   33.3       5 IN    \r\n\r\nNotice that all columns of baker_results appear first and then we have the “extra” columns from results i.e. episode and result.\r\nCommon mistake\r\nI included the above to show that each time we “talk” to a table we must do so through our connection, because I often make the mistake of not including the tbl(con, \"name_of_tbl_i_am_joining\") in the join function. I, more times than I care to admit 🤦‍♀️, incorrectly write:\r\n\r\n  tbl(con, \"table1\") %>% # correct -> \"talk\" through connection\r\n     left_join(table2,   # incorrect -> forgot to use the connection\r\n          by = c(\"tbl1_name1\" = \"tbl2_name1\"))\r\n\r\nI would like to help you, not repeat my mistake 😕, so heads up AVOID THE FOLLOWING 🛑:\r\n\r\n\r\ntbl(con, \"baker_results\") %>% # use connection to \"talk\" to baker_results\r\n  inner_join(results,  # OOPS! I forgot the tbl(con, \"results\")\r\n        by = c('baker' = 'baker',\r\n               'series' = 'series'))  \r\n\r\n\r\nError in tbl_vars_dispatch(x): object 'results' not found\r\n\r\nCollect\r\nOk, let us now do our entire pipeline, and only bring the data into R when we’ve got what we’re looking for.\r\nWe need to:\r\nJoin the tables\r\nFilter the data for WINNER and RUNNER-UP in the result column.\r\nSelect only the columns we’re interested in.\r\n\r\n\r\n(final_query <- tbl(con, \"baker_results\") %>% # use connection to \"talk\" to baker_results\r\n  inner_join(tbl(con, \"results\"), # use connection to \"talk\" to results and join both tables \r\n        by = c('baker' = 'baker',\r\n               'series' = 'series')) %>% # join criteria \r\n  filter(result %in% c(\"WINNER\", \"RUNNER-UP\")) %>% # filter rows we're interested in\r\n  select(series, baker:percent_technical_top3,\r\n         result))\r\n\r\n\r\n# Source:   lazy query [?? x 24]\r\n# Database: sqlite 3.36.0 [C:\\Users\\Vebashini\\OneDrive -\r\n#   Rain\\Documents\\Main-Documents\\Personal\\Blog_Vebash\\_posts\\2020-12-20-using-the-tidyverse-with-dbs-partii\\data\\great_brit_bakeoff.db]\r\n   series baker       age occupation  hometown  baker_last baker_first\r\n    <dbl> <chr>     <dbl> <chr>       <chr>     <chr>      <chr>      \r\n 1      1 Edd          24 Debt colle~ Bradford  Kimber     Edward     \r\n 2      1 Miranda      37 Food buyer~ Midhurst~ Browne     Miranda    \r\n 3      1 Ruth         31 Retail man~ Poynton,~ Clemens    Ruth       \r\n 4      2 Holly        31 Advertisin~ Leicester Bell       Holly      \r\n 5      2 Joanne       41 Housewife   Ongar, E~ Wheatley   Joanne     \r\n 6      2 Mary-Anne    45 Housewife   Kiddermi~ Boermans   Mary-Anne  \r\n 7      3 Brendan      63 Recruitmen~ Sutton C~ Lynch      Brendan    \r\n 8      3 James        21 Medical st~ Hillswic~ Morton     James      \r\n 9      3 John         23 Law student Wigan     Whaite     John       \r\n10      4 Frances      31 Children's~ Market H~ Quinn      Frances    \r\n# ... with more rows, and 17 more variables: star_baker <int>,\r\n#   technical_winner <int>, technical_top3 <int>,\r\n#   technical_bottom <int>, technical_highest <dbl>,\r\n#   technical_lowest <dbl>, technical_median <dbl>,\r\n#   series_winner <int>, series_runner_up <int>,\r\n#   total_episodes_appeared <dbl>, first_date_appeared <dbl>,\r\n#   last_date_appeared <dbl>, first_date_us <dbl>, ...\r\n\r\nThe above code just sets up the query that will be executed should we run (Ctrl + Enter) final_query in R (hence the lazy query [?? x 24] in the output). No data is collected (i.e. present in your local R environment) as yet.\r\nWhat does the query look like?\r\n\r\n\r\n.scroll-100 {\r\n  white-space:pre !important;\r\n  max-width: 100px;\r\n  overflow-x: scroll;\r\n  background-color: inherit;\r\n}\r\ncode.r{\r\n  font-size: 10px;\r\n}\r\n\r\n\r\n\r\n\r\nfinal_query %>% \r\n  show_query() \r\n\r\n\r\n<SQL>\r\nSELECT `series`, `baker`, `age`, `occupation`, `hometown`, `baker_last`, `baker_first`, `star_baker`, `technical_winner`, `technical_top3`, `technical_bottom`, `technical_highest`, `technical_lowest`, `technical_median`, `series_winner`, `series_runner_up`, `total_episodes_appeared`, `first_date_appeared`, `last_date_appeared`, `first_date_us`, `last_date_us`, `percent_episodes_appeared`, `percent_technical_top3`, `result`\r\nFROM (SELECT `LHS`.`series` AS `series`, `baker_full`, `LHS`.`baker` AS `baker`, `age`, `occupation`, `hometown`, `baker_last`, `baker_first`, `star_baker`, `technical_winner`, `technical_top3`, `technical_bottom`, `technical_highest`, `technical_lowest`, `technical_median`, `series_winner`, `series_runner_up`, `total_episodes_appeared`, `first_date_appeared`, `last_date_appeared`, `first_date_us`, `last_date_us`, `percent_episodes_appeared`, `percent_technical_top3`, `episode`, `result`\r\nFROM `baker_results` AS `LHS`\r\nINNER JOIN `results` AS `RHS`\r\nON (`LHS`.`baker` = `RHS`.`baker` AND `LHS`.`series` = `RHS`.`series`)\r\n)\r\nWHERE (`result` IN ('WINNER', 'RUNNER-UP'))\r\n\r\n\r\nBring it into R\r\nNow finally, we are ready to bring our filtered and joined data into R by using collect().\r\n\r\n\r\n(top_performers <- final_query %>% \r\n  collect())\r\n\r\n\r\n# A tibble: 24 x 24\r\n   series baker       age occupation  hometown  baker_last baker_first\r\n    <dbl> <chr>     <dbl> <chr>       <chr>     <chr>      <chr>      \r\n 1      1 Edd          24 Debt colle~ Bradford  Kimber     Edward     \r\n 2      1 Miranda      37 Food buyer~ Midhurst~ Browne     Miranda    \r\n 3      1 Ruth         31 Retail man~ Poynton,~ Clemens    Ruth       \r\n 4      2 Holly        31 Advertisin~ Leicester Bell       Holly      \r\n 5      2 Joanne       41 Housewife   Ongar, E~ Wheatley   Joanne     \r\n 6      2 Mary-Anne    45 Housewife   Kiddermi~ Boermans   Mary-Anne  \r\n 7      3 Brendan      63 Recruitmen~ Sutton C~ Lynch      Brendan    \r\n 8      3 James        21 Medical st~ Hillswic~ Morton     James      \r\n 9      3 John         23 Law student Wigan     Whaite     John       \r\n10      4 Frances      31 Children's~ Market H~ Quinn      Frances    \r\n# ... with 14 more rows, and 17 more variables: star_baker <int>,\r\n#   technical_winner <int>, technical_top3 <int>,\r\n#   technical_bottom <int>, technical_highest <dbl>,\r\n#   technical_lowest <dbl>, technical_median <dbl>,\r\n#   series_winner <int>, series_runner_up <int>,\r\n#   total_episodes_appeared <dbl>, first_date_appeared <dbl>,\r\n#   last_date_appeared <dbl>, first_date_us <dbl>, ...\r\n\r\nHow about that? Notice the A tibble: 24 x 24! R now, has the data in it’s local environment, and can definitively tell us it knows there are 24 observations (no more lazy query) 😄.\r\nVisualise Data\r\nNow that we have finalised what data we wanted from our RDBMS, executed our query, and collected the data into our R environment we can do further processing, create plots for reports etc.\r\nI am interested in understanding how did the winner and runner-up(s) of series 6 do across the season in terms of technical challenges etc.?\r\n\r\n\r\nlibrary(tidyverse)\r\n\r\ntop_performers %>% \r\n  # filter for season we're interested in\r\n  filter(series == 6) %>%\r\n  # format baker nicely so we see winner, then runner-up(s)\r\n  mutate(baker_name = factor(str_glue(\"{result} - {baker}\")),\r\n         baker_name = fct_rev(baker_name)) %>% \r\n  # let's convert all the tech info cols to be a metric name, \r\n  # and put the value in the value column \r\n  # (by default values_to = \"value\" in pivot_longer())\r\n  pivot_longer(cols = c(star_baker:technical_median),\r\n               names_to = \"metric\") %>% \r\n  mutate(metric = fct_reorder(metric, value)) %>% \r\n  ggplot(aes(x = value, y = metric)) +\r\n  geom_col(fill = \"#727d97\") +\r\n  facet_wrap(~ baker_name) +\r\n  labs(title = str_glue(\"Metrics for Season \",\r\n    \"{top_performers %>%  filter(series == 6) %>%\r\n    select(series) %>% distinct()}'s Winner and Runner-Up(s)\"),\r\n    y = \"\") +\r\n  theme_light() +\r\n  theme(panel.spacing = unit(1, \"lines\")) +\r\n  theme(strip.background =element_rect(fill=\"#f4e4e7\"))+\r\n  theme(strip.text = element_text(colour = \"#5196b4\"))\r\n\r\n\r\n\r\n\r\nGiven that Nadiya was a technical winner more times than the other contestants, and that her technical_lowest was better (higher number is better) it looks like she had a good run throughout the series, and was a deserved winner.\r\nDone? Remember to disconnect!\r\nGood housekeeping means always remembering to disconnect once you’re done.\r\n\r\n\r\ndbDisconnect(con) # closes our DB connection\r\n\r\n\r\n\r\nStill to come\r\nSetting up an external DB in PostgreSQL / MySQL.\r\nConnecting to said DB, and running SQL workloads on it.\r\nAcknowledgements\r\nThe Great British Bake Off data from Dr. Alison Hill.\r\nEdgar Ruiz’s database work, and teachings.\r\n\r\n\r\n\r\n",
    "preview": "posts/2020-12-20-using-the-tidyverse-with-dbs-partii/Paper.R_Programming.4.png",
    "last_modified": "2021-11-27T14:07:00+02:00",
    "input_file": {},
    "preview_width": 2048,
    "preview_height": 1536
  },
  {
    "path": "posts/2020-12-12-using-the-tidyverse-with-databases/",
    "title": "Using the tidyverse with Databases - Part I",
    "description": "You don't need to be a SQL expert to work with Databases through R",
    "author": [
      {
        "name": "Vebash Naidoo",
        "url": "https://twitter.com/Sciencificity"
      }
    ],
    "date": "2020-12-12",
    "categories": [
      "SQL",
      "databases",
      "tidyverse",
      "dbplyr"
    ],
    "contents": "\r\n\r\nContents\r\nBackground\r\nIntro to using Databases in R, with Tidyverse tools (Part I)\r\nMotivation\r\nConnecting to a Database\r\nPackages needed\r\nThe database we’ll use\r\nConnecting to a SQLite DB\r\n\r\nTake a look around\r\nDBI Functions\r\ndplyr Functions\r\nHave a look at the SQL behind the scenes\r\nWhat’s with this lazy query / ?? we’re seeing?\r\n\r\nDone? Remember to disconnect!\r\n\r\nSlides\r\nStill to come\r\nAcknowledgements\r\n\r\n\r\n\r\nBackground\r\nOn the 1st of December I certified as an RStudio Tidyverse Instructor. As part of the process I prepared a sample lesson that was delivered during the exam. In a series of posts I will go through an extension of that sample lesson.\r\nIntro to using Databases in R, with Tidyverse tools (Part I)\r\nMotivation\r\nYou often have data in a corporate or institutional database (often termed relational database management system, or RDBMS). The language to talk with such a database (DB) is some variant of the language SQL (Structured Query Language). I say some variant, since a vendor providing an RDBMS may adopt the standardised SQL, but they may also extend it with their own variations.\r\nIf you use different RDBMS’s from different vendors you need to understand how to query that DB using the particular SQL dialect used by that vendor. For example, we use PostgreSQL, and we also use PrestoDB (for Athena on AWS). JSON fields in the PostgreSQL DB are ingested as structured nested arrays in AWS and hence when querying the same field we use different query syntax.\r\nYou know R, especially the dplyr 📦. Even though the dplyr 📦 is so well written to mimic the SQL syntax - select(), group_by(), left_join() etc. there is still a cognitive load when you switch between using R syntax, and SQL syntax (ask me, who has often written == in SQL syntax on Athena only to wonder why I am getting an error 😶).\r\nYou only have so much memory in your local environment, and may want your RDBMS to do the heavy lifting (most of the computation), and only pull data into R when you need to (e.g. pull in aggregated data to create plots for a report).\r\nIn this tutorial you will learn how to use dbplyr, which is a database back-end of dplyr, to execute queries directly in your RDBMS all the while writing R tidyverse syntax 😮 ⭐.\r\nConnecting to a Database\r\nPackages needed\r\nDBI: This is the main package which is a Database Interface for R.install.packages(\"DBI\")\r\ndbplyr: The 📦 we may use to talk to our database, all the while using dplyr syntax in our code.install.packages(\"dbplyr\")\r\ndplyr: To select(), group_by() as well as “talk”, via the connection we will establish, to a database table.\r\nRSQLite: DBI compliant package that allows a connection to a lightweight single user SQLite DB.install.packages(\"RSQLite\")\r\nOther DBI compliant R packages you may need for your use case - e.g. RPostgres is for connecting to a PostgreSQL RDBMS. Note: Not used in this tutorial (brief overview in slides), and RStudio’s DB Website is a treasure trove of information 👩‍💻.\r\nodbc: This is a DBI compliant interface to allow you to interface to your RDBMS using an odbc driver.Note: Not used in this tutorial (brief overview in slides), and again RStudio’s DB Website has useful information in this regard too!install.packages(\"odbc\")\r\nThe database we’ll use\r\nAlison Hill created a dataset for The Great British Bake Off. I used the data from her package to create a SQLite DB that we will use to practise on.\r\nConnecting to a SQLite DB\r\nFor the purposes of this tutorial we will connect to a SQLite DB that I created. To talk to the DB we need to first make a connection.\r\nLoad the DBI package: library(DBI)\r\nMake a connection: con <- dbConnect(RSQLite::SQLite(), \"mydb.db\")\r\n\r\n\r\nlibrary(DBI) # main DB interface\r\nlibrary(dplyr) \r\nlibrary(dbplyr) # dplyr back-end for DBs\r\n\r\ncon <- dbConnect(drv = RSQLite::SQLite(), # give me a SQLite connection\r\n        dbname = \"data/great_brit_bakeoff.db\") # To what? The DB named great_brit_bakeoff.db\r\nsummary(con) # What do we have? \r\n\r\n\r\n          Length            Class             Mode \r\n               1 SQLiteConnection               S4 \r\n\r\nOk, we have successfully managed to connect to the DB.\r\nTake a look around\r\nAlright, we’ve made a connection now what? Let’s have a look around using some DBI functions.\r\nDBI Functions\r\n\r\n\r\ndbListTables(con) # List me the tables at the connection\r\n\r\n\r\n [1] \"baker_results\"     \"bakers\"            \"bakes\"            \r\n [4] \"challenge_results\" \"challenges\"        \"episode_results\"  \r\n [7] \"episodes\"          \"ratings\"           \"ratings_seasons\"  \r\n[10] \"results\"           \"seasons\"           \"series\"           \r\n\r\ndbListFields(con, # Reach into my connection and ...\r\n      \"bakers\")   # tell me what fields does the `bakers` table have?\r\n\r\n\r\n[1] \"series\"     \"baker_full\" \"age\"        \"occupation\" \"hometown\"  \r\n\r\nres <- dbSendQuery(con, \"SELECT * FROM bakers LIMIT 3\") # Execute a query\r\ndbFetch(res) # get the result\r\n\r\n\r\n  series          baker_full age                        occupation\r\n1      1       Annetha Mills  30                           Midwife\r\n2      1      David Chambers  31                      Entrepreneur\r\n3      1 Edward \"Edd\" Kimber  24 Debt collector for Yorkshire Bank\r\n       hometown\r\n1         Essex\r\n2 Milton Keynes\r\n3      Bradford\r\n\r\ndbClearResult(res) # clear the result\r\n\r\n\r\n\r\ndplyr Functions\r\nOk, let’s flex our dplyr skills 😄.\r\ntbl(con, \"name_of_table\") says using my connection “con” go execute a SELECT * FROM name_of_table.\r\n\r\n\r\ntbl(con, \"bakers\") # let's have a look - works like glimpse()\r\n\r\n\r\n# Source:   table<bakers> [?? x 5]\r\n# Database: sqlite 3.36.0 [C:\\Users\\Vebashini\\OneDrive -\r\n#   Rain\\Documents\\Main-Documents\\Personal\\Blog_Vebash\\_posts\\2020-12-12-using-the-tidyverse-with-databases\\data\\great_brit_bakeoff.db]\r\n   series baker_full                age occupation         hometown   \r\n    <dbl> <chr>                   <dbl> <chr>              <chr>      \r\n 1      1 \"Annetha Mills\"            30 Midwife            Essex      \r\n 2      1 \"David Chambers\"           31 Entrepreneur       Milton Key~\r\n 3      1 \"Edward \\\"Edd\\\" Kimber\"    24 Debt collector fo~ Bradford   \r\n 4      1 \"Jasminder Randhawa\"       45 Assistant Credit ~ Birmingham \r\n 5      1 \"Jonathan Shepherd\"        25 Research Analyst   St Albans  \r\n 6      1 \"Lea Harris\"               51 Retired            Midlothian~\r\n 7      1 \"Louise Brimelow\"          44 Police Officer     Manchester \r\n 8      1 \"Mark Whithers\"            48 Bus Driver         South Wales\r\n 9      1 \"Miranda Gore Browne\"      37 Food buyer for Ma~ Midhurst, ~\r\n10      1 \"Ruth Clemens\"             31 Retail manager/Ho~ Poynton, C~\r\n# ... with more rows\r\n\r\ntbl(con, \"bakers\") %>% \r\n  head(3) # \"SELECT * FROM bakers LIMIT 3\"\r\n\r\n\r\n# Source:   lazy query [?? x 5]\r\n# Database: sqlite 3.36.0 [C:\\Users\\Vebashini\\OneDrive -\r\n#   Rain\\Documents\\Main-Documents\\Personal\\Blog_Vebash\\_posts\\2020-12-12-using-the-tidyverse-with-databases\\data\\great_brit_bakeoff.db]\r\n  series baker_full                age occupation           hometown  \r\n   <dbl> <chr>                   <dbl> <chr>                <chr>     \r\n1      1 \"Annetha Mills\"            30 Midwife              Essex     \r\n2      1 \"David Chambers\"           31 Entrepreneur         Milton Ke~\r\n3      1 \"Edward \\\"Edd\\\" Kimber\"    24 Debt collector for ~ Bradford  \r\n\r\nNotice that each time we used con. We use our connection con to “talk” to our database, and we will use it throughout, even in our tidy pipelines.\r\nIn baker_results we have the baker with their details, as well as their standing in the series competition. Let’s say we wanted to know if the winners came from different areas in Britain, or from some areas in particular.\r\n\r\n\r\ndbListFields(con, \"baker_results\")\r\n\r\n\r\n [1] \"series\"                    \"baker_full\"               \r\n [3] \"baker\"                     \"age\"                      \r\n [5] \"occupation\"                \"hometown\"                 \r\n [7] \"baker_last\"                \"baker_first\"              \r\n [9] \"star_baker\"                \"technical_winner\"         \r\n[11] \"technical_top3\"            \"technical_bottom\"         \r\n[13] \"technical_highest\"         \"technical_lowest\"         \r\n[15] \"technical_median\"          \"series_winner\"            \r\n[17] \"series_runner_up\"          \"total_episodes_appeared\"  \r\n[19] \"first_date_appeared\"       \"last_date_appeared\"       \r\n[21] \"first_date_us\"             \"last_date_us\"             \r\n[23] \"percent_episodes_appeared\" \"percent_technical_top3\"   \r\n\r\ntbl(con, \"baker_results\") %>% \r\n  select(series, baker, hometown, series_winner) # normal dplyr select\r\n\r\n\r\n# Source:   lazy query [?? x 4]\r\n# Database: sqlite 3.36.0 [C:\\Users\\Vebashini\\OneDrive -\r\n#   Rain\\Documents\\Main-Documents\\Personal\\Blog_Vebash\\_posts\\2020-12-12-using-the-tidyverse-with-databases\\data\\great_brit_bakeoff.db]\r\n   series baker     hometown              series_winner\r\n    <dbl> <chr>     <chr>                         <int>\r\n 1      1 Annetha   Essex                             0\r\n 2      1 David     Milton Keynes                     0\r\n 3      1 Edd       Bradford                          1\r\n 4      1 Jasminder Birmingham                        0\r\n 5      1 Jonathan  St Albans                         0\r\n 6      1 Lea       Midlothian, Scotland              0\r\n 7      1 Louise    Manchester                        0\r\n 8      1 Mark      South Wales                       0\r\n 9      1 Miranda   Midhurst, West Sussex             0\r\n10      1 Ruth      Poynton, Cheshire                 0\r\n# ... with more rows\r\n\r\nNotice how our dplyr select() has trimmed down the number of columns from 24 to 4.\r\nTime to see if our winning bakers hail from similar hometowns or not.\r\n\r\n\r\ntbl(con, \"baker_results\") %>% \r\n  select(series, baker, hometown, series_winner) %>% \r\n  filter(series_winner == 1) %>% # normal dplyr filter\r\n  count(hometown, sort = TRUE)   # normal dplyr count\r\n\r\n\r\n# Source:     lazy query [?? x 2]\r\n# Database:   sqlite 3.36.0 [C:\\Users\\Vebashini\\OneDrive -\r\n#   Rain\\Documents\\Main-Documents\\Personal\\Blog_Vebash\\_posts\\2020-12-12-using-the-tidyverse-with-databases\\data\\great_brit_bakeoff.db]\r\n# Ordered by: desc(n)\r\n  hometown                              n\r\n  <chr>                             <int>\r\n1 Wigan                                 1\r\n2 West Molesey, Surrey                  1\r\n3 Ongar, Essex                          1\r\n4 Market Harborough, Leicestershire     1\r\n5 Leeds / Luton                         1\r\n6 Bradford                              1\r\n7 Barton-Upon-Humber, Lincolnshire      1\r\n8 Barton-Le-Clay, Bedfordshire          1\r\n\r\nLooks like our winners are from very different areas.\r\nHave a look at the SQL behind the scenes\r\nOur dplyr syntax is converted behind the scenes to SQL which is executed directly on the DB table.\r\n\r\n\r\ntbl(con, \"baker_results\") %>% \r\n  select(series, baker, hometown, series_winner) %>% \r\n  filter(series_winner == 1) %>% \r\n  count(hometown, sort = TRUE) %>% \r\n  show_query()\r\n\r\n\r\n<SQL>\r\nSELECT `hometown`, COUNT(*) AS `n`\r\nFROM (SELECT `series`, `baker`, `hometown`, `series_winner`\r\nFROM `baker_results`)\r\nWHERE (`series_winner` = 1.0)\r\nGROUP BY `hometown`\r\nORDER BY `n` DESC\r\n\r\nThat’s pretty nifty, and helps you learn SQL in the process - it is always good to know, and read SQL, which is used extensively in work and institutional environments.\r\nWhat’s with this lazy query / ?? we’re seeing?\r\nYou might have noticed that our pipelines have a:\r\nSource: table [?? x 5] OR\r\nSource: lazy query [?? x 4]\r\nin the output results.\r\nWhy is this?\r\nBehind the scenes the dplyr code we write, gets converted to SQL (the particular dialect of the DB we’re connecting to).\r\nThe SQL is executed directly on the DB. I.e. the data is not first brought into R and manipulated in R. Instead we send the query to the DB, and the DB does the computation.\r\nWhen we use a dplyr pipeline to execute a query on the DB, the DB does the computation and sends us back a glimpse of the executed end result.\r\nIt is for this reason, we see the ?? - we’re being told “Hey, I executed this query (your pipeline converted to SQL) on the DB at connection con, and here’s a snippet of the output, but I did not get the meta-info on how many rows were produced, I just know that I got x_number of columns in the output.”\r\nWe will see in the next part of the tutorial how to get the info into R, and understand how many rows were produced etc.\r\nDone? Remember to disconnect!\r\nGood housekeeping means always remembering to disconnect once you’re done.\r\n\r\n\r\ndbDisconnect(con) # closes our DB connection\r\n\r\n\r\n\r\nTo see that is indeed the case let’s see if we can use the connection further …\r\n\r\n\r\ndbListTables(con)\r\n\r\n\r\nError: Invalid or closed connection\r\n\r\nSlides\r\nIf you’d like to dive in please check out the slides, and the project on GitHub.\r\n\r\n\r\n\r\n\r\n\r\n\r\nfitvids('.shareagain', {players: 'iframe'});\r\n\r\nStill to come\r\nMore dplyr, for example joining tables.\r\nGetting the data into R.\r\nAcknowledgements\r\nSlide inspiration, as well as some of the background pictures are from Dr. Alison Hill.\r\nThe Great British Bake Off data from Dr. Alison Hill.\r\nEdgar Ruiz’s database work, and teachings.\r\n\r\n\r\n\r\n",
    "preview": "posts/2020-12-12-using-the-tidyverse-with-databases/data2-unsplash.jpg",
    "last_modified": "2021-11-27T14:07:00+02:00",
    "input_file": {}
  }
]
